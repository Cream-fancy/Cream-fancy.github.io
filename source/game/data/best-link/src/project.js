window.__require=function e(t,n,i){function a(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+r+"'")}}var h=n[r]={exports:{}};t[r][0].call(h.exports,function(e){return a(t[r][1][e]||e)},h,h.exports,e,t,n,i)}return n[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<i.length;r++)a(i[r]);return a}({AdvertFail:[function(e,t,n){"use strict";cc._RF.push(t,"28c4202NLhBbqWASe1Z3Gxs","AdvertFail"),cc.Class({extends:cc.Component,properties:{},onDestroy:function(){},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addEvent:function(){this.node.getChildByName("closebtn").on(cc.Node.EventType.TOUCH_END,this.clickCloseBtn,this)},removeEvent:function(){this.node.getChildByName("closebtn").off(cc.Node.EventType.TOUCH_END,this.clickCloseBtn,this)},initialize:function(){this.addEvent()},clickCloseBtn:function(){this.destroyClass()}}),cc._RF.pop()},{}],CacheData:[function(e,t,n){"use strict";cc._RF.push(t,"9c113gi4zROapvfqbyAskSH","CacheData"),cc.Class({properties:{},initialize:function(){},readCaheData:function(e){var t={};try{t=JSON.parse(cc.sys.localStorage.getItem(e))}catch(e){}return t},writeCaheDataByKey:function(e,t){try{cc.sys.localStorage.setItem(e,JSON.stringify(t))}catch(e){}}}),cc._RF.pop()},{}],ChooseMessengerLayer:[function(e,t,n){"use strict";cc._RF.push(t,"9d8610i8AtGCaQZYt+Zx1f7","ChooseMessengerLayer"),cc.Class({extends:cc.Component,properties:{},onDestroy:function(){},destroyNode:function(){this.node.getChildByName("openbtn").off(cc.Node.EventType.TOUCH_END,this.clickOpenBtnFun,this),this.node.destroy()},initialize:function(){this.node.getChildByName("openbtn").on(cc.Node.EventType.TOUCH_END,this.clickOpenBtnFun,this)},clickOpenBtnFun:function(){var e=this,t=function(){botData.openSubscribeBot=1,gameSDK.faceBookBot.sendMessengerRobot(),e.destroyNode();var t=[],n=getGlobleDic(12);t.push(getItemConfig(itemIDConfig.gem,n)),sceneControl.showReward(t),heroData.addGem(n),heroData.saveData()},n=function(){botData.openSubscribeBot=0,gameSDK.faceBookBot.sendMessengerRobot(),e.destroyNode()},i=this.node.getChildByName("msg_box").getComponent(sp.Skeleton);i.loop=!1,i.animation="open",i.setCompleteListener(function(){gameSDK.faceBookBot.subscribeBotAsync(t,n)})}}),cc._RF.pop()},{}],CustomEndLayer:[function(e,t,n){"use strict";cc._RF.push(t,"53db0uWChlEw4JK6kKds1wc","CustomEndLayer"),cc.Class({extends:cc.Component,properties:{isCanClick:null},onDestroy:function(){this.isCanClick=null},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addEvent:function(){var e=this.node.getChildByName("actionnode");e.getChildByName("nextbtn").on(cc.Node.EventType.TOUCH_END,this.clickNextBtn,this),e.getChildByName("watchbtn").on(cc.Node.EventType.TOUCH_END,this.clickWatchBtn,this)},removeEvent:function(){var e=this.node.getChildByName("actionnode");e.getChildByName("nextbtn").off(cc.Node.EventType.TOUCH_END,this.clickNextBtn,this),e.getChildByName("watchbtn").off(cc.Node.EventType.TOUCH_END,this.clickWatchBtn,this)},initialize:function(){this.isCanClick=!1,this.addEvent(),this.runEnterAction();var e=this.node.getChildByName("actionnode");e.getChildByName("lvword").getComponent("GameArtWord").setString(""+fightControl.curLevel);var t=fightControl.endGetGem(fightControl.curLevel);if(e.getChildByName("gemnum").getComponent(cc.Label).string="x"+t,e.getChildByName("watchbtn").getChildByName("txt").getComponent(cc.Label).string=getLanguageDic(1016)+" x"+getGlobleDic(24),t<=0?this.refreshBtn():heroData.addGem(t),gaLogEvent.logByDate("关卡成功",fightControl.curLevel),gameSDK.logEvent("guankachenggong",fightControl.curLevel,{guankachenggong:"guankachenggong"}),heroData.dailyTaskData.addTaskPro(dailyTaskTypeEm.passLevel),heroData.dailyTaskData.addTaskPro(dailyTaskTypeEm.getSort,fightControl.addScore),fightControl.addScore=0,heroData.achievementData.addProgress(achievementTypeEm.passLevel,fightControl.curLevel),heroData.achievementData.addProgress(achievementTypeEm.maxScore,fightControl.curScore),fightControl.curScore>heroData.bestScore){heroData.bestScore=fightControl.curScore;gameSDK.leaderboard.setScoreAsync(fbRankName,heroData.bestScore,null,function(){gameRankData.async_getRankData(rankTypeEm.friendRank,null,1),gameRankData.async_getRankData(rankTypeEm.globalRank,null,1)})}heroData.totalScore=fightControl.curScore,heroData.curLevel=fightControl.curLevel,heroData.saveData(),fightControl.curLevel>2&&fightControl.curLevel%2>0&&gameSDK.sendToFBBestScore(fightControl.curScore)},refreshBtn:function(){var e=this.node.getChildByName("actionnode");e.getChildByName("watchbtn").active=!1,e.getChildByName("nextbtn").x=0},runEnterAction:function(){var e=this.node.getChildByName("actionnode");e.scale=.5;var t=this;e.runAction(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.1,.9),cc.scaleTo(.1,1),cc.callFunc(function(){t.isCanClick=!0})))},clickNextBtn:function(){1==this.isCanClick&&(engine.eventM.emit(event_id.GOTO_NEXT_CUSTOM),this.destroyClass());if(typeof gdsdk!=='undefined'&&typeof gdsdk.showAd!=='undefined'){gdsdk.showAd()}},clickWatchBtn:function(){if(1===openModuleValue.forFBCheck||1==openModuleValue.noAD)this.successFun();else{var e=videoAdKeyList[parseInt(Math.random()*videoAdKeyList.length)];gameSDK.faceBookAdvertisement.showRewardVideoAd(e,this.successFun.bind(this))}},successFun:function(){gaLogEvent.logByDate("关卡使用5倍钻石广告",fightControl.curLevel),fightControl.isWatch=!0,this.refreshBtn();var e=fightControl.endGetGem(fightControl.curLevel);e*=getGlobleDic(24),heroData.addGem(e),heroData.saveData();var t=[];t.push(getItemConfig(itemIDConfig.gem,e)),sceneControl.showReward(t)}}),cc._RF.pop()},{}],Engine:[function(e,t,n){"use strict";cc._RF.push(t,"84b90avxNxAm75UmT9aocNk","Engine");var i=e("GameEventManager"),a=e("GameMemoryManagement"),o=e("GameCPUManagement"),r=e("GameData"),s=e("GameTime"),c=e("GameSound"),l=e("CacheData"),h=e("GameAdapterInfo");window.initEngine=function(){null==window.engine&&(window.engine=new d,engine.initialize())};var d=cc.Class({properties:{eventM:null,memory:null,CPUM:null,gameData:null,gameTime:null,gameSound:null,cacheData:null,gameAdapterInfo:null},initialize:function(){window.ccLog=function(){if(1!=cc.sys.isMobile){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0;i<t.length;i++)console.log(t[i])}},ccLog("引擎版本"+gameVersions),this.eventM=new i,this.eventM.initialize(),this.memory=new a,this.memory.initialize(),this.CPUM=new o,this.CPUM.initialize(),this.gameData=new r,this.gameData.initialize(),this.gameTime=new s,this.gameTime.initialize(),this.cacheData=new l,this.cacheData.initialize(),this.gameSound=new c,this.gameSound.initialize(),this.gameAdapterInfo=new h,this.gameAdapterInfo.initialize()}});cc._RF.pop()},{CacheData:"CacheData",GameAdapterInfo:"GameAdapterInfo",GameCPUManagement:"GameCPUManagement",GameData:"GameData",GameEventManager:"GameEventManager",GameMemoryManagement:"GameMemoryManagement",GameSound:"GameSound",GameTime:"GameTime"}],FaceBookAdvertisement:[function(e,t,n){"use strict";cc._RF.push(t,"26c3azCp7tM4pYniOjw9k6f","FaceBookAdvertisement");cc.Class({extends:cc.Component,properties:{hasRemoveAD:null,isLoadInterstitialAD:null,loadedInterstitialAD:null,loadInterstitialADOne:null,errorLoadInterstitialCount:null,interstitialKeyArr:null},initialize:function(){1!=this.isInit&&(this.isInit=!0,this.isLoadInterstitialAD=!1,this.loadInterstitialADOne=!1,this.errorLoadInterstitialCount=0,this.interstitialKeyArr=[],interstitialAdKeyList.length>0&&this.loadInterstitial())},loadInterstitial:function(){ccLog("进入插屏加载"),1!=this.hasRemoveAD&&1!=this.isLoadInterstitialAD&&null==this.loadedInterstitialAD&&(this.errorLoadInterstitialCount>=3?1==this.loadInterstitialADOne&&(this.loadInterstitialADOne=!1,this.preLoadInterstitialAD()):(this.loadInterstitialADOne=!1,this.preLoadInterstitialAD()))},preLoadInterstitialAD:function(){switch(gameSDKName){case faceBookSDK:this.isLoadInterstitialAD=!0,this.interstitialKeyArr.length<=0&&(this.interstitialKeyArr=interstitialAdKeyList.slice(),this.interstitialKeyArr.sort(function(e,t){return Math.random()-.5}));var e,t=this.interstitialKeyArr.shift(),n=this;FBInstant.getInterstitialAdAsync(t).then(function(n){return ccLog("加载插屏广告"+t),(e=n).loadAsync()}).then(function(){ccLog("加载插屏广告加载成功"),n.loadedInterstitialAD=e,n.isLoadInterstitialAD=!1}).catch(function(e){n.isLoadInterstitialAD=!1,n.errorLoadInterstitialCount++,ccLog("加载插屏广告加载失败"+e.message),ccLog(e.code),setTimeout(function(){n.loadInterstitial()},2e4)});break;case faceBookSDKTest:}},showInterstitialAD:function(e,t){if(this.hasRemoveAD)null!=e&&e();else switch(gameSDKName){case faceBookSDK:var n=this;n.loadInterstitialADOne=!0,null!=n.loadedInterstitialAD?n.loadedInterstitialAD.showAsync().then(function(){ccLog("InterstitialAd广告显示成功"),null!=e&&e(),n.loadedInterstitialAD=null,setTimeout(function(){n.loadInterstitial()},1e4)}).catch(function(e){n.loadedInterstitialAD=null,n.errorLoadInterstitialCount++,ccLog("加载插屏广告加载失败"+e.message),ccLog(e.code),null!=t&&t(),setTimeout(function(){n.loadInterstitial()},2e4)}):(ccLog("插屏广告尚未加载完成"),null!=t&&t());break;case faceBookSDKTest:ccLog("播放插屏"),null!=e&&e()}},showRewardVideoAd:function(e,t,n){switch(gameSDKName){case faceBookSDK:var i=null;addLoadingCircle(),FBInstant.getRewardedVideoAsync(e).then(function(e){return ccLog("RewardedVideo开始加载"),(i=e).loadAsync()}).then(function(){return ccLog("RewardedVideo加载成功回调"),i.showAsync()}).then(function(){ccLog("RewardedVideo广告显示成功"),removeLoadingCircle(),null!=t&&t()}).catch(function(e){removeLoadingCircle(),createGameSureTitleWindow(),null!=n&&n(),ccLog("RewardedVideo广告显示失败"),ccLog("加载视频广告失败"+e.message),ccLog(e.code)});break;case faceBookSDKTest:addLoadingCircle();if(typeof gdsdk!=='undefined'&&gdsdk.showAd!=='undefined'){gdsdk.showAd('rewarded').then(function(){ccLog("RewardedVideo广告显示成功"),removeLoadingCircle(),null!=t&&t()}).catch(function(e){removeLoadingCircle(),createGameSureTitleWindow(),null!=n&&n(),ccLog("RewardedVideo广告显示失败")})}else{removeLoadingCircle(),createGameSureTitleWindow(),null!=n&&n(),ccLog("RewardedVideo广告显示失败")}break}}});cc._RF.pop()},{}],FaceBookBot:[function(e,t,n){"use strict";cc._RF.push(t,"e79559qm4NC1J9ynoREshFx","FaceBookBot"),cc.Class({extends:cc.Class,properties:{getSubscribeBotCount:null},initialize:function(){this.getSubscribeBotCount=0},canSubscribeBotAsync:function(e){switch(gameSDKName){case faceBookSDKTest:null!=e&&e();break;case faceBookSDK:this.getSubscribeBotCount=this.getSubscribeBotCount+1;var t=this;FBInstant.player.getDataAsync(["bot"]).then(function(n){ccLog("获取到的data:"),ccLog(n);var i=engine.gameTime.getDayToString();null!=n&&null!=n.bot&&n.bot==i||(ccLog("调用canSubscribeBotAsync。"),FBInstant.player.canSubscribeBotAsync().then(function(t){ccLog("调用canSubscribeBotAsync成功。"),ccLog(t),1==t?(gameSDK.logEvent("canSubscribe",1,{canSubscribe:"canSubscribe"}),null!=e&&e()):gameSDK.logEvent("yijingxuanzedingyue",1,{yijingxuanzedingyue:"yijingxuanzedingyue"})}).catch(function(n){ccLog("调用msg失败:"+n.code+":"+n.message),1==gameSDK.sdkPlayInfo.isNewPlayer?(gameSDK.logEvent("aotuopen_toofast",1,{aotuopen_toofast:"aotuopen_toofast"}),t.getSubscribeBotCount<4?setTimeout(function(){t.canSubscribeBotAsync(e)},100):gameSDK.logEvent("try3fail",1,{try3fail:"try3fail"})):gameSDK.logEvent("yijingxuanzedingyue",1,{yijingxuanzedingyue:"yijingxuanzedingyue"})}))})}},subscribeBotAsync:function(e,t){var n=this;switch(gameSDKName){case faceBookSDKTest:null!=e&&e();break;case faceBookSDK:ccLog("调用subscribeBotAsync。"),FBInstant.player.subscribeBotAsync().then(function(){n.canSubscribeBot=!1,gameSDK.logEvent("dingyuedakai",1,{dingyuedakai:"dingyuedakai"}),ccLog("订阅Bot。");var t=engine.gameTime.getDayToString();FBInstant.player.setDataAsync({bot:t}).then(function(){}),null!=e&&e()}).catch(function(e){n.canSubscribeBot=!1,gameSDK.logEvent("dingyueguanbi",1,{dingyueguanbi:"dingyueguanbi"}),ccLog("取消订阅Bot。");var i=engine.gameTime.getDayToString();FBInstant.player.setDataAsync({bot:i}).then(function(){}),null!=t&&t()})}},sendMessengerRobot:function(e){switch(gameSDKName){case faceBookSDKTest:null!=e&&e();break;case faceBookSDK:FBInstant.setSessionData(getBotData())}}}),cc._RF.pop()},{}],FaceBookLeaderboard:[function(e,t,n){"use strict";cc._RF.push(t,"fcc30qpaslB6JfBkzeB5Oua","FaceBookLeaderboard");cc.Class({properties:{},initialize:function(){},getPlayerEntryAsync:function(e,t,n){switch(gameSDKName){case faceBookSDK:FBInstant.getLeaderboardAsync(e).then(function(e){return e.getPlayerEntryAsync()}).then(function(e){if(ccLog("getPlayerEntryAsync获取自己排行榜成功："),ccLog(e),null!=t)if(null!=e){var n=new Object;n.playerID=e.getPlayer().getID(),n.photo=e.getPlayer().getPhoto(),n.name=e.getPlayer().getName(),n.score=e.getScore(),n.rank=e.getRank(),n.data=e.getExtraData(),t(n)}else t(e)}).catch(function(e){ccLog("获取自己排行失败。"),ccLog(e),null!=n&&n(null)});break;case faceBookSDKTest:var i=getPlayerEntryRankData(e);null!=t&&t(i)}},getfriendsList:function(e){switch(gameSDKName){case faceBookSDK:var t=this;ccLog(" 获取好友列表, 调用FBInstant.player.getConnectedPlayersAsync方法。");FBInstant.player.getConnectedPlayersAsync().then(function(n){for(var i=0;i<n.length;i++){var a=n[i],o=new Object;o.name=a.getName(),o.playerID=a.getID(),o.photo=a.getPhoto(),t.sdkPlayInfo.friendsList[o.playerID]=o,ccLog(" 获取玩家好友列表:名字"+o.name+"玩家id:"+o.playerID+" 玩家头像："+o.photo)}ccLog("FBInstant.player.getConnectedPlayersAsync回调处理完毕。"),null!=e&&e()});break;case faceBookSDKTest:setFriendsList(),null!=e&&e()}},setScoreAsync:function(e,t,n,i,a){switch(gameSDKName){case faceBookSDK:FBInstant.getLeaderboardAsync(e).then(function(i){return ccLog("添加自己排行榜:"+e),ccLog(n),i.setScoreAsync(t,n)}).then(function(e){if(null!=i)if(null!=e){var t=new Object;t.playerID=e.getPlayer().getID(),t.photo=e.getPlayer().getPhoto(),t.name=e.getPlayer().getName(),t.score=e.getScore(),t.rank=e.getRank(),t.data=e.getExtraData(),i(t)}else i(null)}).catch(function(e){ccLog("上传排行失败。"),ccLog(e),null!=a&&a(null)});break;case faceBookSDKTest:var o=getPlayerEntryRankData(e);null!=i&&i(o)}},getPlayGamePlayer:function(e,t,n,i,a){switch(gameSDKName){case faceBookSDK:var o=(new Date).getTime();ccLog("上传本地时间获取正在玩的玩家"),ccLog(t),this.setScoreAsync(e,o,t,function(t){if(ccLog("上传本地时间获取正在玩的玩家回执函数"),ccLog(t),null!=t){var a=t.rank-parseInt(n/2);a<=0&&(a=0),FBInstant.getLeaderboardAsync(e).then(function(e){return e.getEntriesAsync(n,a)}).then(function(e){ccLog("获取当前玩游戏的玩家");var t=[];if(null!=e&&e.length>0)for(var n=0;n<e.length;n++){var a=new Object;a.playerID=e[n].getPlayer().getID(),a.photo=e[n].getPlayer().getPhoto(),a.name=e[n].getPlayer().getName(),a.score=e[n].getScore(),a.rank=e[n].getRank(),a.data=e[n].getExtraData(),t.push(a)}ccLog(t),null!=i&&i(t)})}}).catch(function(e){ccLog("上传排行失败。"),ccLog(e),null!=a&&a(null)});break;case faceBookSDKTest:t=getPlayGamePlayerRankData(e);null!=i&&i(t)}},getConnectedPlayerEntriesAsync:function(e,t,n,i,a){switch(gameSDKName){case faceBookSDKTest:var o=getConnectedPlayerEntriesRankData(e);null!=i&&i(o);break;case faceBookSDK:FBInstant.getLeaderboardAsync(e).then(function(e){return e.getConnectedPlayerEntriesAsync(t,n)}).then(function(e){ccLog("getEntriesAsync获取好友排行榜成功："),ccLog(e);var t=[];if(null!=e&&e.length>0)for(var n=0;n<e.length;n++){var a=new Object;a.playerID=e[n].getPlayer().getID(),a.photo=e[n].getPlayer().getPhoto(),a.name=e[n].getPlayer().getName(),a.score=e[n].getScore(),a.rank=e[n].getRank(),a.data=e[n].getExtraData(),ccLog(a.data),t.push(a)}null!=i&&i(t)}).catch(function(e){ccLog("获取好友排行榜失败。"),ccLog(e),null!=a&&a(null)})}},getEntriesAsyncInfo:function(e,t,n,i){switch(null==i&&(i=[]),gameSDKName){case faceBookSDK:var a=t.shift();FBInstant.getLeaderboardAsync(e).then(function(e){return e.getEntriesAsync(a.count,a.beginNum)}).then(function(t){if(ccLog("getEntriesAsync获取世界排行榜"+e+"成功："),ccLog(t),null!=t&&t.length>0)for(var a=0;a<t.length;a++){var o=new Object;o.playerID=t[a].getPlayer().getID(),o.photo=t[a].getPlayer().getPhoto(),o.name=t[a].getPlayer().getName(),o.score=t[a].getScore(),o.rank=t[a].getRank(),o.data=t[a].getExtraData(),i.push(o)}null!=n&&n(i)}).catch(function(e){ccLog("获取排行榜失败."),ccLog(e)});break;case faceBookSDKTest:var o=getLocalEntriesRankData(e);null!=n&&n(o)}}});cc._RF.pop()},{}],FaceBookPayment:[function(e,t,n){"use strict";cc._RF.push(t,"750e9LtZF5BQZrQqRjzJBO+","FaceBookPayment");cc.Class({properties:{supplementPropList:null,isCanPayment:null},initialize:function(){this.supplementPropList=[],this.isCanPayment=!0},getPayList:function(){var e=this;switch(gameSDKName){case faceBookSDK:FBInstant.payments.onReady(function(){e.isCanPayment=!0,ccLog("可以发起支付"),e.checkPaymentStatus(),FBInstant.payments.getCatalogAsync().then(function(e){for(var t=0;t<e.length;t++)ccLog(e[t])})});break;case faceBookSDKTest:this.isCanPayment=!0,ccLog("可以发起支付"),this.checkPaymentStatus()}},checkPaymentStatus:function(){switch(gameSDKName){case faceBookSDKTest:getSupplementTestData(this);break;case faceBookSDK:var e=this;if(0==this.isCanPayment)return void ccLog("支付并没有准备好");FBInstant.payments.getPurchasesAsync().then(function(t){t.length>0&&(ccLog("有未消费的订单"),e.supplementPropList=t)})}},showPay:function(e,t,n,i){switch(gameSDKName){case faceBookSDKTest:if(0==this.isCanPayment)return ccLog("支付并没有准备好"),void(null!=n&&n());if(null!=t){var a=getPayTestData();t(a)}break;case faceBookSDK:if(0==this.isCanPayment)return ccLog("支付并没有准备好"),void(null!=n&&n());addLoadingCircle(),FBInstant.payments.purchaseAsync({productID:e.payid,developerPayload:e.developerPayload}).then(function(e){ccLog("购买成功,使商品生效并保存玩家信息"),removeLoadingCircle(),null!=t&&(t(e),ccLog(e))}).catch(function(e){removeLoadingCircle(),ccLog("支付失败:"),ccLog(e),"USER_INPUT"==e.code?null!=i&&i():null!=n&&n()})}},consumeFbItem:function(e){switch(gameSDKName){case faceBookSDKTest:ccLog("清除对应的消费信息:"+e);break;case faceBookSDK:FBInstant.payments.consumePurchaseAsync(e).then(function(){ccLog("商品消费掉了："+e)})}},isCanPay:function(){return 1!=gameSDK.isIOS()}});cc._RF.pop()},{}],FaceBookSDK:[function(e,t,n){"use strict";cc._RF.push(t,"ec659xRl8pEiKTOgVdCAXHm","FaceBookSDK");e("GameCustomImage");var i=e("FaceBookLeaderboard"),a=e("FaceBookUpdateAsync"),o=e("FaceBookAdvertisement"),r=e("FaceBookPayment"),s=e("FaceBookBot");window.sdkPortEm=cc.Enum({ios:"IOS",android:"ANDROID",web:"WEB",mobileWeb:"MOBILE_WEB"});cc.Class({properties:{isInit:null,sdkPlayInfo:null,sdkPort:null,isFirstStartGame:null,leaderboard:null,faceBookUpdateAsync:null,faceBookAdvertisement:null,faceBookPayment:null,faceBookBot:null},initialize:function(){1!=this.isInit&&(this.isInit=!0,this.isFirstStartGame=!0,this.sdkPlayInfo=new Object,this.sdkPlayInfo.friendsList=new Object,this.sdkPort=new Object,this.leaderboard=new i,this.leaderboard.initialize(),this.faceBookUpdateAsync=new a,this.faceBookUpdateAsync.initialize(),this.faceBookAdvertisement=new o,this.faceBookAdvertisement.initialize(),this.faceBookPayment=new r,this.faceBookPayment.initialize(),this.faceBookBot=new s,this.faceBookBot.initialize())},getLocale:function(){switch(gameSDKName){case faceBookSDK:case faceBookSDKTest:this.localeInfo="en_US"}var e={en_US:"content_en",id_ID:"content_Indonisian",vi_VN:"content_Vietnamese",hi_IN:"content_Hindi",pt_PT:"content_Portuguese",th_TH:"content_Thai"},t=e[this.localeInfo];return t||(t=e.en_US),t},isIOS:function(){return this.sdkPort==sdkPortEm.ios||cc.sys.os==cc.sys.OS_IOS},getPlayInfo:function(e){switch(gameSDKName){case faceBookSDK:ccLog("获取用户登录信息调用:FBInstant.initializeAsync函数"),this.sdkPlayInfo.playerID=FBInstant.player.getID(),this.sdkPlayInfo.photoSpriteFrameFun=function(){return null},ccLog("获取用户登录信息:FBInstant.initializeAsync回调:"+this.sdkPlayInfo.playerID),this.getUserData(e);break;case faceBookSDKTest:createTestPlayer(),this.getUserData(e)}},getUserData:function(e){switch(gameSDKName){case faceBookSDK:var t=this;this.logEvent("getDataAsync",1,{getDataAsync:"getDataAsync"}),FBInstant.player.getDataAsync(fbSaveDataKey).then(function(n){if(t.logEvent("getDataAsyncOK",1,{getDataAsyncOK:"getDataAsyncOK"}),ccLog("取到FB的数据:"),ccLog(n),null!=n){var i=0;for(var a in n)i++;0==i&&(n=null)}if(null==n)t.sdkPlayInfo.isNewPlayer=!0,e(null);else if(1==fbSaveDataKey.length)e(n[fbSaveDataKey[0]]);else{var o=new Object;for(a=0;a<fbSaveDataKey.length;a++)o[fbSaveDataKey[a]]=n[fbSaveDataKey[a]];e(o)}});break;case faceBookSDKTest:var n=null;try{var i=JSON.parse(cc.sys.localStorage.getItem(gameSaveDataKey));if(null!=i)if(1==fbSaveDataKey.length)n=i[fbSaveDataKey[0]];else{for(var a=new Object,o=0;o<fbSaveDataKey.length;o++)a[fbSaveDataKey[o]]=i[fbSaveDataKey[o]];n=a}}catch(e){}ccLog("取到缓存数据:"),ccLog(n),e(null==n?null:n)}},saveUserData:function(e,t){switch(gameSDKName){case faceBookSDK:FBInstant.player.setDataAsync(e).then(function(){ccLog("游戏存档成功！"),ccLog(e),null!=t&&t()});break;case faceBookSDKTest:try{cc.sys.localStorage.setItem(gameSaveDataKey,JSON.stringify(e))}catch(e){}null!=t&&t()}},startGame:function(e){switch(gameSDKName){case faceBookSDK:var t=this;ccLog("获取游戏isFirstStartGame属性，如果true则调用FBInstant.startGameAsync方法"+this.isFirstStartGame),1==this.isFirstStartGame?(this.isFirstStartGame=!1,FBInstant.startGameAsync().then(function(){t.sdkPlayInfo.name=FBInstant.player.getName(),t.sdkPlayInfo.photo=FBInstant.player.getPhoto(),t.sdkPlayInfo.entryPointData=FBInstant.getEntryPointData(),ccLog("FBInstant.startGameAsync回调。玩家 name="+t.sdkPlayInfo.name+"photo="+t.sdkPlayInfo.photo),t.sdkPort=FBInstant.getPlatform(),ccLog(t.sdkPort),t.faceBookPayment.getPayList(),null!=e&&e()})):null!=e&&(cc.log("callfun"),e());break;case faceBookSDKTest:1==this.isFirstStartGame?(this.faceBookPayment.getPayList(),this.isFirstStartGame=!1,null!=e&&e()):null!=e&&e()}},setLoadingProgress:function(e){switch(gameSDKName){case faceBookSDK:FBInstant.setLoadingProgress(e);break;case faceBookSDKTest:}},logEvent:function(e,t,n){switch(ccLog("打点"+e),gameSDKName){case faceBookSDK:FBInstant.logEvent(e,t,n);break;case faceBookSDKTest:}},logEventByString:function(e){ccLog("打点"+e);var t=new Object;switch(t[e]=e,gameSDKName){case faceBookSDK:FBInstant.logEvent(e,1,t);break;case faceBookSDKTest:}},goToOtherGame:function(e){switch(gameSDKName){case faceBookSDK:FBInstant.switchGameAsync(e).then(function(){ccLog("跳转其他游戏成功")}).catch(function(e){null!=e&&(ccLog("跳转其他游戏失败，失败编码为:"),ccLog(e))});break;case faceBookSDKTest:ccLog("跳转成功。")}},getMessengerRobot:function(e){switch(gameSDKName){case faceBookSDKTest:return null!=e&&e(null),null;case faceBookSDK:var t=FBInstant.getEntryPointData();return null!=e&&e(t),t}},createShortcut:function(e){switch(gameSDKName){case faceBookSDKTest:ccLog("创建桌面快捷方式。"),null!=e&&e(null);break;case faceBookSDK:ccLog("创建桌面快捷方式sdk。"),FBInstant.player.getDataAsync(["shortcut"]).then(function(t){ccLog("获取到的data:"),ccLog(t),null!=t&&null!=t.shortcut&&1==t.shortcut||FBInstant.canCreateShortcutAsync().then(function(t){ccLog("创建桌面快捷方式canCreateShortcut："+t),t&&FBInstant.createShortcutAsync().then(function(){FBInstant.player.setDataAsync({shortcut:1}).then(function(){}),ccLog("创建桌面快捷方式成功。"),null!=e&&e(null)}).catch(function(e){ccLog("创建桌面快捷方式失败。"),ccLog(e)})}).catch(function(e){ccLog("桌面快捷方式不可以创建。"),ccLog(e)})}).catch(function(e){ccLog("获取创建桌面快捷方式数据失败。"),ccLog(e)})}},sendToFBBestScore:function(e){switch(gameSDKName){case faceBookSDKTest:ccLog("提交最佳分数:"+e);break;case faceBookSDK:FBInstant.postSessionScore(e),ccLog("提交最佳分数:"+e)}}});cc._RF.pop()},{FaceBookAdvertisement:"FaceBookAdvertisement",FaceBookBot:"FaceBookBot",FaceBookLeaderboard:"FaceBookLeaderboard",FaceBookPayment:"FaceBookPayment",FaceBookUpdateAsync:"FaceBookUpdateAsync",GameCustomImage:"GameCustomImage"}],FaceBookUpdateAsync:[function(e,t,n){"use strict";cc._RF.push(t,"d9c44n9Y/5LMqW/nEZrx75d","FaceBookUpdateAsync");var i=e("GameCustomImage");cc.Class({properties:{},initialize:function(){},sendFaceBookFriend:function(e,t,n,a){switch(gameSDKName){case faceBookSDK:var o=this;ccLog("调用FBInstant.context.chooseAsync方法"),FBInstant.context.chooseAsync({filters:["NEW_CONTEXT_ONLY"]}).then(function(){ccLog("调用FBInstant.context.chooseAsync方法回调");var r=new i;r.initialize(e),r.drawCompleteFun=function(i){ccLog("好友图片加载完成，调用FBInstant.updateAsync方法，邀请好友"),FBInstant.updateAsync({action:"CUSTOM",cta:"Play",template:e.template,image:i,text:e.text,data:e.data,strategy:"LAST",notification:"PUSH"}).then(function(){null!=t&&(ccLog("邀请好友回调"),t())}).catch(function(e){o.updateAsyncError(n,a,e,"邀请好友")})}}).catch(function(e){o.updateAsyncError(n,a,e,"邀请好友")});break;case faceBookSDKTest:ccLog("邀请好友。"),null!=t&&t();var r=new i;r.initialize(e),r.drawCompleteFun=function(e){ccLog(e)}}},shareGame:function(e,t,n,a){switch(gameSDKName){case faceBookSDK:var o=this;(r=new i).initialize(e),r.drawCompleteFun=function(i){var r=new Image;r.crossOrigin="anonymous",r.src=i,r.onload=function(){FBInstant.shareAsync({intent:"SHARE",image:i,text:e.text,data:e.data}).then(function(){null!=t&&t()}).catch(function(e){o.updateAsyncError(n,a,e,"分享好友")})}};break;case faceBookSDKTest:var r;null!=t&&t(),(r=new i).initialize(e),r.drawCompleteFun=function(e){ccLog(e)}}},appointFaceBookFriendOnlyUpdateAsync:function(e,t,n,a){switch(gameSDKName){case faceBookSDK:var o=this;if(null==FBInstant.context.getID())return void(null!=a&&a());ccLog("appointFaceBookFriend方法回调"),(r=new i).initialize(e),r.drawCompleteFun=function(i){ccLog("邀请指定玩家图片加载完成，调用FBInstant.updateAsync方法"),FBInstant.updateAsync({action:"CUSTOM",cta:"Play",template:e.updateAsyncTemplate,image:i,text:e.updateAsyncText,data:e.data,strategy:"LAST",notification:"PUSH"}).then(function(){null!=t&&(ccLog("指定好友回调！"),t())}).catch(function(e){o.updateAsyncError(n,a,e,"邀请指定好友")})};break;case faceBookSDKTest:var r;null!=t&&t(),(r=new i).initialize(e),r.drawCompleteFun=function(e){var t=new Image;t.crossOrigin="anonymous",t.src=e,t.onload=function(){ccLog(e)}}}},appointFaceBookFriendAndUpdateAsync:function(e,t,n,a){var o=this;switch(gameSDKName){case faceBookSDK:ccLog("调用appointFaceBookFriend方法,邀请指定玩家id："+e.playerID),FBInstant.context.createAsync(e.playerID).then(function(){o.appointFaceBookFriendOnlyUpdateAsync(e,t,n,a)}).catch(function(e){o.updateAsyncError(n,a,e,"邀请指定好友")});break;case faceBookSDKTest:null!=t&&t();var r=new i;r.initialize(e),r.drawCompleteFun=function(e){var t=new Image;t.crossOrigin="anonymous",t.src=e,t.onload=function(){ccLog(e)}}}},updateAsyncError:function(e,t,n,i){ccLog(n),null!=n?(ccLog(i+"失败"),"USER_INPUT"==n.code?null!=e&&e():null!=t&&t()):(ccLog(i+"失败"),null!=t&&t())}});cc._RF.pop()},{GameCustomImage:"GameCustomImage"}],FacebookSDKTestData:[function(e,t,n){"use strict";cc._RF.push(t,"79b0aPyNA9GeJqL3NlzaFw+","FacebookSDKTestData"),window.fbSaveDataKey=["LinkGameBaseData002"],window.gameSaveDataKey="LinkGame002",window.fbRankName="LinkGameRank",window.videoAdKeyList=["276668990342375_279246430084631","276668990342375_279246740084600","276668990342375_279245806751360","276668990342375_279246886751252","276668990342375_279246970084577","276668990342375_279247073417900","276668990342375_279247203417887"],window.interstitialAdKeyList=["276668990342375_279247440084530","276668990342375_279247576751183","276668990342375_279247676751173","276668990342375_279247830084491","276668990342375_279247943417813"],window.createTestPlayer=function(){gameSDK.sdkPlayInfo.playerID="12342",gameSDK.sdkPlayInfo.name="WordCross",gameSDK.sdkPlayInfo.photo=cc.url.raw("resources/testhead.png"),gameSDK.sdkPlayInfo.photoSpriteFrameFun=function(){return engine.memory.getSpriteFrame(needLoadImage.mastloadimg1,"headimg")}},window.botData={},window.getBotData=function(){return null==botData&&(botData={}),botData},window.setFriendsList=function(){},window.addLoadingCircle=function(){openWindowLayer(openTypeEm.loading)},window.removeLoadingCircle=function(){Global.needSoonRemoveLoadingCircle=!0,engine.eventM.emit(event_id.CLOSE_LOADING_LAYER)},window.createGameSureTitleWindow=function(){openWindowLayer(openTypeEm.tipsLayer,{des:getLanguageDic(1010)})},window.getPlayerEntryRankData=function(e){var t=new Object;return t.rank=3,t.playerID=gameSDK.sdkPlayInfo.playerID,t.photo=gameSDK.sdkPlayInfo.photo,t.name=gameSDK.sdkPlayInfo.name,t.score=500,t},window.getPlayGamePlayerRankData=function(e){return[]},window.getConnectedPlayerEntriesRankData=function(e){for(var t=[],n=[356,13011,13012,12,33,44,7,8,9,gameSDK.sdkPlayInfo.playerID],i=[9999999999,11,13,12,14,15,6,7,9,24],a=0;a<n.length;a++){var o=new Object;o.name="asdsadasdasdasdasd"+a,n[a]==gameSDK.sdkPlayInfo.playerID&&(o.name="selfselfselfselfself"),o.playerID=n[a],o.photo=cc.url.raw("resources/headimg/bot"+a+".png"),o.rank=a+1,o.score=i[a],t.push(o)}return t},window.getLocalEntriesRankData=function(e){for(var t=[],n=[11,gameSDK.sdkPlayInfo.playerID,13012,13015,44,66,78,99,1,2],i=[9999999999,11,13,12,14,15,6,7,9,24],a=0;a<n.length;a++){var o=new Object;o.name="world"+a,o.playerID=n[a],o.photo=cc.url.raw("resources/headimg/bot"+a+".png"),o.score=i[a],o.rank=a+1,t.push(o)}return t},window.getSupplementTestData=function(e){},window.getPayTestData=function(){return{purchaseToken:"123456",productID:"9001",signedRequest:"123"}},window.getSendFriendData=function(){var e={};return e.pngData=[{url:gameSDK.sdkPlayInfo.photo,posX:46,posY:99,imgWidth:182,imgHeight:182},{url:cc.url.raw("resources/invbg.png"),posX:0,posY:0,imgWidth:750,imgHeight:380}],e.width=750,e.height=380,e.text="Come and play together",e.template="play_turn",e},window.getShareData=function(){var e={};return e.pngData=[{url:cc.url.raw("resources/share.jpg"),posX:0,posY:0,imgWidth:750,imgHeight:380}],e.width=750,e.height=380,e.text="invites you to play together",e},window.getAppointInviteData=function(e){var t={};return t.pngData=[{url:gameSDK.sdkPlayInfo.photo,posX:46,posY:99,imgWidth:182,imgHeight:182},{url:cc.url.raw("resources/invbg.png"),posX:0,posY:0,imgWidth:750,imgHeight:380}],t.fontData=[],t.width=750,t.height=380,t.playerID=e,t.updateAsyncTemplate="play_turn",t.updateAsyncText="Your friend is challenging you",t.data=new Object,t.data.id=gameSDK.sdkPlayInfo.id,t.data.photo=gameSDK.sdkPlayInfo.photo,t.data.name=gameSDK.sdkPlayInfo.name,t.data.score=heroData.bestScore,t},window.randomNameArr=["Max Julia","Nathan Anthony","Asa Webb","Phil Harrison","Diana Hoyle","Gloria Nelly","Rodney Warner","Eunice Peggy","Henry Katrine","Oscar Anderson","Glenn Cocker","Kerr Reade","Lindsay Gill,","Vito Hobbes","Andy Hugh","Elroy MacAdam","Ternence Emma","Ruth Harrington","Sam Carmen","Yvette Spenser","Joy Eve","Erin Christ","Omar Maxwell","Devin Theresa","Godfery Collins","Edwiin Becky","Christopher Pop","Aldrich White","June Margery","Dominic Larkin","Jason Carllyle","Armand Flower","Ian Hughes","Rex Burke","Crystal Peg","Quintina Petty","Myron Yule","Kay Noel","Linda Felix","Abel Smith","Irene Fast","Ruth Nell","Wade Kit","Ivy Grant","Tom Pope","Sibyl Rhodes","Noel Lawrence","Charles Edward","Kirk Finn","Ophelia Peter","Candice Wild","Bblythe Eveline","Mary Philemon","Grace Beerbohm","Brian Rayleign","Oscar Mark","Will Carroll","Cora Garcia","Truman Kennedy","Maurice Fanny","Booth Birrell","Eve DuBois","Edwina Theresa","Marsh Roland","Salome Malan","Ryan Ellis","Morgan Chris","Byron Tracy","Eric Bertie","Hazel Evan","Chad Ferguson","Dolores Adolph","Ira Bell","Basil Moses","Eartha Lawson","Lucien Harper","Ivan Bulwer","Gloria Jim","Anna Aldridge","Wilbur Dunlop","Yale Bob","Roberta Dewar","Jo Bruce","Simon Wallace","Abel Christy","Otis Copper","Elva Sheridan","Edison Horatio","Christian Coco","Betty Pater","Janet Beaufort","Norma Matthew","Payne Anto","Bertram Dewey","Vera Ingersoll","Vincent Holmes","Jamie Lucy","Aaron Ramsden","Buck Daisy","Howar Louisa","Yvonne Wallis","Nathan Oliver","Ada Clara","Caesar Henry","Cynthia Noyes","Nathaniel Leo","Griffith Marcus","Tabitha Pulit","Chad Hewlett","Patricia Yerkes","Jennifer Nahum","Alston Sophia","Brian Martin","Leif Hamilton","Mike Conrad","Coral Gus","Matthew Isaac","Broderick Joe","Harold Cover","Orville McCar","Lena Giles","Giles Anna","Sophia Joyce","Clare Carpenter","Tab Yeates","Jacqueline Cra","Alvin MacArthur","Alvis Garcia","Omar Salome","Maud Ferguson","Eudora Cotton","Lennon Dickens","Robin Toby","Zora Buck","Tony Camilla","Hedy Wordsworth","Lesley Morgan","Devin Maud","Isidore Palmer","Benson Scripps","Phil Webster","Hyman Pearson","Magee","Hilary Martha","Grace Noah","Arm Ernest","Wendell Abraham","Adair Acheson","Betsy Larkin","Marshall Walton","Rex Bertha","Nicole Harrod","Arm Elinor","Audrey Swin","Elvira Tommy","Roxanne Eveline","Newman Bess","Dominic Wood","Nat Anderson","Nelly James","Gabriel Grote","Joseph Darwin","Gloria Joan","Hubery Conan","Tyrone Marion","Sabina Dickey","Emma Ernest","Avery Raglan","Maxine Sharp","Sarah Felix","Alfred Isabel","Wright Gall","Evange Lucius","Burnell Gal","Zoe Kennedy","Gwend Oliver","Alexia Ted","Blanche Chaplin","Aries Bell","Dolores Lincoln","Ulysses Guy","Barnett Nick","Yale Julian","Wade Peter","Benjamin Donne","Miranda Douglas","Jim Marshall","Richard Van","Saxon Leopold","Ralap Milton","Dave Surrey","Emily Barney","Thomas Christ","Cliff Thoreau","Jenny Quiller","Marina Aldridge","Augus Abe","Quinn Irving","Alice Zacharias","Winifred Troll","There Euphemia","Mandy Spring","Ida Dewar","Geoffrey Parker","Zenobia Gunther","Raymond Carroll","Jill Wilde","Jacqueline Hugh","Edwiin Eisen","Lucien Henri","Ingrid Patience","Victor Wilhel","Marvin Jennings","Teresa Maria","Faithe Rob","Cherry Morrison","Sandy Wagner"],cc._RF.pop()},{}],FightControl:[function(e,t,n){"use strict";cc._RF.push(t,"45823m7O9hEarxbDk9DYGg6","FightControl"),window.lastTargetID=null,window.lastSurpassID=null;var i=e("MapData");cc.Class({properties:{mapData:null,gridPos1:null,gridPos2:null,lastStepArr:null,curLevel:null,maxTime:null,curTime:null,itemObj:null,curScore:null,surpassInfo:null,mapConfig:null,curLvDicID:null,isHaveParachute:null,targetNum:null,lastSurpass:null,targetScore:null,addScoreParachute:null,curResurgence:null,lastGrade:null,lastLevelArr:null,isWatch:null,curCustomTimes:null,addScore:null},initialize:function(e){if(this.curResurgence=0,this.targetScore=0,this.addScore=0,this.mapData=new i,this.mapData.initialize(),null==e?(this.lastLevelArr=[],this.curLevel=parseInt(heroData.curLevel)+1,openModuleValue.chooseLv>0&&(this.curLevel=parseInt(openModuleValue.chooseLv),heroData.totalScore=GameTool.getRandomInt(800*this.curLevel,1200*this.curLevel)),this.targetNum=0,this.initItemObj(),this.curScore=heroData.totalScore,1==isHaveNewbie?(gaLogEvent.logByDate("进入关卡",this.curLevel),gameSDK.logEvent("jinruguanka",this.curLevel,{jinruguanka:"jinruguanka"}),this.curLvDicID=getGlobleDic(26),this.lastLevelArr=[this.curLvDicID],this.mapConfig="0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|15|0|31|36|0|15|0|19|14|32|0|0|12|29|29|0|15|31|0|0|36|32|0|0|0|0|16|21|0|0|0|0|0|0|31|16|0|0|0|0|0|15|21|21|16|0|0|22|14|19|12|31|32|32|22|0|0|16|0|0|21|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0"):(this.getRandomLevel(),this.mapConfig=getDicData(dataJson.level_json,this.curLvDicID,"content")),this.getCustomTargetScore(),this.maxTime=this.getTotalTime(),this.curTime=this.maxTime,this.isHaveParachute=!1,this.addScoreParachute=!1,this.lastGrade=heroData.gradeData.getCurGradeByScore(),this.getTargetInfo()):(this.lastSurpass=e.lastSurpass,this.targetNum=e.targetNum,this.curLevel=e.curLevel,this.maxTime=e.maxTime,this.curTime=e.curTime,this.itemObj=e.itemObj,this.curScore=e.curScore,this.surpassInfo=e.surpassInfo,this.mapConfig=e.mapConfig,this.curLvDicID=e.curLvDicID,this.lastLevelArr=[this.curLvDicID],this.isHaveParachute=e.isHaveParachute,this.addScoreParachute=e.addScoreParachute,this.targetScore=e.targetScore,this.curResurgence=e.curResurgence,this.lastGrade=e.lastGrade,null==this.lastGrade&&(this.lastGrade=heroData.gradeData.getCurGradeByScore())),this.curCustomTimes=1,this.gridPos1=null,this.gridPos2=null,this.lastStepArr=[],this.isWatch=!1,1==openModuleValue.appointLevel&&(this.mapConfig="0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|1|0|0|0|0|0|0|0|-1|-1|0|0|0|0|0|0|0|0|0|0|0|0|0|-1|0|1|-1|0|0|0|0|0|0|0|0|0|0|0|0|1|0|1|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0"),this.mapData.refreshMapByConfig(this.mapConfig),1!=openModuleValue.appointLevel&&null==e&&0==isHaveNewbie){var t=this.createElement();this.rearrangement(t)}1==openModuleValue.quickDead&&(this.targetScore=9999999999)},fightAddScore:function(e){this.addScore+=e,this.curScore+=e},getCustomTargetScore:function(){var e=getDicData(dataJson.levelscore_json,this.curLevel);null==e?this.targetScore+=getGlobleDic(32):this.targetScore=e.score},getTargetInfo:function(){if(this.lastSurpass=this.surpassInfo,this.surpassInfo=null,1!=isHaveNewbie){this.surpassInfo=this.getRandomPlayerInfo(lastTargetID);var e=heroData.totalScore;switch(null!=this.lastSurpass&&(e=this.lastSurpass.score),this.targetNum){case 0:this.surpassInfo.score=e+GameTool.getRandomInt(200,400);break;case 1:this.surpassInfo.score=e+GameTool.getRandomInt(300,600);break;default:this.surpassInfo.score=e+GameTool.getRandomInt(800,1600)}lastTargetID=this.surpassInfo.playerID,this.targetNum++}},getSurpassInfo:function(){var e=null;null!=this.surpassInfo&&(e=this.surpassInfo.playerID);var t=this.getRandomPlayerInfo(lastSurpassID,e);return t.score=fightControl.curScore-GameTool.getRandomInt(10,fightControl.curScore-50),lastSurpassID=t.playerID,t},getRandomPlayerInfo:function(e,t){for(var n={},i=[],a=gameRankData.friendRankData,o=0;o<a.length;o++){(s=a[o].playerID)!=e&&s!=t&&s!=gameSDK.sdkPlayInfo.playerID&&i.push(a[o])}if(i.length<=0){var r=gameRankData.globalRankData;for(o=0;o<r.length;o++){var s;(s=r[o].playerID)!=e&&s!=t&&s!=gameSDK.sdkPlayInfo.playerID&&i.push(r[o])}}if(i.length<=0){for(o=0;o<10;o++)o!=e&&o!=t&&i.push(o);var c=i[GameTool.getRandomInt(0,i.length-1)],l={};l.playerID=c,l.photo=cc.url.raw("resources/headimg/bot"+c+".png"),l.name=randomNameArr[c],n=l}else{var h=i[GameTool.getRandomInt(0,i.length-1)];n.playerID=h.playerID,n.photo=h.photo,n.name=h.name}return n},getGameConfig:function(){var e={};return e.lastSurpass=this.lastSurpass,e.curLevel=this.curLevel,e.targetNum=this.targetNum,e.maxTime=this.maxTime,e.curTime=this.curTime,e.itemObj=this.itemObj,e.curScore=this.curScore,e.surpassInfo=this.surpassInfo,e.mapConfig=this.mapData.getMapConfig(),e.curLvDicID=this.curLvDicID,e.isHaveParachute=this.isHaveParachute,e.targetScore=this.targetScore,e.addScoreParachute=this.addScoreParachute,e.curResurgence=this.curResurgence,e.lastGrade=this.lastGrade,e},gotoNextLevel:function(){this.isHaveParachute=!1,this.curLevel=parseInt(heroData.curLevel)+1,this.curCustomTimes++,this.gridPos1=null,this.gridPos2=null,this.lastStepArr=[],this.getRandomLevel(),this.maxTime=this.getTotalTime(),this.curTime=this.maxTime,this.mapConfig=getDicData(dataJson.level_json,this.curLvDicID,"content"),this.getCustomTargetScore(),this.mapData.refreshMapByConfig(this.mapConfig);var e=this.createElement();this.rearrangement(e)},resurgenceData:function(){this.isHaveParachute=!1,this.gridPos1=null,this.gridPos2=null,this.lastStepArr=[],this.curTime=this.maxTime,this.mapData.refreshMapByConfig(this.mapConfig);var e=this.createElement();this.rearrangement(e)},getTotalTime:function(){return getDicData(dataJson.level_json,this.curLvDicID,"time")},getStarsNum:function(){for(var e=getDicData(dataJson.level_json,this.curLvDicID),t=1;t<=3;t++)if(this.curTime<e["star"+t])return t-1;return 3},getStarScore:function(){var e=0;switch(this.getStarsNum()){case 0:break;case 1:e+=getGlobleDic(29);break;case 2:e+=getGlobleDic(30);break;case 3:e+=getGlobleDic(31)}return e},getOneStarScore:function(e){var t=0;switch(e){case 1:t=getGlobleDic(29);break;case 2:t+=getGlobleDic(30)-getGlobleDic(29);break;case 3:t+=getGlobleDic(31)-getGlobleDic(30)}return t},getComboTotalScore:function(e){return Math.ceil(e*(6+3*(e-1))/2)},initItemObj:function(){this.itemObj={};for(var e=getGlobleDic(15).split(","),t=0;t<e.length;t++){var n=e[t].split("|");this.itemObj[parseInt(n[0])]=parseInt(n[1])}},getRandomLevel:function(){gaLogEvent.logByDate("进入关卡",this.curLevel),gameSDK.logEvent("jinruguanka",this.curLevel,{jinruguanka:"jinruguanka"}),this.curLevel>300?this.curLvDicID=GameTool.getRandomInt(290,300):this.curLvDicID=this.curLevel},createElement:function(){var e=this.mapData.remainGrid/2,t=[];if(this.curLevel>=getGlobleDic(3))for(var n=[itemIDConfig.addTime,itemIDConfig.bomb,itemIDConfig.resort,itemIDConfig.tips],i=GameTool.getRandomInt(0,getGlobleDic(10)),a=0;a<i;a++){var o=GameTool.getRandomInt(0,n.length-1);t.push(n[o])}var r=[];for(a=0;a<getGlobleDic(6);a++)r.push(a+1);var s=getDicData(dataJson.level_json,this.curLvDicID);r.sort(function(){return Math.random()-.5}),r=r.slice(0,s.maxelement-t.length),t=t.concat(r);var c=s.sameelement-1,l=[];for(a=0;a<c;a++){var h=r.slice(0);l=l.concat(h)}var d=e-t.length,u=d-l.length;if(u>0)for(a=0;a<u;a++)l.push(l[0]);l.sort(function(){return Math.random()-.5});for(a=0;a<d;a++)t.push(l[a]);t.length>e&&(cc.error("这关有问题，格子数量超了"+this.curLvDicID),t=t.slice(0,e));var g=t.slice(0);return t=t.concat(g)},rearrangement:function(e){var t=!1,n=this.mapData.getHaveArr();if(null==e||e.length<n.length){t=!0,e=[];for(var i=0;i<n.length;i++){(o={}).gridID=n[i].gridID,o.otherType=n[i].otherType,e.push(o)}}for(var a=0;;){if(11==++a){n=this.mapData.getHaveArr(!0),t=!0,e=[];for(i=0;i<n.length;i++){var o;(o={}).gridID=n[i].gridID,o.otherType=n[i].otherType,e.push(o)}}if(e.sort(function(){return Math.random()-.5}),1==t)for(i=0;i<n.length;i++)n[i].refreshGridID(e[i].gridID),n[i].refreshGridOther(e[i].otherType);else for(i=0;i<n.length;i++)n[i].refreshGridID(e[i]);if(this.getHaveCanDeleteWay().length>1)return void ccLog("....随机排列了几次...."+a+"  这个关卡..."+this.curLvDicID);if(a>=100)return void ccLog(".......排了100次都没找到能用的,这个关卡..."+this.curLvDicID)}},addItem:function(e,t){null==t&&(t=1),null==this.itemObj[e]&&(this.itemObj[e]=0),this.itemObj[e]+=t},getItemNum:function(e){var t=0;return t+=heroData.getItemNum(e),null!=this.itemObj[e]&&(t+=this.itemObj[e]),t},useItem:function(e){null!=this.itemObj[e]&&this.itemObj[e]>0?this.itemObj[e]--:(heroData.addItemNum(e,-1),heroData.saveData())},deleteGrid:function(e){if(null!=e)this.mapData.deleteGrid(e);else{var t={};if(null!=this.gridPos1){t.pos1=this.gridPos1;var n=this.mapData.getGridDataByPos(this.gridPos1);null!=n&&(t.gridID1=n.gridID)}if(null!=this.gridPos2){t.pos2=this.gridPos2;var i=this.mapData.getGridDataByPos(this.gridPos2);null!=i&&(t.gridID2=i.gridID)}this.lastStepArr.push(t),this.mapData.deleteGrid(this.gridPos1),this.mapData.deleteGrid(this.gridPos2),this.gridPos1=null,this.gridPos2=null}},rollback:function(){var e=[];if(this.lastStepArr.length<=0)return e;var t=this.lastStepArr.pop();return null!=t.pos1&&null!=t.gridID1&&(this.mapData.remainGrid++,this.mapData.getGridDataByPos(t.pos1).refreshGridID(t.gridID1),e.push(t.pos1)),null!=t.pos2&&null!=t.gridID2&&(this.mapData.remainGrid++,this.mapData.getGridDataByPos(t.pos2).refreshGridID(t.gridID2),e.push(t.pos2)),e},changeChoose:function(e){var t=this.gridPos1;return this.gridPos1=e,this.gridPos2=null,t},getHaveCanDeleteWay:function(){for(var e=this.mapData.gridArr,t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++){var i=e[t][n];if(0!=i.isUsable()){var a=this.findCanLinkWay(i.gridPos);if(a.length>1)return a}}return[]},findCanLinkWay:function(e){var t=[e],n=this.mapData.getGridDataByPos(e),i=this.getGridThroughArr(e),a=this.isHaveSame(i,e);if(null!=a)t.push(a);else{for(var o=!1,r=[],s=0;s<i.length;s++)if(0!=this.isEmptyByPos(i[s])){for(var c=this.getGridThroughArr(i[s]),l=0;l<c.length;l++){var h=c[l];if(1!=isSamePos(h,e)){var d=this.mapData.getGridDataByPos(h);if(null!=d){if(d.gridID==n.gridID){t.push(i[s]),t.push(h),o=!0;break}1==d.isEmpty()&&r.push({pos:h,lastPos:i[s]})}else r.push({pos:h,lastPos:i[s]})}}if(1==o)break}if(0==o)for(s=0;s<r.length;s++){c=this.getGridThroughArr(r[s].pos);var u=this.isHaveSame(c,e);if(null!=u){t.push(r[s].lastPos),t.push(r[s].pos),t.push(u);break}}}return t},isHaveSame:function(e,t){for(var n=this.mapData.getGridDataByPos(t),i=0;i<e.length;i++){var a=e[i],o=this.mapData.getGridDataByPos(a);if(null!=o&&(1!=isSamePos(a,t)&&o.gridID==n.gridID))return a}return null},isEmptyByPos:function(e){var t=this.mapData.getGridDataByPos(e);return null==t||t.isEmpty()},getChooseLinkWay:function(){return null==this.gridPos1||null==this.gridPos2?[]:this.getGridGoWay(this.gridPos1,this.gridPos2)},getGridGoWay:function(e,t){var n=[e],i=this.getGridThroughArr(e);if(1==this.wayIsPass(i,t))n.push(t);else{for(var a=!1,o=[],r=0;r<i.length;r++)if(0!=this.isEmptyByPos(i[r])){for(var s=this.getGridThroughArr(i[r]),c=0;c<s.length;c++){var l=s[c];if(1==isSamePos(l,t)){n.push(i[r]),n.push(t),a=!0;break}1==this.isEmptyByPos(l)&&o.push({pos:l,lastPos:i[r]})}if(1==a)break}if(0==a)for(r=0;r<o.length;r++){s=this.getGridThroughArr(o[r].pos);if(1==this.wayIsPass(s,t)){n.push(o[r].lastPos),n.push(o[r].pos),n.push(t);break}}}return n},wayIsPass:function(e,t){for(var n=0;n<e.length;n++)if(1==isSamePos(e[n],t))return!0;return!1},getGridThroughArr:function(e){for(var t=[],n=this.mapData,i=e.x+1;i<=n.mapWight;i++){var a={x:i,y:e.y};if(null==(o=n.getGridDataByPos(a)))t.push(a);else{if(1!=o.isEmpty()){if(1==o.isParry())break;t.push(a);break}t.push(a)}}for(i=e.x-1;i>=-1;i--){a={x:i,y:e.y};if(null==(o=n.getGridDataByPos(a)))t.push(a);else{if(1!=o.isEmpty()){if(1==o.isParry())break;t.push(a);break}t.push(a)}}for(i=e.y-1;i>=-1;i--){a={x:e.x,y:i};if(null==(o=n.getGridDataByPos(a)))t.push(a);else{if(1!=o.isEmpty()){if(1==o.isParry())break;t.push(a);break}t.push(a)}}for(i=e.y+1;i<=n.mapHeight;i++){var o;a={x:e.x,y:i};if(null==(o=n.getGridDataByPos(a)))t.push(a);else{if(1!=o.isEmpty()){if(1==o.isParry())break;t.push(a);break}t.push(a)}}return t},endGetGem:function(e){if(null!=e){var t=getGlobleDic(18)+getGlobleDic(23)*(e-1);return t>getGlobleDic(34)&&(t=getGlobleDic(34)),t}var n=getGlobleDic(18)+getGlobleDic(23)*(this.curLevel-1);return n=Math.ceil(n/2)}}),cc._RF.pop()},{MapData:"MapData"}],FightMapLayer:[function(e,t,n){"use strict";cc._RF.push(t,"c0df5uYNYlGqYU93Ua+VLLp","FightMapLayer");var i=408+6*(1.1-1)*75;window.curMapChangeTypeEm=cc.Enum({normal:0,gotoNext:1,rearrangement:2}),cc.Class({extends:cc.Component,properties:{gridNodeComArr:null,isCanClick:null,parentLayer:null,curCombo:null,lastLineTime:null,comboTime:null,tipsGrid1:null,tipsGrid2:null,curGetScore:null,isCreateCall:null,playCongratulation:null,maxComboNum:null},onDestroy:function(){this.removeDataEvent(),this.gridNodeComArr=null,this.isCanClick=null,this.parentLayer=null,this.curCombo=null,this.lastLineTime=null,this.comboTime=null,this.tipsGrid1=null,this.tipsGrid2=null,this.curGetScore=null,this.isCreateCall=null,this.playCongratulation=null,this.maxComboNum=null},destroyClass:function(){if(null!=this.gridNodeComArr)for(var e=0;e<this.gridNodeComArr.length;e++)for(var t=0;t<this.gridNodeComArr[e].length;t++)this.gridNodeComArr[e][t].destroyClass();null!=this.node&&this.node.destroy()},addDataEvent:function(){engine.eventM.on(event_id.CLOSE_NEW_ELEMENT,this.closeNewElementCall,this),engine.eventM.on(event_id.REWARD_ADD_SCORE_PARACHUTE,this.parachuteAddScore,this)},removeDataEvent:function(){engine.eventM.off(event_id.CLOSE_NEW_ELEMENT,this.closeNewElementCall,this),engine.eventM.off(event_id.REWARD_ADD_SCORE_PARACHUTE,this.parachuteAddScore,this)},initialize:function(e){this.maxComboNum=0,this.addDataEvent(),this.parentLayer=e,this.gridNodeComArr=[],this.resetCombo(),this.getComboTime();for(var t=fightControl.mapData,n=0;n<t.gridArr.length;n++){this.gridNodeComArr[n]=[];for(var a=0;a<t.gridArr[n].length;a++){var o=engine.memory.getPrefab(needLoadPrefab.grid_node_prefab);this.node.addChild(o),o.zIndex=100*n+(t.mapWight-a)+fightZIndexConfig.gridZIndex,o.x=82.5*a-292,o.y=i-82.5*n,o.scale=1.1;var r=o.addComponent("GridNode");r.initialize({x:a,y:n},this),this.gridNodeComArr[n].push(r)}}this.isCanClick=!1},runCreateAction:function(){var e=this;this.isCreateCall=!1;for(var t=function(){e.createCallFun()},n=0;n<this.gridNodeComArr.length;n++)for(var i=0;i<this.gridNodeComArr[n].length;i++)this.gridNodeComArr[n][i].createAction(t);this.parentLayer.refreshSurpassLayer()},createCallFun:function(){if(1!=this.isCreateCall){this.isCreateCall=!0,this.maxComboNum=0,this.playCongratulation=!1,this.isCanClick=!0,this.parentLayer.pause=!1,this.parentLayer.isHaveCustom=!0,this.parentLayer.resetTipsTime(),this.parentLayer.resetItemTipsTime(),this.parentLayer.resetCloudTime(),this.parentLayer.showNewbieLayer();var e=-1;for(var t in newElementConfig){var n=newElementConfig[t].lv;if(null==heroData.newElementObj[t]&&fightControl.curLevel==n){e=parseInt(t),heroData.newElementObj[t]=1,heroData.saveData();break}}1==openModuleValue.newElement&&(e=1),e>=0&&(this.isCanClick=!1,this.parentLayer.pause=!0,openWindowLayer(openTypeEm.newElement,e))}},closeNewElementCall:function(){this.isCanClick=!0,this.parentLayer.pause=!1},getGridNodeComByPos:function(e){return null==this.gridNodeComArr[e.y]||null==this.gridNodeComArr[e.y][e.x]?(ccLog(".....bug了，坐标..."+e.x+"  ,"+e.y),null):this.gridNodeComArr[e.y][e.x]},resetCombo:function(){this.curCombo=-1,this.parentLayer.playComboAction()},clickGrid:function(e){if(this.parentLayer.resetTipsTime(),this.clearTips(),null==fightControl.gridPos1)fightControl.gridPos1=e,this.getGridNodeComByPos(e).refreshChoose();else if(1==isSamePos(e,fightControl.gridPos1))fightControl.gridPos1=null,this.getGridNodeComByPos(e).refreshChoose();else{var t=fightControl.mapData.getGridDataByPos(fightControl.gridPos1),n=fightControl.mapData.getGridDataByPos(e);if(t.gridID!=n.gridID){this.resetCombo();var i=fightControl.changeChoose(e);this.getGridNodeComByPos(i).refreshChoose(),this.getGridNodeComByPos(fightControl.gridPos1).refreshChoose()}else{fightControl.gridPos2=e;var a=fightControl.getChooseLinkWay();if(a.length<=1){this.resetCombo();i=fightControl.changeChoose(e);this.getGridNodeComByPos(i).refreshChoose(),this.getGridNodeComByPos(fightControl.gridPos1).refreshChoose()}else this.getGridNodeComByPos(e).refreshChoose(),this.drawWay(a)}}},getComboTime:function(){this.comboTime=getGlobleDic(16)},getComboScore:function(){return this.curCombo*getGlobleDic(21)},getScore:function(){var e=getGlobleDic(7);return this.curCombo>0&&(e+=this.getComboScore()),e},lineChangeData:function(){this.curCombo++,this.curCombo>this.maxComboNum&&(this.maxComboNum=this.curCombo),this.curGetScore=this.getScore(),fightControl.fightAddScore(this.curGetScore);var e=fightControl.mapData.getGridDataByPos(fightControl.gridPos1);return 1==e.isItem()?(fightControl.addItem(e.gridID),this.parentLayer.refreshItemNum({index:e.gridID,isID:!0}),heroData.achievementData.addProgress(achievementTypeEm.itemGrid)):(heroData.achievementData.addProgress(achievementTypeEm.normalGrid),heroData.dailyTaskData.addTaskPro(dailyTaskTypeEm.normalGrid)),fightControl.deleteGrid(),fightControl.mapData.remainGrid<=0?(this.parentLayer.pause=!0,this.isCanClick=!1,this.lastLineTime=null,this.parentLayer.isHaveCustom=!1,curMapChangeTypeEm.gotoNext):fightControl.getHaveCanDeleteWay().length<=1?(this.parentLayer.pause=!0,this.isCanClick=!1,fightControl.rearrangement(),curMapChangeTypeEm.rearrangement):(heroData.saveData(),curMapChangeTypeEm.normal)},drawWay:function(e){this.parentLayer.resetItemTipsTime();var t=this.lineChangeData();engine.gameSound.playEffect(soundurl.cleargrid);for(var n=e.length-1,i=e[0],a=e[e.length-1],o=1;o<e.length;o++)this.addLineSpine(e[o-1],e[o],n,o,i,a,t);a.y<i.y&&(i=a),this.getGridNodeComByPos(i).changeCanClick(!1),this.getGridNodeComByPos(a).changeCanClick(!1),this.addScoreAction(i),this.parentLayer.playComboAction(),this.addComboAction(i),this.addComboGoodTxt(),1==openModuleValue.quickDead&&this.parentLayer.endGame()},addLineSpine:function(e,t,n,i,a,o,r){var s=this.getLineConfig(e,t),c=new cc.Node,l=c.addComponent(sp.Skeleton);GameTool.setSkeleton(l,needLoadSpine.lightning,"lightning",.7,!1),c.angle=s.angle,c.scaleX=s.width/150,c.x=(s.startPos.x+s.endPos.x)/2,c.y=(s.startPos.y+s.endPos.y)/2,this.node.addChild(c,fightZIndexConfig.lineZIndex);var h=this;l.setCompleteListener(function(){c.destroy(),i==n&&h.animationComplete(a,o,r)})},parachuteAddScore:function(){var e=fightControl.targetScore-fightControl.curScore;fightControl.addScoreParachute=!0,fightControl.fightAddScore(e),this.parentLayer.showTargetOK(),this.parentLayer.refreshScore(),1!=openModuleValue.isTimeOut&&this.showCongratulations(),this.addScoreAction(null,cc.v2(0,607),e)},animationComplete:function(e,t,n){this.parentLayer.refreshScore();var i=!1;fightControl.curScore>=fightControl.targetScore&&0==this.playCongratulation&&(this.parentLayer.showTargetOK(),1!=openModuleValue.isTimeOut&&(this.showCongratulations(n),i=!0)),n!=curMapChangeTypeEm.gotoNext&&this.parentLayer.refreshSurpassLayer();var a=this.getGridNodeComByPos(e),o=this.getGridNodeComByPos(t);a.isShow(!1),o.isShow(!1),a.showTipsType(!1),o.showTipsType(!1),a.changeCanClick(!0),o.changeCanClick(!0),engine.gameSound.playEffect(soundurl.bomb);var r=this,s=new cc.Node,c=s.addComponent(sp.Skeleton);GameTool.setSkeleton(c,needLoadSpine.bomb,"bomb",.8,!1),s.position=this.getPosByGrid(e),this.node.addChild(s,fightZIndexConfig.lineZIndex),c.setCompleteListener(function(){s.destroy()});var l=new cc.Node,h=l.addComponent(sp.Skeleton);GameTool.setSkeleton(h,needLoadSpine.bomb,"bomb",.8,!1),l.position=this.getPosByGrid(t),this.node.addChild(l,fightZIndexConfig.lineZIndex),h.setCompleteListener(function(){n==curMapChangeTypeEm.gotoNext?1==openModuleValue.isTimeOut?r.showCongratulations(n):0==i&&r.showStarAdd():n==curMapChangeTypeEm.rearrangement&&(r.parentLayer.pause=!1,r.isCanClick=!0,r.refreshGrid()),l.destroy()})},showStarAdd:function(){this.parentLayer.clearParachute(),this.parentLayer.clearCloud();var e=fightControl.getStarsNum();e<=0&&this.maxComboNum<1&&this.customEnd();var t=!1;this.maxComboNum<1&&(t=!0);for(var n=0;n<e;n++){var i=!1;n==e-1&&(i=!0),this.addFlyStarAction(n,i,e,t)}if(this.maxComboNum>=1){var a=fightControl.getComboTotalScore(this.maxComboNum);fightControl.fightAddScore(a),this.showComboTotalAction(a)}},customEnd:function(){this.parentLayer.resetItemTipsTime(),this.resetCombo(),this.showLvEnd()},showComboTotalAction:function(e){var t=new cc.Node;t.y=-120,this.node.addChild(t,fightZIndexConfig.scoreZIndex);var n=new cc.Node;n.x=-22,n.addComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(needLoadLanguageImage.language1,"bestcombo"),t.addChild(n);var i=new cc.Node;i.x=153,i.scale=.8;var a=i.addComponent("GameArtWord");a.indentationWidth=-26,a.fontName="fnttype9",a.styleType=ArtWordStyleType.left,a.fontSpriteAtlas=engine.memory.getSpriteAtlas(loginLoadImage.publicimg1),a.setString(""+this.maxComboNum),t.addChild(i);var o=new cc.Node;o.x=-5,o.y=-65;var r=o.addComponent("GameArtWord");r.indentationWidth=-26,r.fontName="fnttype9",r.styleType=ArtWordStyleType.middle,r.fontSpriteAtlas=engine.memory.getSpriteAtlas(loginLoadImage.publicimg1),r.setString("+"+e),t.addChild(o),t.scale=0;var s=this,c=cc.spawn(cc.moveTo(1,0,607),cc.sequence(cc.delayTime(.6),cc.fadeIn(.4)));t.runAction(cc.sequence(cc.scaleTo(.4,1.1),cc.scaleTo(.2,.9),cc.scaleTo(.2,1),cc.delayTime(1.2),c,cc.callFunc(function(){s.parentLayer.refreshScore(),s.addScoreAction(null,cc.v2(0,607),e),setTimeout(function(){s.customEnd()},800),t.destroy()})))},addFlyStarAction:function(e,t,n,i){var a=[],o=[];switch(n){case 1:a=[cc.v2(0,60)],o=[cc.v2(123,283)];break;case 2:a=[cc.v2(-200,60),cc.v2(200,60)],o=[cc.v2(-304,369),cc.v2(269,374)];break;case 3:a=[cc.v2(-200,60),cc.v2(0,60),cc.v2(200,60)],o=[cc.v2(-304,369),cc.v2(123,283),cc.v2(269,374)]}var r=this,s=new cc.Node,c=s.addComponent(sp.Skeleton);GameTool.setSkeleton(c,needLoadSpine.star,"eject",.8,!1),s.position=a[e],this.node.addChild(s,fightZIndexConfig.scoreZIndex);var l=new cc.Node,h=l.addComponent(cc.Label);h.font=engine.memory.getFont(needLoadFont.fntttf1_font);var d=l.addComponent(cc.LabelOutline);d.width=3,d.color=cc.color(202,116,20),h.string="+"+fightControl.getOneStarScore(e+1),l.y=-90,s.addChild(l),l.scale=0,l.runAction(cc.scaleTo(.2,1)),c.setCompleteListener(function(){var n=new cc.Node;n.addComponent(cc.ParticleSystem).file=engine.memory.getParticle(needLoadParticle.xingxing),r.node.addChild(n,fightZIndexConfig.scoreZIndex),n.position=s.position;var a=[n.position,o[e],cc.v2(0,607)];n.runAction(cc.sequence(cc.bezierTo(.7,a),cc.callFunc(function(){if(1==t){fightControl.fightAddScore(fightControl.getStarScore()),r.parentLayer.refreshScore();var e=fightControl.getStarScore();r.addScoreAction(null,cc.v2(0,607),e)}}),cc.delayTime(.3),cc.callFunc(function(){1==t&&r.createAddStarScore(i),n.destroy()}))),s.destroy()})},createAddStarScore:function(e){var t=this,n=new cc.Node,i=n.addComponent(sp.Skeleton);GameTool.setSkeleton(i,needLoadSpine.spread,"spread",1,!1),n.y=607,this.node.addChild(n,fightZIndexConfig.scoreZIndex),i.setCompleteListener(function(){1==e&&setTimeout(function(){t.customEnd()},200)})},showCongratulations:function(e,t){this.playCongratulation=!0,engine.gameSound.playEffect(soundurl.victory);var n=this,i=new cc.Node,a=i.addComponent(sp.Skeleton);GameTool.setSkeleton(a,needLoadSpine.congratulations,"congratulations",.5,!1),i.y=200,this.node.addChild(i,fightZIndexConfig.scoreZIndex),a.setCompleteListener(function(){setTimeout(function(){1==t?n.customEnd():e==curMapChangeTypeEm.gotoNext&&n.showStarAdd(),i.destroy()},200)})},showLvEnd:function(){gaLogEvent.logByDate("关卡结束",fightControl.curLevel),this.node.active=!1,fightControl.curScore<fightControl.targetScore&&1!=openModuleValue.isTimeOut?this.parentLayer.endGame():openWindowLayer(openTypeEm.customEnd)},addComboAction:function(e){if(this.curCombo>0){var t=this.getPosByGrid(e),n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(needLoadLanguageImage.language1,"combo"),n.x=t.x,n.x>200&&(n.x=200),n.y=t.y+60,this.node.addChild(n,fightZIndexConfig.scoreZIndex),n.runAction(cc.sequence(cc.moveBy(1,0,100),cc.removeSelf()));var i=new cc.Node,a=i.addComponent("GameArtWord");a.indentationWidth=-4,a.fontName="fnttype7",a.styleType=ArtWordStyleType.left,a.fontSpriteAtlas=engine.memory.getSpriteAtlas(loginLoadImage.publicimg1),a.setString(""+this.curCombo),i.x=n.x+86,i.y=n.y,this.node.addChild(i,fightZIndexConfig.scoreZIndex),i.runAction(cc.sequence(cc.moveBy(1,0,100),cc.removeSelf()))}},addComboGoodTxt:function(){var e=["nice","great","verygood","perfect"],t=[soundurl.combo10,soundurl.combo15,soundurl.combo20,soundurl.combo20];if(this.curCombo>0&&this.curCombo%getGlobleDic(17)==0){var n=this.curCombo/getGlobleDic(17)-1;n>=e.length&&(n=e.length-1),null!=t[n]&&engine.gameSound.playEffect(t[n]);var i=new cc.Node;this.node.addChild(i,fightZIndexConfig.scoreZIndex),i.addComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(needLoadLanguageImage.language1,e[n]),i.y=300,i.scale=0;var a=cc.spawn(cc.fadeOut(.2),cc.scaleTo(.2,.6));i.runAction(cc.sequence(cc.scaleTo(.2,1.5),cc.scaleTo(.1,.9),cc.scaleTo(.1,1),cc.delayTime(.4),a,cc.removeSelf()))}},addScoreAction:function(e,t,n){var i=new cc.Node,a=i.addComponent(cc.Label);a.string=null!=n?"+"+n:"+"+this.curGetScore,a.font=engine.memory.getFont(needLoadFont.fntttf1_font);var o=i.addComponent(cc.LabelOutline);o.width=3,o.color=cc.color(202,116,20);var r=1;if(null!=t)i.position=t,r=.8;else{var s=this.getPosByGrid(e);i.x=s.x,i.y=s.y+120}this.node.addChild(i,fightZIndexConfig.scoreZIndex),i.runAction(cc.sequence(cc.moveBy(r,0,100),cc.removeSelf()))},refreshGrid:function(){for(var e=0;e<this.gridNodeComArr.length;e++)for(var t=0;t<this.gridNodeComArr[e].length;t++)this.gridNodeComArr[e][t].refreshView(),this.gridNodeComArr[e][t].refreshGridBg(),this.gridNodeComArr[e][t].refreshQuestion(!1)},getLineConfig:function(e,t){var n={};return n.startPos=this.getPosByGrid(e),n.endPos=this.getPosByGrid(t),t.x>e.x?(n.angle=0,n.width=n.endPos.x-n.startPos.x):e.x>t.x?(n.angle=180,n.width=n.startPos.x-n.endPos.x):t.y>e.y?(n.angle=-90,n.width=n.startPos.y-n.endPos.y):(n.angle=90,n.width=n.endPos.y-n.startPos.y),n},getPosByGrid:function(e){var t=0,n=0;return t=-1==e.x?-352:e.x==fightControl.mapData.mapWight?82.5*(e.x-1)-292+60:82.5*e.x-292,n=-1==e.y?513:e.y==fightControl.mapData.mapHeight?i-82.5*(e.y-1)-53:i-82.5*e.y,cc.v2(t,n)},gridGray:function(e){for(var t=0;t<this.gridNodeComArr.length;t++)for(var n=0;n<this.gridNodeComArr[t].length;n++)this.gridNodeComArr[t][n].gridGray(e)},showLineTips:function(){var e=fightControl.getHaveCanDeleteWay();e.length>1&&(this.tipsGrid1=this.getGridNodeComByPos(e[0]),this.tipsGrid2=this.getGridNodeComByPos(e[e.length-1]),this.tipsGrid1.showTipsType(!0),this.tipsGrid2.showTipsType(!0),this.parentLayer.isHaveTips=!0)},clearTips:function(){this.parentLayer.isHaveTips=!1,null!=this.tipsGrid1&&(this.tipsGrid1.refreshChoose(),this.tipsGrid1=null),null!=this.tipsGrid2&&(this.tipsGrid2.refreshChoose(),this.tipsGrid2=null)},itemBomb:function(){var e=fightControl.getHaveCanDeleteWay();if(e.length>1){this.clearTips(),fightControl.gridPos1=e[0],fightControl.gridPos2=e[e.length-1];var t=this.getGridNodeComByPos(fightControl.gridPos1),n=this.getGridNodeComByPos(fightControl.gridPos2);t.showTipsType(!0),n.showTipsType(!0),this.drawWay(e)}},rollback:function(){for(var e=fightControl.rollback(),t=0;t<e.length;t++)this.getGridNodeComByPos(e[t]).refreshView(),this.getGridNodeComByPos(e[t]).refreshGridBg(),this.getGridNodeComByPos(e[t]).refreshQuestion(!1)}}),cc._RF.pop()},{}],FightSceneControl:[function(e,t,n){"use strict";cc._RF.push(t,"3f05d/YuU5D+pyN95dlJnhX","FightSceneControl");var i=e("GameScene"),a=e("FightControl");window.fightControl=null,cc.Class({extends:i,properties:{gameLoadUI:null,fightUILayer:null},onDestroy:function(){fightControl=null,null!=this.fightUILayer&&(this.fightUILayer.destroyClass(),this.fightUILayer=null),null!=this.gameLoadUI&&(this.gameLoadUI.destroyClass(),this.gameLoadUI=null)},onLoad:function(){this.gameLoadUI=this.node.addComponent("GameLoadUI"),this._super(),sceneControl.curSceneType=SceneType.fight},initialize:function(){this._super(),fightControl=new a,fightControl.initialize(sceneControl.transitionData),sceneControl.resetTransitionData(),openWindowLayer(openTypeEm.fightUI),engine.gameSound.playMusic(soundurl.bgMusic,!0),setTimeout(function(){sceneControl.curSceneType==SceneType.fight&&engine.CPUM.addCPUInfo([{type:CPUStyleType.loadType,data:gameFightRes(),executeOrder:CPUExecuteOrder.curUIType,timeOrder:engine.gameTime.localTime,loadErrorMaxCount:LoadErrorMaxCountConfig.UI}])},5e3)},loadComplete:function(){this._super(),null!=this.gameLoadUI&&(this.gameLoadUI.destroyClass(),this.gameLoadUI.destroy(),this.gameLoadUI=null),this.initialize()},getRes:function(){return[]},setLoadPercent:function(e){null!=this.gameLoadUI&&this.gameLoadUI.setLoadPercent(e)}}),cc._RF.pop()},{FightControl:"FightControl",GameScene:"GameScene"}],FightUILayer:[function(e,t,n){"use strict";cc._RF.push(t,"73194J3qGxDPbUYyrUSJHzF","FightUILayer");var i=e("GameExternalImage");cc.Class({extends:cc.Component,properties:{mapLayer:null,pause:null,timePro:null,itemIDArr:null,parachuteNode:null,isHaveCustom:null,actionTime:null,isHaveTips:null,newbieStep:null,newbieGridArr:null,newbieFinger:null,cloudTime:null,cloudLevel:null,cloudNode:null,isGiveTips:null,isTipsItem:null,itemTipsTime:null,curTipsItem:null,tipsAction:null},onDestroy:function(){this.removeDataEvent(),this.mapLayer=null,this.pause=null,this.timePro=null,this.itemIDArr=null,this.parachuteNode=null,this.isHaveCustom=null,this.actionTime=null,this.isHaveTips=null,this.newbieStep=null,this.newbieGridArr=null,this.newbieFinger=null,this.cloudTime=null,this.cloudLevel=null,this.cloudNode=null,this.isGiveTips=null,this.isTipsItem=null,this.itemTipsTime=null,this.curTipsItem=null,this.tipsAction=null},destroyClass:function(){this.clearParachute(),null!=this.cloudNode&&(this.cloudNode.destroy(),this.cloudNode=null),null!=this.newbieFinger&&(this.newbieFinger.destroy(),this.newbieFinger=null),null!=this.mapLayer&&(this.mapLayer.destroyClass(),this.mapLayer=null),null!=this.node&&(this.removeEvent(),this.node.destroy())},addDataEvent:function(){engine.eventM.on(event_id.REFRESH_GEM_NUMBER,this.refreshGemNum,this),engine.eventM.on(event_id.REFRESH_PAUSE,this.refreshPause,this),engine.eventM.on(event_id.RESURGENCE_REFRESH,this.resurgenceRefresh,this),engine.eventM.on(event_id.REFRESH_ITEM_NUM,this.refreshItemNum,this),engine.eventM.on(event_id.SHOW_TARGET_ACTION,this.showTarget,this),engine.eventM.on(event_id.GOTO_NEXT_CUSTOM,this.gotoNextCustom,this)},removeDataEvent:function(){engine.eventM.off(event_id.REFRESH_GEM_NUMBER,this.refreshGemNum,this),engine.eventM.off(event_id.REFRESH_PAUSE,this.refreshPause,this),engine.eventM.off(event_id.RESURGENCE_REFRESH,this.resurgenceRefresh,this),engine.eventM.off(event_id.REFRESH_ITEM_NUM,this.refreshItemNum,this),engine.eventM.off(event_id.SHOW_TARGET_ACTION,this.showTarget,this),engine.eventM.off(event_id.GOTO_NEXT_CUSTOM,this.gotoNextCustom,this)},addEvent:function(){this.node.getChildByName("pausebtn").on(cc.Node.EventType.TOUCH_END,this.clickPauseBtn,this),this.node.getChildByName("addgembtn").on(cc.Node.EventType.TOUCH_END,this.clickAddGemBtn,this);for(var e=1;e<=4;e++)this.node.getChildByName("itembtn_"+e).on(cc.Node.EventType.TOUCH_END,this.clickItemBtn,this)},removeEvent:function(){this.node.getChildByName("pausebtn").off(cc.Node.EventType.TOUCH_END,this.clickPauseBtn,this),this.node.getChildByName("addgembtn").off(cc.Node.EventType.TOUCH_END,this.clickAddGemBtn,this);for(var e=1;e<=4;e++)this.node.getChildByName("itembtn_"+e).off(cc.Node.EventType.TOUCH_END,this.clickItemBtn,this)},initialize:function(){this.isGiveTips=!1,this.actionTime=0,this.cloudTime=0,this.isHaveTips=!1,this.isHaveCustom=!1,this.isTipsItem=!1,this.itemTipsTime=0,this.newbieStep=1,this.newbieGridArr=[{x:1,y:2},{x:6,y:2}],this.cloudLevel=getGlobleDic(27),this.addEvent(),this.addDataEvent(),this.itemIDArr=[itemIDConfig.addTime,itemIDConfig.tips,itemIDConfig.bomb,itemIDConfig.resort],this.node.getChildByName("combonode").active=!1,this.node.getChildByName("custominfo").active=!1,this.node.getChildByName("newbielayer").active=!1;for(var e=1;e<=4;e++){var t=this.node.getChildByName("itembtn_"+e);t.getChildByName("img").getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(needLoadImage.mastloadimg1,"itemicon"+getDicData(dataJson.item_json,this.itemIDArr[e-1],"icon")),t.getChildByName("gem").getComponent(cc.Label).string=getDicData(dataJson.item_json,this.itemIDArr[e-1],"price"),this.refreshItemNum({index:e})}this.refreshGemNum();var n=new cc.Node;this.node.addChild(n),n.y=this.node.getChildByName("bg2").y,this.mapLayer=n.addComponent("FightMapLayer"),this.mapLayer.initialize(this),this.mapLayer.node.active=!1,this.timePro=this.node.getChildByName("pro").getComponent(cc.ProgressBar),this.pause=!0,this.refreshLv(),this.refreshScore(),this.node.getChildByName("otherplayer").active=!1,this.refreshStar(),openModuleValue.remainTime>0&&(fightControl.curTime=openModuleValue.remainTime),this.showTime();var i=this;gameSDK.startGame(function(){null==fightControl.surpassInfo||true?i.customInfoAction():openWindowLayer(openTypeEm.target)}),1==openModuleValue.isTimeOut&&(this.node.getChildByName("targetbg").active=!1,this.node.getChildByName("targettxt").active=!1,this.node.getChildByName("targetok").active=!1),this.tipsAction=this.node.getChildByName("countdown"),this.tipsAction.active=!1,1==openModuleValue.showGridNum?this.node.getChildByName("totalnum").active=!0:this.node.getChildByName("totalnum").active=!1},refreshGridTotal:function(){if(1==openModuleValue.showGridNum){var e=this.node.getChildByName("totalnum");e.getComponent(cc.Label).string=fightControl.mapData.remainGrid,fightControl.mapData.remainGrid%2>0?e.color=cc.color(247,7,45):e.color=cc.color(56,240,93);e.scale=.5,e.runAction(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.1,.9),cc.scaleTo(.1,1)))}},refreshStar:function(){for(var e=fightControl.getStarsNum(),t=1;t<=3;t++){var n=this.node.getChildByName("star_"+t);t<=e?(n.isStar=!0,n.getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.nextloadimg1,"star_1")):(n.isStar=!1,n.getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.nextloadimg1,"star_2"))}},refreshStarByTime:function(){for(var e=fightControl.getStarsNum(),t=1;t<=3;t++){var n=this.node.getChildByName("star_"+t);t<=e?0==n.isStar&&(n.isStar=!0,n.getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.nextloadimg1,"star_1")):1==n.isStar&&(n.isStar=!1,n.getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.nextloadimg1,"star_2"))}},showNewbieLayer:function(){if(1==isHaveNewbie){var e=this.node.getChildByName("newbielayer");0==e.active&&(e.active=!0,this.newbieFinger=new cc.Node,this.newbieFinger.addComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.nextloadimg1,"finger"),this.node.addChild(this.newbieFinger),this.newbieFinger.position=this.getNewbieFingerPos(this.newbieGridArr[this.newbieStep-1]),this.newbieFinger.runAction(cc.sequence(cc.moveBy(.5,0,20),cc.moveBy(.5,0,-20)).repeatForever()))}},isNewbieNeedPos:function(e){return isSamePos(e,this.newbieGridArr[this.newbieStep-1])},runNextNewbie:function(){this.newbieStep++,this.newbieStep>this.newbieGridArr.length?(this.node.getChildByName("newbielayer").active=!1,this.newbieFinger.destroy(),isHaveNewbie=!1):(this.newbieFinger.position=this.getNewbieFingerPos(this.newbieGridArr[this.newbieStep-1]),this.newbieFinger.stopAllActions(),this.newbieFinger.runAction(cc.sequence(cc.moveBy(.5,0,20),cc.moveBy(.5,0,-20)).repeatForever()))},getNewbieFingerPos:function(e){return this.getPosByGrid(e).add(cc.v2(70,67))},getPosByGrid:function(e){return this.mapLayer.getPosByGrid(e).add(this.mapLayer.node.position)},showTargetOK:function(){1!=openModuleValue.isTimeOut&&(this.node.getChildByName("targetok").active=!0)},customInfoAction:function(){this.refreshGridTotal(),this.node.getChildByName("targetok").active=!1;var e=this.node.getChildByName("custominfo");e.active=!0;var t=e.getChildByName("lvnum");t.getComponent(cc.Label).string=getLanguageDic(1031).replace("%s",fightControl.curLevel);var n=e.getChildByName("des");1==openModuleValue.isTimeOut?n.getComponent(cc.Label).string=getLanguageDic(1032).replace("%s",fightControl.maxTime):n.getComponent(cc.Label).string=getLanguageDic(1038)+" "+fightControl.targetScore,n.getChildByName("strongdes").active=!1;var i=this;t.x=-700,t.runAction(cc.sequence(cc.moveBy(.3,720,0),cc.moveBy(.2,-20,0),cc.delayTime(.5),cc.blink(.6,2),cc.callFunc(function(){e.active=!1,i.startGame()}))),n.x=700,n.runAction(cc.sequence(cc.moveBy(.3,-720,0),cc.moveBy(.2,20,0),cc.delayTime(.5),cc.blink(.6,2)))},gotoNextCustom:function(){var e=this,t=function(){fightControl.gotoNextLevel(),e.mapLayer.refreshGrid(),e.customInfoAction(),e.refreshLv(),e.showTime(),e.refreshStar()},n=1;1==isNewPlayer&&(n=2),0==fightControl.isWatch&&fightControl.curCustomTimes>=n&&1!=openModuleValue.noAD?gameSDK.faceBookAdvertisement.showInterstitialAD(t,t):t()},resurgenceRefresh:function(){if(fightControl.curResurgence++,2==fightControl.curResurgence&&1!=openModuleValue.isTimeOut){gaLogEvent.logByDate("第几次复活",fightControl.curResurgence),this.mapLayer.node.active=!0;var e=fightControl.targetScore-fightControl.curScore;fightControl.fightAddScore(e),this.showTargetOK(),this.refreshScore(),this.mapLayer.showCongratulations(curMapChangeTypeEm.gotoNext,!0),this.mapLayer.addScoreAction(null,cc.v2(0,607),e)}else this.mapLayer.refreshGrid(),this.refreshStar(),this.startGame(),this.showTime(),this.refreshScore()},endGame:function(){gaLogEvent.logByDate("关卡失败",fightControl.curLevel),gameSDK.logEvent("guankashibai",fightControl.curLevel,{guankashibai:"guankashibai"}),this.pause=!0,this.clearChoose(),this.clearCloud(),this.clearParachute(),this.mapLayer.gridGray(!0),1===openModuleValue.forFBCheck?openWindowLayer(openTypeEm.gameOver):1==openModuleValue.isTimeOut?openWindowLayer(openTypeEm.resurgence):openWindowLayer(openTypeEm.loseDetail)},showTarget:function(){var e=this.node.getChildByName("otherplayer");e.active=!0;e.scale=.4,e.runAction(cc.sequence(cc.scaleTo(.2,1.1*.8),cc.scaleTo(.1,.9*.8),cc.scaleTo(.1,.8)));var t=new i;t.loadImage(fightControl.surpassInfo.photo,null,e.getContentSize().width,e.getContentSize().height),t.name="myHead",e.addChild(t,-1),e.getChildByName("score").getComponent(cc.Label).string=fightControl.surpassInfo.score,e.getChildByName("name").getComponent(cc.Label).string=myGameGetShortName(fightControl.surpassInfo.name),this.customInfoAction()},startGame:function(){this.mapLayer.gridGray(!1),gaLogEvent.logByDate("开始关卡",1),gameSDK.logEvent("kaishiguanka",1,{kaishiguanka:"kaishiguanka"}),this.isGiveTips=!1,this.mapLayer.node.active=!0,this.mapLayer.runCreateAction(),fightControl.isWatch=!1},refreshItemNum:function(e){var t=e.index;1==e.isID&&(t=arrIsContain(this.itemIDArr,e.index)+1);var n=this.node.getChildByName("itembtn_"+t),i=this.itemIDArr[t-1],a=fightControl.getItemNum(i),o=n.getChildByName("gemimg"),r=n.getChildByName("gem"),s=n.getChildByName("number");a<=0?(s.active=!1,o.active=!0,r.active=!0):(s.active=!0,o.active=!1,r.active=!1,s.getComponent(cc.Label).string="x"+a)},refreshGemNum:function(){this.node.getChildByName("gemword").getComponent("GameArtWord").setString(""+heroData.diamond)},refreshPause:function(e){this.pause=e},refreshLv:function(){this.node.getChildByName("lvword").getComponent("GameArtWord").setString(""+fightControl.curLevel),this.node.getChildByName("targettxt").getComponent(cc.Label).string=getLanguageDic(1038)+fightControl.targetScore;for(var e=getDicData(dataJson.level_json,fightControl.curLvDicID),t=this.node.getChildByName("pro"),n=1;n<=3;n++){var i=this.node.getChildByName("star_"+n),a=e["star"+n]/e.time;i.x=t.x+t.width*a}},refreshScore:function(){this.node.getChildByName("score").getComponent("GameArtWord").setString(""+fightControl.curScore),this.showAddScore()},refreshSurpassLayer:function(){if(null!=fightControl.surpassInfo&&fightControl.curScore>fightControl.surpassInfo.score){heroData.dailyTaskData.addTaskPro(dailyTaskTypeEm.surpass),heroData.achievementData.addProgress(achievementTypeEm.surpass),fightControl.getTargetInfo();var e=this.node.getChildByName("otherplayer");e.stopAllActions(),e.runAction(cc.sequence(cc.moveBy(.3,300,0),cc.callFunc(function(){var t=new i,n=e.getChildByName("myHead");null!=n&&n.destroy(),t.loadImage(fightControl.surpassInfo.photo,null,e.getContentSize().width,e.getContentSize().height),t.name="myHead",e.addChild(t,-1),e.getChildByName("score").getComponent(cc.Label).string=fightControl.surpassInfo.score,e.getChildByName("name").getComponent(cc.Label).string=myGameGetShortName(fightControl.surpassInfo.name)}),cc.moveBy(.3,-300,0),cc.scaleTo(.2,1.04),cc.scaleTo(.2,.8)))}},showAddScore:function(){this.node.getChildByName("score").runAction(cc.sequence(cc.scaleTo(.15,1.5),cc.scaleTo(.15,1)))},refreshTime:function(e){if(1!=isHaveNewbie){if(0!=this.pause)return null!=this.cloudNode&&0==this.cloudNode.isPauseAction&&(this.cloudNode.pauseAllActions(),this.cloudNode.isPauseAction=!0),void(this.tipsAction.getComponent(sp.Skeleton).paused=!0);this.tipsAction.getComponent(sp.Skeleton).paused=!1,null!=this.cloudNode&&1==this.cloudNode.isPauseAction&&(this.cloudNode.resumeAllActions(),this.cloudNode.isPauseAction=!1),fightControl.curTime-=e,1==openModuleValue.isTimeOut&&(fightControl.curTime<=10?this.tipsAction.active=!0:this.tipsAction.active=!1),fightControl.curLevel>=this.cloudLevel&&(this.cloudTime+=e,this.cloudTime>=getGlobleDic(28)&&this.showCloud()),0==this.isHaveTips&&(this.actionTime+=e,this.refreshTipsTime()),1==this.isGiveTips&&0==this.isTipsItem&&(this.itemTipsTime+=e,this.showItemTipsAction()),fightControl.curTime<=0&&(fightControl.curTime=0,1==openModuleValue.isTimeOut&&(this.tipsAction.active=!1,this.endGame())),this.refreshStarByTime(),this.showTime(),this.isShowParachute()}},showItemTipsAction:function(){if(this.itemTipsTime>=getGlobleDic(33)){this.itemTipsTime=0,this.isTipsItem=!0,this.itemIDArr=[itemIDConfig.addTime,itemIDConfig.tips,itemIDConfig.bomb,itemIDConfig.resort];var e=2;fightControl.getItemNum(itemIDConfig.bomb)>fightControl.getItemNum(itemIDConfig.tips)&&(e=3),this.curTipsItem=this.node.getChildByName("itembtn_"+e),this.curTipsItem.stopAllActions();this.curTipsItem.runAction(cc.sequence(cc.scaleTo(.5,1.1*.8),cc.scaleTo(.5,.8),cc.scaleTo(.5,.9*.8),cc.scaleTo(.5,.8)).repeatForever())}},showCloud:function(){if(1==engine.memory.isExistRes(bgImgUrl.cloudBig)){this.resetCloudTime();var e=GameTool.getRandomInt(1,fightControl.mapData.mapHeight-2),t=this.getPosByGrid({x:1,y:e}).y;this.cloudNode=new cc.Node,this.cloudNode.x=-688,this.cloudNode.y=t,this.cloudNode.addComponent(cc.Sprite).spriteFrame=engine.memory.getTexture(bgImgUrl.cloudBig),this.cloudNode.isPauseAction=!1,this.node.addChild(this.cloudNode);var n=this;this.cloudNode.runAction(cc.sequence(cc.moveBy(3,1373,0),cc.callFunc(function(){n.clearCloud()})))}},clearCloud:function(){null!=this.cloudNode&&(this.cloudNode.destroy(),this.cloudNode=null)},resetCloudTime:function(){this.cloudTime=0},refreshTipsTime:function(){1!=this.isGiveTips&&this.actionTime>=getGlobleDic(25)&&(this.isGiveTips=!0,this.clearChoose(),this.mapLayer.showLineTips(),this.resetItemTipsTime())},resetTipsTime:function(){this.actionTime=0},resetItemTipsTime:function(){this.itemTipsTime=0,this.isTipsItem=!1,null!=this.curTipsItem&&(this.curTipsItem.stopAllActions(),this.curTipsItem.scale=.8,this.curTipsItem=null)},isShowParachute:function(){1!=fightControl.isHaveParachute&&(fightControl.curCustomTimes<=3||fightControl.curCustomTimes%2>0||fightControl.curTime<=30&&fightControl.mapData.remainGrid>=10&&0===openModuleValue.forFBCheck&&this.addParachute())},addParachute:function(){fightControl.isHaveParachute=!0,this.clearParachute(),this.parachuteNode=new cc.Node,this.parachuteNode.addComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.nextloadimg1,"parachute"),this.parachuteNode.x=-413,this.parachuteNode.y=440,this.parachuteNode.anchorX=.66,this.mapLayer.node.addChild(this.parachuteNode,fightZIndexConfig.parachuteZIndex),this.parachuteNode.on(cc.Node.EventType.TOUCH_END,this.clickParachute,this);var e=[cc.v2(222,176),cc.v2(163,-119),cc.v2(360,0)],t=[cc.v2(-222,176),cc.v2(-163,-119),cc.v2(-360,0)],n=[cc.v2(-222,176),cc.v2(-163,-119),cc.v2(-200,0)],i=this;this.parachuteNode.runAction(cc.sequence(cc.scaleTo(.5,.95),cc.scaleTo(.5,1)).repeatForever()),this.parachuteNode.runAction(cc.sequence(cc.bezierBy(2.5,e),cc.bezierBy(2.5,e),cc.delayTime(2),cc.bezierBy(2.5,t),cc.bezierBy(2.5,n),cc.bezierBy(2.5,e),cc.bezierBy(2.5,e),cc.callFunc(function(){i.parachuteNode.x=-413})).repeatForever())},clearParachute:function(){null!=this.parachuteNode&&(this.parachuteNode.stopAllActions(),this.parachuteNode.off(cc.Node.EventType.TOUCH_END,this.clickParachute,this),this.parachuteNode.destroy(),this.parachuteNode=null)},showTime:function(){this.timePro.progress=fightControl.curTime/fightControl.maxTime},refreshCombo:function(){},playComboAction:function(){var e=this.node.getChildByName("combonode");e.stopAllActions(),this.mapLayer.curCombo>0?(e.active=!0,e.runAction(cc.sequence(cc.scaleTo(.15,1.5,1.5),cc.scaleTo(.15,1,1))),e.getChildByName("artword").getComponent("GameArtWord").setString(""+this.mapLayer.curCombo)):e.active=!1},update:function(e){this.refreshTime(e)},clearChoose:function(){if(null!=fightControl.gridPos1){var e=fightControl.gridPos1;fightControl.gridPos1=null,this.mapLayer.getGridNodeComByPos(e).refreshChoose()}this.mapLayer.clearTips()},clickItemBtn:function(e){if(1==this.isHaveCustom&&null!=this.pause&&1!=this.pause&&null!=this.mapLayer&&0!=this.mapLayer.isCanClick){var t=parseInt(e.target.name.split("_")[1]);if(2!=t||1!=openModuleValue.starFly)if(3!=t||1!=openModuleValue.cloud)if(4!=t||1!=openModuleValue.surpass){if(1==t&&1==openModuleValue.skinLevel)return this.mapLayer.node.active=!1,heroData.curLevel=fightControl.curLevel,void this.gotoNextCustom();this.resetTipsTime(),this.resetItemTipsTime();var n=this.itemIDArr[t-1];if(fightControl.getItemNum(n)>0||1==openModuleValue.itemMore)fightControl.useItem(n),this.useItem(t);else{var i=getDicData(dataJson.item_json,n,"price");heroData.diamond>=i?(heroData.addGem(-i),heroData.saveData(),this.useItem(t)):(this.pause=!0,openWindowLayer(openTypeEm.watchAdvert,watchOpenTypeEm.gemNoEnough))}}else openWindowLayer(openTypeEm.surpass);else this.showCloud();else this.mapLayer.showStarAdd()}},useItem:function(e){var t=this.itemIDArr[e-1];switch(gaLogEvent.logByDate("使用道具",t),t){case itemIDConfig.addTime:fightControl.curTime+=getGlobleDic(8),fightControl.curTime>fightControl.maxTime&&(fightControl.curTime=fightControl.maxTime),this.showTime(),this.addTimeAction();break;case itemIDConfig.tips:this.clearChoose(),this.mapLayer.showLineTips();break;case itemIDConfig.bomb:this.clearChoose(),this.mapLayer.itemBomb();break;case itemIDConfig.resort:this.clearChoose(),this.pause=!0,this.mapLayer.isCanClick=!1,fightControl.rearrangement(),this.playRearrangementAction()}this.refreshItemNum({index:e})},addTimeAction:function(){},playRearrangementAction:function(e){engine.gameSound.playEffect(soundurl.rearrange);var t=this,n=function(){null==e&&(t.mapLayer.refreshGrid(),t.pause=!1,t.mapLayer.isCanClick=!0);var n=new cc.Node,i=n.addComponent(cc.ParticleSystem);i.file=engine.memory.getParticle(needLoadParticle.rearrange_plz),i.autoRemoveOnFinish=!0,t.node.addChild(n,fightZIndexConfig.scoreZIndex)},i=new cc.Node,a=i.addComponent(sp.Skeleton);GameTool.setSkeleton(a,needLoadSpine.rearrange,"rearrange",1,!1),this.node.addChild(i,fightZIndexConfig.scoreZIndex),a.setCompleteListener(function(){i.destroy(),n()})},clickParachute:function(){this.pause=!0,0==fightControl.addScoreParachute&&fightControl.curScore<fightControl.targetScore&&1!=openModuleValue.isTimeOut?(openWindowLayer(openTypeEm.watchAdvert,watchOpenTypeEm.scoreParachute),gaLogEvent.logByDate("点击补分降落伞",1)):openWindowLayer(openTypeEm.watchAdvert,watchOpenTypeEm.parachute),this.clearParachute()},clickAddGemBtn:function(){1!=openModuleValue.gem1000?1==this.isHaveCustom&&(1!=openModuleValue.parachute?(this.pause=!0,openWindowLayer(openTypeEm.watchAdvert,watchOpenTypeEm.getGem)):this.addParachute()):heroData.addGem(1e3)},clickPauseBtn:function(){1==this.isHaveCustom&&(this.pause=!0,openWindowLayer(openTypeEm.pause))}}),cc._RF.pop()},{GameExternalImage:"GameExternalImage"}],GameAchievementData:[function(e,t,n){"use strict";cc._RF.push(t,"182eah0sFZIRJgU2qFvikaF","GameAchievementData"),window.achievementTypeEm=cc.Enum({normalGrid:1,itemGrid:2,passLevel:3,surpass:4,dailyTask:5,maxScore:6}),cc.Class({extends:cc.Component,properties:{achievementProObj:null,rewardObj:null},initialize:function(e){null==e&&(e={}),this.achievementProObj=e.pro,null==this.achievementProObj&&(this.achievementProObj={}),this.rewardObj=e.reward,null==this.rewardObj&&(this.rewardObj={})},isGetReward:function(e){if(null!=this.rewardObj[e])return rewardStateEm.already;var t=getDicData(dataJson.achievement_json,e);return this.getProgress(t.type)>=t.num?rewardStateEm.canReward:rewardStateEm.notCan},rewardAchieve:function(e){return null==this.rewardObj[e]&&(this.rewardObj[e]=1,engine.eventM.emit(event_id.REFRESH_ACHIEVEMENT_PUSH),!0)},getProgress:function(e){return null==this.achievementProObj[e]&&(this.achievementProObj[e]=0),this.achievementProObj[e]},getAchievementPush:function(){var e=getDicData(dataJson.achievement_json);for(var t in e)if(this.isGetReward(t)==rewardStateEm.canReward)return!0;return!1},getWeightValue:function(e){var t=0,n=getDicData(dataJson.achievement_json,e),i=this.isGetReward(e);return i==rewardStateEm.canReward?t-=1e4:i==rewardStateEm.already&&(t+=1e4),t=t+100*n.type+n.index},addProgress:function(e,t){null==t&&(t=1),null==this.achievementProObj[e]&&(this.achievementProObj[e]=0),1==getDicData("achievement",e,1).isadd?this.achievementProObj[e]+=t:t>this.achievementProObj[e]&&(this.achievementProObj[e]+=t),engine.eventM.emit(event_id.REFRESH_ACHIEVEMENT_PUSH)},getSaveData:function(){var e={};return e.pro=this.achievementProObj,e.reward=this.rewardObj,e}}),cc._RF.pop()},{}],GameAchievementOrStrongNode:[function(e,t,n){"use strict";cc._RF.push(t,"a1147HFWcJJc6T/IXcTPoNs","GameAchievementOrStrongNode"),cc.Class({extends:cc.Component,properties:{openType:null,curData:null,parentLayer:null,isCanClick:null},onDestroy:function(){this.openType=null,this.curData=null,this.parentLayer=null,this.isCanClick=null},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addEvent:function(){this.node.getChildByName("lvupbtn").on(cc.Node.EventType.TOUCH_END,this.clickLvUpBtn,this)},removeEvent:function(){this.node.getChildByName("lvupbtn").off(cc.Node.EventType.TOUCH_END,this.clickLvUpBtn,this)},initialize:function(e,t,n){this.isCanClick=!0,this.curData=e,this.openType=t,this.parentLayer=n,this.refreshView(),this.addEvent()},refreshView:function(){switch(this.openType){case achiOpenTypeEm.achievement:this.showAchievement();break;case achiOpenTypeEm.strong:this.showStronger()}},showAchievement:function(){var e=getDicData(dataJson.achievement_json,this.curData);this.node.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(needLoadImage.mastloadimg1,"icon_"+e.icon),this.node.getChildByName("desc").getComponent(cc.Label).string=e.describe;var t=heroData.achievementData.getProgress(e.type);this.node.getChildByName("pro").getComponent(cc.ProgressBar).progress=t/e.num,this.node.getChildByName("protxt").getComponent(cc.Label).string=t+"/"+e.num;var n=this.node.getChildByName("lvupbtn"),i=n.getChildByName("txt"),a=n.getChildByName("gemword"),o=this.node.getChildByName("check");i.active=!1,a.getComponent("GameArtWord").setString(""+e.reward);var r=heroData.achievementData.isGetReward(this.curData);this.isCanClick=!1,r==rewardStateEm.already?(n.active=!1,o.active=!0):r==rewardStateEm.canReward?(n.active=!0,o.active=!1,this.isCanClick=!0,n.getComponent(cc.Button).interactable=!0,a.getComponent("GameArtWord").fontName="fnttype5"):(n.active=!0,o.active=!1,n.getComponent(cc.Button).interactable=!1,a.getComponent("GameArtWord").fontName="fnttype6"),this.refreshAchievementPush()},refreshAchievementPush:function(){this.node.getChildByName("lvupbtn").getChildByName("push").active=!1},showStronger:function(){var e=heroData.strongData.getStrongerData(this.curData);this.node.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(needLoadImage.mastloadimg1,"icon_"+e.icon),this.node.getChildByName("desc").getComponent(cc.Label).string=e.describe;var t=heroData.strongData.getStrongerMax(this.curData);this.node.getChildByName("pro").getComponent(cc.ProgressBar).progress=e.level/t,this.node.getChildByName("protxt").getComponent(cc.Label).string=e.level+"/"+t;var n=this.node.getChildByName("lvupbtn"),i=n.getChildByName("txt"),a=n.getChildByName("gemword"),o=n.getChildByName("gem");this.node.getChildByName("check").active=!1,e.level>=t?(this.isCanClick=!1,i.active=!0,a.active=!1,o.active=!1):(this.isCanClick=!0,i.active=!1,a.active=!0,o.active=!0,a.getComponent("GameArtWord").setString(""+e.nextcost)),this.refreshStrongerPush()},refreshStrongerPush:function(){this.node.getChildByName("lvupbtn").getChildByName("push").active=!1},clickLvUpBtn:function(){if(1==this.isCanClick)switch(this.openType){case achiOpenTypeEm.achievement:this.achievementGet();break;case achiOpenTypeEm.strong:this.clickStronger()}},clickStronger:function(){var e=heroData.strongData.getStrongerData(this.curData).nextcost;heroData.diamond<e?openWindowLayer(openTypeEm.watchAdvert,watchOpenTypeEm.gemNoEnough):1==heroData.strongData.lvUpStronger(this.curData)&&(gaLogEvent.logByDate("强化",this.curData),this.refreshView(),heroData.addGem(-e),heroData.saveData(),this.parentLayer.refreshStrongerPush())},achievementGet:function(){if(1==heroData.achievementData.rewardAchieve(this.curData)){var e=getDicData(dataJson.achievement_json,this.curData,"reward");heroData.addGem(e),heroData.saveData();var t=[];t.push(getItemConfig(itemIDConfig.gem,e)),sceneControl.showReward(t),this.parentLayer.initView()}}}),cc._RF.pop()},{}],GameAchievementOrStrong:[function(e,t,n){"use strict";cc._RF.push(t,"65a35nxkFdL9pVvAse1I7ew","GameAchievementOrStrong"),window.achiOpenTypeEm=cc.Enum({achievement:0,strong:1});var i=e("GameListLayer");cc.Class({extends:i,properties:{curData:null,moveLayer:null,openType:null},onDestroy:function(){this.removeDataEvent(),this.openType=null,this.curData=null,this.moveLayer=null},destroyClass:function(){this.clear(),this.removeEvent(),null!=this.node&&(this.removeEvent(),this.node.destroy())},addDataEvent:function(){engine.eventM.on(event_id.REFRESH_STRONGER_NODE_PUSH,this.refreshStrongerPush,this),engine.eventM.on(event_id.REFRESH_ACHIEVEMENT_OR_STRONGER_GEM,this.refreshGemNum,this)},removeDataEvent:function(){engine.eventM.off(event_id.REFRESH_STRONGER_NODE_PUSH,this.refreshStrongerPush,this),engine.eventM.off(event_id.REFRESH_ACHIEVEMENT_OR_STRONGER_GEM,this.refreshGemNum,this)},addEvent:function(){this.node.getChildByName("homebtn").on(cc.Node.EventType.TOUCH_END,this.clickHomeBtn,this),this.node.getChildByName("addgembtn").on(cc.Node.EventType.TOUCH_END,this.clickAddGemBtn,this)},removeEvent:function(){this.node.getChildByName("homebtn").off(cc.Node.EventType.TOUCH_END,this.clickHomeBtn,this),this.node.getChildByName("addgembtn").off(cc.Node.EventType.TOUCH_END,this.clickAddGemBtn,this)},initialize:function(e){this.openType=e,this.moveLayer=this.node.getChildByName("scr").getComponent(cc.ScrollView).content,this.curData=[],this.addEvent(),this.addDataEvent(),this.initView(),this.refreshGemNum()},refreshGemNum:function(){this.node.getChildByName("gemword").getComponent("GameArtWord").setString(""+heroData.diamond),this.refreshStrongerPush()},initView:function(){var e=this.node.getChildByName("title").getComponent(cc.Sprite);switch(this.clear(),this.curData=[],this.openType){case achiOpenTypeEm.achievement:e.spriteFrame=engine.memory.getSpriteFrame(needLoadLanguageImage.language1,"achievement"),this.addAchievementNode();break;case achiOpenTypeEm.strong:e.spriteFrame=engine.memory.getSpriteFrame(needLoadLanguageImage.language1,"stronger"),this.addStrongerNode()}this.addNode()},addAchievementNode:function(){var e=getDicData(dataJson.achievement_json),t=[];for(var n in e){(a=new Object).data=n,a.weight=heroData.achievementData.getWeightValue(n),t.push(a)}t.sort(function(e,t){return e.weight-t.weight});for(var i=0;i<t.length;i++){var a;(a=new Object).data=t[i].data,a.pos=-70-149*i,this.curData.push(a)}},addStrongerNode:function(){var e=getDicData("stronger"),t=0;for(var n in e){var i=new Object;i.data=n,i.pos=-130-149*t,this.curData.push(i),t++}},addNode:function(){this.moveLayer.height=149*this.curData.length+20,this.moveLayer.height<890&&(this.moveLayer.height=890);var e=this,t=new Object;t.initPoint=0,t.borderPos1=70,t.borderPos2=-960,t.nodeDatas=this.curData;t.createUIFun=function(t){var n=engine.memory.getPrefab(nextLoadPrefab.achievement_stronger_node_prefab);return n.addComponent("GameAchievementOrStrongNode").initialize(t.data,e.openType,e),n.y=t.pos,e.moveLayer.addChild(n),n},this.setData(t)},update:function(){null!=this.curData&&this.curData.length>0&&this.updateView(this.moveLayer.y)},refreshStrongerPush:function(){if(this.openType!=achiOpenTypeEm.achievement)for(var e=this.nodeUIList.length-1;e>=0;e--)this.nodeUIList[e].getComponent("GameAchievementOrStrongNode").refreshStrongerPush()},clickHomeBtn:function(){this.destroyClass()},clickAddGemBtn:function(){openWindowLayer(openTypeEm.watchAdvert,watchOpenTypeEm.getGem)}}),cc._RF.pop()},{GameListLayer:"GameListLayer"}],GameAdapterInfo:[function(e,t,n){"use strict";cc._RF.push(t,"bd4ediO/QpAQZNC962nqDl7","GameAdapterInfo");cc.Class({properties:{isInit:null},initialize:function(e){1!=this.isInit&&(this.isInit=!0)},getPercentageX:function(e){return Math.floor(engineGlobal.viewGameWidth*e)},getPercentageY:function(e){return Math.floor(engineGlobal.viewGameHeigh*e)},getTopY:function(e){return engineGlobal.viewGameHeigh-e},getEndY:function(e){return e},getLeftX:function(e){return e},getRightX:function(e){return engineGlobal.viewGameWidth-e},addSceneNode:function(e,t,n,i){e.x=t,e.y=n,cc.director.getScene().addChild(e),null!=i&&(e.zIndex=i)}});cc._RF.pop()},{}],GameAnimationConfig:[function(e,t,n){"use strict";cc._RF.push(t,"030cetUHaBMfIpJ7mhgLYzI","GameAnimationConfig"),cc.Class({extends:cc.Component,properties:{},initialize:function(){}}),cc._RF.pop()},{}],GameAnimation:[function(e,t,n){"use strict";cc._RF.push(t,"5ba96ZaLz9P1qPBqTggMqXV","GameAnimation");cc.Class({extends:cc.Node,properties:{frameIndex:null,lastFrameTime:null,frameIntervalTime:null,isInit:null,playCount:null,curPlayCount:null,isStop:null,isRemoveFromComplete:null,frameFun:null,frameCompleteFun:null,playFrameIndex:null,fromFrameIndex:null,imgeData:null,animationSprite:null},destroy:function(){this.frameIndex=null,this.lastFrameTime=null,this.frameIntervalTime=null,this.isInit=null,this.playCount=null,this.curPlayCount=null,this.isStop=null,this.isRemoveFromComplete=null,this.frameFun=null,this.frameCompleteFun=null,this.playFrameIndex=null,this.fromFrameIndex=null,this.imgeData=null,this.animationSprite=null,this._super()},initialize:function(){if(1!=this.isInit){this.lastFrameTime=0,this.playCount=1,this.isRemoveFromComplete=!0,this.frameIndex=0,this.imgeData=[],this.animationSprite=this.addComponent(cc.Sprite);var e=this;this.animationSprite.update=function(t){e.playFrame()}}},addImgeData:function(e,t){var n=new Object;n.spriteAtlasURL=e,n.pngName=t,this.imgeData.push()},setImgeData:function(e){this.imgeData=e},playFrame:function(){if(1!=this.isStop&&engine.gameTime.getLocalTime()-this.lastFrameTime>this.frameIntervalTime){if(this.frameIndex>this.playFrameIndex)if(this.curPlayCount++,-1==this.playCount)this.frameIndex=this.fromFrameIndex;else{if(!(this.curPlayCount<this.playCount))return this.gotoAndStop(this.playFrameIndex),null!=this.frameCompleteFun&&this.frameCompleteFun(),void(1==this.isRemoveFromComplete&&this.destroy());this.frameIndex=this.fromFrameIndex}this.lastFrameTime=engine.gameTime.getLocalTime(this.frameIndex),this.setBitmapInfo(this.frameIndex),null!=this.frameFun&&this.frameFun(this.frameIndex),this.frameIndex++}},play:function(){this.isStop=!1,this.frameIndex=0,this.fromFrameIndex=0,this.playFrameIndex=this.imgeData.length-1},setBitmapInfo:function(e){var t=this.imgeData[this.frameIndex];this.animationSprite.spriteFrame=engine.gameMemoryManagement.getSpriteFrame(t.spriteAtlasURL,t.pngName)},setFrameIntervalTime:function(e){this.frameIntervalTime=parseInt(1e3/e)},gotoAndPlay:function(e){this.isStop=!1,this.lastFrameTime=0,this.frameIndex=e,this.setBitmapInfo(this.frameIndex)},fromFrameIndexToPlayFrameIndex:function(e,t){this.isStop=!1,this.fromFrameIndex=e,this.frameIndex=e,this.lastFrameTime=0,this.setBitmapInfo(this.frameIndex),this.playFrameIndex=t},gotoAndStop:function(e){this.isStop=!0,this.lastFrameTime=0,this.frameIndex=e,this.setBitmapInfo(this.frameIndex)},setIsStop:function(e){this.isStop=e}});cc._RF.pop()},{}],GameArrayDic:[function(e,t,n){"use strict";cc._RF.push(t,"78ad9TkBXpMc7CkBFcKBNV4","GameArrayDic"),cc.Class({properties:{keyName:null,arr:null,dic:null},initialize:function(e){this.keyName=e,this.arr=[],this.dic={}},setArr:function(e){this.arr=e,this.dic={};for(var t=0;t<this.arr.length;t++)this.dic[this.arr[t][this.keyName]]=this.arr[t]},setDic:function(e){for(var t in this.dic=e,this.arr=[],e)this.arr.push(e[t])},addItem:function(e){null==this.dic[e[this.keyName]]?(this.dic[e[this.keyName]]=e,this.arr.push(e)):ccLog("放入数据不唯一，键值为:"+this.key)},setItem:function(e){if(null!=this.dic[e[this.keyName]]){this.dic[e[this.keyName]]=e;for(var t=0;t<this.arr.length;t++)this.arr[t][this.keyName]==e[this.keyName]&&(this.arr[t]=e)}else this.addItem(e)},getItem:function(e){return this.dic[e]},removeItem:function(e){null!=this.dic[e]&&(this.dic[e]=null,delete this.dic[e]);for(var t=0;t<this.arr.length;t++)if(this.arr[t][this.keyName]==e)return void this.arr.splice(t,1)}}),cc._RF.pop()},{}],GameArtWord:[function(e,t,n){"use strict";cc._RF.push(t,"c065aWrojlEdoYtWfgd7pju","GameArtWord"),window.escapeTxt=new Object,escapeTxt["/"]="gang",window.setEscapeTxt=function(e,t){escapeTxt[e]=t},window.ArtWordStyleType=cc.Enum({middle:0,left:1,right:2}),cc.Class({extends:cc.Component,properties:{_text:"",_styleType:ArtWordStyleType.middle,_txtWidth:0,_indentationWidth:0,_txtHight:0,_fontName:"",_txtNode:null,_fontSpriteAtlas:null,_stringSize:null,_isInit:null,styleType:{type:ArtWordStyleType,set:function(e){this._styleType=e,this.refreshString()},get:function(){return this._styleType}},txtWidth:{set:function(e){this._txtWidth=e,this.refreshString()},get:function(){return this._txtWidth}},indentationWidth:{set:function(e){this._indentationWidth=e,this.refreshString()},get:function(){return this._indentationWidth}},txtHight:{set:function(e){this._txtHight=e,this.refreshString()},get:function(){return this._txtHight}},fontName:{set:function(e){this._fontName=e,this.refreshString()},get:function(){return this._fontName}},fontSpriteAtlas:{type:cc.SpriteAtlas,set:function(e){this._fontSpriteAtlas=e,this.refreshString()},get:function(){return this._fontSpriteAtlas}},text:{set:function(e){this.setString(e)},get:function(){return this._text}}},initialize:function(){1!=this._isInit&&(this._isInit=!0,this.node.destroyAllChildren())},onDestroy:function(){},onLoad:function(){this.initialize(),this.refreshString()},refreshString:function(){var e=this._text;this._text="",this.setString(e)},setString:function(e){if(e!=this._text){null!=this._txtNode&&(this._txtNode.destroy(),this._txtNode=null),null==this._stringSize&&(this._stringSize=new cc.Size),this._text=e,this._txtNode=new cc.Node,this.node.addChild(this._txtNode);for(var t=0,n=0;n<e.length;n++){var i=e[n],a=new cc.Node;switch(a.addComponent(cc.Sprite).spriteFrame=this.fontSpriteAtlas.getSpriteFrame(this.fontName+"_"+i),this.styleType){case ArtWordStyleType.middle:case ArtWordStyleType.left:a.setAnchorPoint(0,.5);break;case ArtWordStyleType.right:a.setAnchorPoint(1,.5)}a.x=t;var o=a.getContentSize();a.x=t,null!=o&&null!=o.width&&0!=o.width?t=t+o.width+this._indentationWidth:t+=this.txtWidth,this._txtNode.addChild(a)}switch(this._stringSize.width=t,this.styleType){case ArtWordStyleType.middle:this._txtNode.x=-t/2}}}}),cc._RF.pop()},{}],GameBackgroundLoad:[function(e,t,n){"use strict";cc._RF.push(t,"548532kx/tGWoI+ESt3D79J","GameBackgroundLoad");var i=e("LoadControl");cc.Class({properties:{loadInfoArr:null,isLoad:null,isInit:null},initialize:function(e){1!=this.isInit&&(this.isInit=!0,this.loadInfoArr=[],this.isLoad=!1)},addLoadRes:function(e){for(var t=0;t<e.length;t++)this.loadInfoArr.push(e[t]);this.loadRes()},loadRes:function(){if(0==this.isLoad&&this.loadInfoArr.length>0){var e=this;this.isLoad=!0;var t=new i,n=new Object;n.resources=[this.loadInfoArr.shift()],n.completeCallback=function(){e.isLoad=!1,e.loadRes()},t.initialize(n),t.load()}}});cc._RF.pop()},{LoadControl:"LoadControl"}],GameCPUManagement:[function(e,t,n){"use strict";cc._RF.push(t,"4ec50QFmC9PEJcmG5G+GblJ","GameCPUManagement");var i=e("GameLoadCPU");window.CPUStyleType=cc.Enum({loadType:1}),window.CPUExecuteOrder=cc.Enum({curUIType:99,otherType:10}),cc.Class({extends:cc.Component,properties:{CPUInfoArr:null,isRun:null,isInit:null,callFun:null,isStop:null,isOrder:null},initialize:function(){1!=this.isInit&&(this.isInit=!0,this.CPUInfoArr=[],this.isRun=!1,this.isOrder=!1)},addCPUInfo:function(e){e.length>0&&(this.isOrder=!0);for(var t=0;t<e.length;t++)e[t].order=1e10*e[t].executeOrder+e[t].timeOrder,this.CPUInfoArr.push(e[t]);this.run()},setRun:function(e){this.isRun=e},run:function(){if(this.CPUInfoArr.length<=0)ccLog("......下载资源长度为0...");else if(1!=this.isStop){if(0==this.isRun){this.isRun=!0,1==this.order&&(this.CPUInfoArr.sort(function(e,t){return e.order-t.order}),this.order=!1);var e=this.CPUInfoArr.shift();switch(e.type){case CPUStyleType.loadType:var t=new i;t.initialize(e),t.run()}}}else ccLog("......下载资源停止了...")},stopCPU:function(){this.isStop=!0},openCPU:function(){this.isStop=!1}}),cc._RF.pop()},{GameLoadCPU:"GameLoadCPU"}],GameCPU:[function(e,t,n){"use strict";cc._RF.push(t,"2ef61adCRBAfJPfoD2ijVt7","GameCPU"),cc.Class({properties:{},run:function(){},destroy:function(){},complete:function(){this.destroy(),engine.CPUM.setRun(!1),engine.CPUM.run()},failComplete:function(){this.destroy(),engine.CPUM.setRun(!1),engine.CPUM.run()}}),cc._RF.pop()},{}],GameChatRaceLampLayer:[function(e,t,n){"use strict";cc._RF.push(t,"fb6ec5x6h1ECrOqzOwknsEy","GameChatRaceLampLayer"),cc.Class({extends:cc.Component,properties:{bgNode:null,richLabel:null},onDestroy:function(){this.bgNode=null,this.richLabel=null},destroyClass:function(){null!=this.node&&this.node.destroy()},initialize:function(){this.bgNode=new cc.Node;var e=this.bgNode.addComponent(cc.Sprite);e.spriteFrame=engine.memory.getSpriteFrame(loginLoadImage.publicimg1,"lampbg"),e.type=cc.Sprite.Type.SLICED,e.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.bgNode.opacity=170,this.bgNode.y=528,this.bgNode.width=920,this.bgNode.height=38,this.node.addChild(this.bgNode),this.richLabel=new cc.Node,this.richLabel.anchorX=0,this.richLabel.x=460,this.richLabel.y=this.bgNode.y+1;var t=this.richLabel.addComponent(cc.RichText);t.horizontalAlign=cc.Label.HorizontalAlign.LEFT,t.fontSize=22,t.font=engine.memory.getFont(needLoadFont.fntttf1_font),t.lineHeight=32,this.node.addChild(this.richLabel),this.bgNode.active=!1,this.richLabel.active=!1,this.isNeedShow()},isNeedShow:function(){var e=heroData.raceLampData.getRaceLampData();if(heroData.raceLampData.deleteRaceLampData(),null!=e){this.bgNode.active=!0,this.richLabel.active=!0,this.richLabel.x=460,this.richLabel.getComponent(cc.RichText).string=e;var t=-460-this.richLabel.width,n=this.richLabel.y,i=this;this.richLabel.stopAllActions(),this.richLabel.runAction(cc.sequence(cc.moveTo(10,t,n),cc.callFunc(function(){i.isNeedShow()})))}else this.bgNode.active=!1,this.richLabel.active=!1},update:function(){0==this.bgNode.active&&this.isNeedShow()}}),cc._RF.pop()},{}],GameConfigData:[function(e,t,n){"use strict";cc._RF.push(t,"627c8PYqfxHMacgOaksddMW","GameConfigData"),window.openModuleValue={forFBCheck:0,hideMessageBox:1,isApk:0,chooseLv:1,parachute:0,remainTime:0,surpass:0,cloud:0,newElement:0,appointLevel:0,starFly:0,quickDead:0,money:0,isTimeOut:1,showGridNum:0,skinLevel:1,itemMore:0,gem1000:0,noAD:0},window.rankMaxScore=8e6,gameSDKName==faceBookSDK&&(openModuleValue={forFBCheck:0,hideMessageBox:1,isApk:0,chooseLv:0,parachute:0,remainTime:0,surpass:0,cloud:0,newElement:0,appointLevel:0,starFly:0,quickDead:0,money:0,isTimeOut:1,showGridNum:0,skinLevel:0,itemMore:0,gem1000:0,noAD:0}),window.rewardStateEm=cc.Enum({notCan:0,canReward:1,already:2}),window.isSamePos=function(e,t){return null==e&&null==t||null!=e&&null!=t&&(e.y==t.y&&e.x==t.x)},window.Global={needSoonRemoveLoadingCircle:!1},window.openTypeEm=cc.Enum({help:0,mainUI:1,achievementOrStrong:2,rank:3,fightUI:4,pause:5,watchAdvert:6,loading:7,messageBox:8,dailyTask:10,tipsLayer:11,surpriseLayer:12,resultLayer:13,gameOver:14,resurgence:15,target:16,surpass:17,customEnd:18,loadRes:19,newElement:20,gradeUI:21,gradeUpUI:22,loseDetail:23,raceLamp:24}),window.openDataConfig={0:{component:"HelpLayer",prefab:needLoadPrefab.public_layer_prefab,zIndex:UIzIndexInfo.UITopzIndex,otherPrefab:nextLoadPrefab.help_node_prefab},1:{component:"MainUILayer",prefab:needLoadPrefab.main_prefab,zIndex:UIzIndexInfo.UIBottomzIndex},2:{component:"GameAchievementOrStrong",prefab:nextLoadPrefab.achievement_stronger_prefab,zIndex:UIzIndexInfo.UITopzIndex,otherPrefab:nextLoadPrefab.achievement_stronger_node_prefab},3:{component:"GameRankLayer",prefab:nextLoadPrefab.rank_prefab,zIndex:UIzIndexInfo.UITopzIndex,otherPrefab:nextLoadPrefab.rank_node_prefab},4:{component:"FightUILayer",prefab:needLoadPrefab.fight_prefab,zIndex:UIzIndexInfo.UIBottomzIndex},5:{component:"PauseLayer",prefab:needLoadPrefab.public_layer_prefab,zIndex:UIzIndexInfo.UITopzIndex},6:{component:"WatchAdvertLayer",prefab:needLoadPrefab.public_watch_prefab,zIndex:UIzIndexInfo.UITopzIndex},7:{component:"LoadingLayer",prefab:needLoadPrefab.loading_prefab,zIndex:UIzIndexInfo.UILoadzIndex},8:{component:"ChooseMessengerLayer",prefab:needLoadPrefab.choose_messenger_prefab,zIndex:UIzIndexInfo.UIRewardIndex},10:{component:"GameDailyTaskLayer",prefab:needLoadPrefab.public_layer_prefab,zIndex:UIzIndexInfo.UITopzIndex,otherPrefab:nextLoadPrefab.daily_task_node_prefab},11:{component:"TipsLayer",prefab:needLoadPrefab.tips_layer_prefab,zIndex:UIzIndexInfo.UIConfirmzIndex},12:{component:"GameSurpriseLayer",prefab:nextLoadPrefab.surprise_layer_prefab,zIndex:UIzIndexInfo.UITopzIndex,otherSpine:nextLoadSpine.mysterious,otherPrefab:nextLoadPrefab.surprise_card_node_prefab},13:{component:"ResultLayer",prefab:needLoadPrefab.result_prefab,zIndex:UIzIndexInfo.UITopzIndex},14:{component:"GameOverLayer",prefab:needLoadPrefab.game_over_prefab,zIndex:UIzIndexInfo.UITopzIndex},15:{component:"ResurgenceLayer",prefab:needLoadPrefab.resurgence_layer_prefab,zIndex:UIzIndexInfo.UITopzIndex},16:{component:"TargetLayer",prefab:needLoadPrefab.target_layer_prefab,zIndex:UIzIndexInfo.UITopzIndex},17:{component:"SurpassLayer",prefab:nextLoadPrefab.surpass_layer_prefab,zIndex:UIzIndexInfo.UITopzIndex},18:{component:"CustomEndLayer",prefab:needLoadPrefab.custom_end_prefab,zIndex:UIzIndexInfo.UITopzIndex},19:{component:"LoadResLayer",prefab:needLoadPrefab.loading_prefab,zIndex:UIzIndexInfo.UITopzIndex},20:{component:"NewElementTipsLayer",prefab:needLoadPrefab.public_layer_prefab,zIndex:UIzIndexInfo.UITopzIndex},21:{component:"GradeLayer",prefab:needLoadPrefab.public_layer_prefab,zIndex:UIzIndexInfo.UITopzIndex,otherPrefab:nextLoadPrefab.grade_node_prefab},22:{component:"GradeUpLayer",prefab:needLoadPrefab.grade_up_layer_prefab,zIndex:UIzIndexInfo.UITopzIndex},23:{component:"LoseDetailLayer",prefab:needLoadPrefab.lose_detail_layer_prefab,zIndex:UIzIndexInfo.UITopzIndex},24:{component:"GameChatRaceLampLayer",zIndex:UIzIndexInfo.UIRewardIndex}},window.windowResIsExist=function(e){var t=openDataConfig[e];return(null==t.prefab||0!=engine.memory.isExistRes(t.prefab))&&((null==t.otherPrefab||0!=engine.memory.isExistRes(t.otherPrefab))&&(null==t.otherSpine||0!=engine.memory.isExistRes(t.otherSpine)))},window.openWindowLayer=function(e,t){var n=function(){addGameLayer(e,t)};1==windowResIsExist(e)?n():addGameLayer(openTypeEm.loadRes,{callFun:n,openType:e})},window.addGameLayer=function(e,t){var n=openDataConfig[e],i=null,a=(i=null!=n.prefab?engine.memory.getPrefab(n.prefab):new cc.Node).addComponent(n.component);engine.gameAdapterInfo.addSceneNode(i,engine.gameAdapterInfo.getPercentageX(.5),engine.gameAdapterInfo.getPercentageY(.5),n.zIndex),a.initialize(t)},window.getDicData=function(e,t,n){return null==t?engine.gameData.dataDic[e]:null==n?engine.gameData.dataDic[e][t]:engine.gameData.dataDic[e][t][n]},window.getLanguageDic=function(e){return getDicData(dataJson.language_json,e,"content")},window.getGlobleDic=function(e){return getDicData(dataJson.globle_json,e,"value")},window.changeMusic=function(){heroData.isStopMusic=engine.gameSound.stopSound,heroData.saveData()},window.itemIDConfig={gem:1e3,addTime:1001,tips:1002,bomb:1003,resort:1004},window.getItemConfig=function(e,t){return{num:t,id:e}},window.getItemSpriteFrame=function(e){var t=null;switch(e){case itemIDConfig.gem:t=engine.memory.getSpriteFrame(loginLoadImage.publicimg1,"gem2");break;default:var n=getDicData(dataJson.item_json,e,"icon");t=engine.memory.getSpriteFrame(needLoadImage.mastloadimg1,"itemicon"+n)}return t},window.arrIsContain=function(e,t,n){for(var i=-1,a=0;a<e.length;a++)if(null!=n){if(e[a][n]==t){i=a;break}}else if(e[a]==t){i=a;break}return i},window.spriteSetGray=function(e){var t=e.getComponent(cc.Sprite);t.setMaterial(0,cc.Material.getInstantiatedBuiltinMaterial("2d-gray-sprite",t))},window.spriteGrayRecover=function(e){var t=e.getComponent(cc.Sprite);t.setMaterial(0,cc.Material.getInstantiatedBuiltinMaterial("2d-sprite",t))},window.myGameGetShortName=function(e,t){t=t||10;for(var n=e.length,i=0,a=e,o=0;o<n;o++)if(0!=(65280&e.charCodeAt(o))&&i++,++i>t){a=e.slice(0,o)+"...";break}return a},window.analysisItemInfoByDic=function(e){for(var t=[],n=e.split(","),i=0;i<n.length;i++){var a=n[i].split("|"),o=getItemConfig(parseInt(a[0]),parseInt(a[1]));t.push(o)}return t},cc._RF.pop()},{}],GameCustomImage:[function(e,t,n){"use strict";cc._RF.push(t,"e694eRmeg1Eg4Zi/4TyHhma","GameCustomImage"),cc.Class({properties:{width:null,height:null,pngData:null,fontData:null,drawFun:null,drawCompleteFun:null},initialize:function(e){null!=e.pngData?this.pngData=e.pngData:this.pngData=[],null!=e.fontData?this.fontData=e.fontData:this.fontData=[],this.width=e.width,this.height=e.height,this.getBase64Image(e)},getBase64Image:function(e){for(var t=this,n=0;n<this.pngData.length;n++){var i=this.pngData[n],a=new Image;i.playImage=a,a.crossOrigin="anonymous",a.imgHeight=i.imgHeight,a.imgWidth=i.imgWidth,a.src=i.url,a.isLoad=!1,a.onload=function(){this.width=this.imgWidth,this.height=this.imgHeight,this.isLoad=!0,t.drawImage()}}},drawImage:function(){for(var e=0;e<this.pngData.length;e++){if(1!=(i=this.pngData[e]).playImage.isLoad)return}if(null==this.drawFun){var t=document.createElement("canvas");t.width=this.width,t.height=this.height;for(var n=0;n<this.pngData.length;n++){var i=this.pngData[n],a=t.getContext("2d");a.drawImage(i.playImage,i.posX,i.posY,i.playImage.width,i.playImage.height)}for(var o=0;o<this.fontData.length;o++){var r=this.fontData[o];a.font=r.font,a.lineWidth=r.lineWidth,a.fillStyle=r.fillStyle,a.textAlign=r.textAlign,a.strokeStyle=r.strokeStyle,a.strokeText(r.des.toString(),r.posX,r.posY),a.fillText(r.des.toString(),r.posX,r.posY)}var s=t.toDataURL("image/png");null!=this.drawCompleteFun&&this.drawCompleteFun(s)}else this.drawFun()}}),cc._RF.pop()},{}],GameDailyTaskData:[function(e,t,n){"use strict";cc._RF.push(t,"d82714tKvNAEqBQS8Whx+Dm","GameDailyTaskData"),window.dailyTaskTypeEm=cc.Enum({normalGrid:1,passLevel:2,surpass:3,gameTime:4,getSort:5}),cc.Class({extends:cc.Component,properties:{curTaskArr:null},initialize:function(e){null==e&&(e=[]),this.curTaskArr=e,this.curTaskArr.length<=0&&this.refreshTaskData()},refreshTaskData:function(){this.curTaskArr=[];var e=getDicData("dailytask"),t=[];for(var n in e)t.push(n);t.sort(function(){return Math.random()-.5});for(var i=0;i<3;i++){var a=t[i],o=GameTool.getRandomInt(0,e[a].length-1),r={id:e[a][o].id,pro:0,reward:0};this.curTaskArr.push(r)}},addTaskPro:function(e,t){null==t&&(t=1);for(var n=0;n<this.curTaskArr.length;n++){var i=this.curTaskArr[n],a=getDicData(dataJson.dailytask_json,i.id);if(a.type==e){1==a.isadd?this.curTaskArr[n].pro+=t:t>i.pro&&(this.curTaskArr[n].pro=t),this.curTaskArr[n].pro>a.num&&(this.curTaskArr[n].pro=a.num);break}}engine.eventM.emit(event_id.REFRESH_DAILY_TASK_PUSH)},getTaskPush:function(){for(var e=0;e<this.curTaskArr.length;e++)if(this.getRewardState(e)==rewardStateEm.canReward)return!0;return!1},getRewardState:function(e){var t=this.curTaskArr[e];if(1==t.reward)return rewardStateEm.already;var n=getDicData(dataJson.dailytask_json,t.id);return t.pro>=n.num?rewardStateEm.canReward:rewardStateEm.notCan},getTaskReward:function(e){return 0==this.curTaskArr[e].reward&&(this.curTaskArr[e].reward=1,engine.eventM.emit(event_id.REFRESH_DAILY_TASK_PUSH),!0)},getSaveData:function(){return this.curTaskArr}}),cc._RF.pop()},{}],GameDailyTaskLayer:[function(e,t,n){"use strict";cc._RF.push(t,"60ae9hVxx9OPJMGCT1oZjSq","GameDailyTaskLayer");var i=e("PublicLayer");cc.Class({extends:i,properties:{timeTxt:null,txtDes:null,updateCD:null,nodeComArr:null},onDestroy:function(){this.timeTxt=null,this.txtDes=null,this.updateCD=null,this.nodeComArr=null,this.removeDataEvent()},destroyClass:function(){null!=this.timeTxt&&this.timeTxt.node.destroy(),null!=this.node&&(this.removeEvent(),this.node.destroy())},addDataEvent:function(){engine.eventM.on(event_id.REFRESH_DAILY_TASK_LAYER,this.refreshLayer,this)},removeDataEvent:function(){engine.eventM.off(event_id.REFRESH_DAILY_TASK_LAYER,this.refreshLayer,this)},initialize:function(){var e={bg:{y:28,width:666,height:658},bg2:{y:41,width:620,height:605},title:{y:350,txt:getLanguageDic(1023)},close:{x:312,y:340}};this.addEvent(),this.addDataEvent();var t=new cc.Node;t.y=265,this.timeTxt=t.addComponent(cc.Label),this.timeTxt.font=engine.memory.getFont(needLoadFont.fntttf1_font),this.timeTxt.fontSize=28,this.timeTxt.horizontalAlign=cc.Label.HorizontalAlign.CENTER,this.timeTxt.verticalAlign=cc.Label.VerticalAlign.CENTER,this.node.getChildByName("activenode").addChild(t),this.nodeComArr=[];for(var n=heroData.dailyTaskData.curTaskArr,i=0;i<n.length;i++){var a=engine.memory.getPrefab(nextLoadPrefab.daily_task_node_prefab),o=a.addComponent("GameDailyTaskNode");o.initialize(i,this),a.y=155-154*i,this.node.getChildByName("activenode").addChild(a),this.nodeComArr.push(o)}this.txtDes=getLanguageDic(1011),this.refreshEndTime(),this._super(e)},refreshLayer:function(){for(var e=0;e<this.nodeComArr.length;e++)this.nodeComArr[e].refreshLayer()},update:function(e){null!=this.updateCD&&engine.gameTime.localTime-this.updateCD>500&&this.refreshEndTime()},refreshEndTime:function(){this.updateCD=engine.gameTime.localTime;var e=heroData.taskRefreshTime+heroData.dailyTaskCD-engine.gameTime.localTime;this.timeTxt.string=this.txtDes+engine.gameTime.formatTime(e)}}),cc._RF.pop()},{PublicLayer:"PublicLayer"}],GameDailyTaskNode:[function(e,t,n){"use strict";cc._RF.push(t,"8582bMWRBJAmJPdH90W7yDX","GameDailyTaskNode"),cc.Class({extends:cc.Component,properties:{index:null,parentLayer:null,isCanClick:null},onDestroy:function(){this.index=null,this.parentLayer=null,this.isCanClick=null},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addEvent:function(){this.node.getChildByName("getbtn").on(cc.Node.EventType.TOUCH_END,this.clickGetBtn,this)},removeEvent:function(){this.node.getChildByName("getbtn").off(cc.Node.EventType.TOUCH_END,this.clickGetBtn,this)},initialize:function(e,t){this.isCanClick=!1,this.index=e,this.parentLayer=t,this.addEvent(),this.refreshLayer()},refreshLayer:function(){var e=heroData.dailyTaskData.curTaskArr[this.index],t=getDicData(dataJson.dailytask_json,e.id);this.node.getChildByName("desc").getComponent(cc.Label).string=t.describe,this.node.getChildByName("pro").getComponent(cc.ProgressBar).progress=e.pro/t.num,this.node.getChildByName("protxt").getComponent(cc.Label).string=e.pro+"/"+t.num;var n=this.node.getChildByName("getbtn"),i=n.getChildByName("gemword"),a=this.node.getChildByName("check");i.getComponent("GameArtWord").setString(""+t.reward);var o=heroData.dailyTaskData.getRewardState(this.index);this.isCanClick=!1,o==rewardStateEm.already?(n.active=!1,a.active=!0):o==rewardStateEm.canReward?(n.active=!0,a.active=!1,this.isCanClick=!0,n.getComponent(cc.Button).interactable=!0,i.getComponent("GameArtWord").fontName="fnttype5"):(n.active=!0,a.active=!1,n.getComponent(cc.Button).interactable=!1,i.getComponent("GameArtWord").fontName="fnttype6")},clickGetBtn:function(){if(1==this.isCanClick&&1==heroData.dailyTaskData.getTaskReward(this.index)){this.refreshLayer();var e=heroData.dailyTaskData.curTaskArr[this.index],t=getDicData(dataJson.dailytask_json,e.id,"reward");heroData.addGem(t);var n=[];n.push(getItemConfig(itemIDConfig.gem,t)),sceneControl.showReward(n),heroData.achievementData.addProgress(achievementTypeEm.dailyTask),heroData.saveData()}}}),cc._RF.pop()},{}],GameData:[function(e,t,n){"use strict";cc._RF.push(t,"f8499hr5dVKqpoWGh6smq1b","GameData");cc.Class({properties:{isInit:null,dataDic:null},initialize:function(){1!=this.isInit&&(this.isInit=!0,this.dataDic=new Object)},analysisJsonData:function(e,t){if(null==this.dataDic[e]){var n=cc.loader.getRes(t);if(null!=n){n=n.json;for(var i=new Object,a=1;a<n.length;a++){for(var o=new Object,r=0;r<n[a].length;r++)"null"!=n[a][r]?o[n[0][r]]=n[a][r]:o[n[0][r]]="";i[n[a][0]]=o}this.dataDic[e]=i}else ccLog("配置的"+e+"JSON文件缺失")}else ccLog("配置的"+e+"JSON文件已经被初始化了")}});cc._RF.pop()},{}],GameEventConfig:[function(e,t,n){"use strict";cc._RF.push(t,"fdeaeSzWMVEgqRlrvxBC2eD","GameEventConfig"),window.event_id={REFRESH_STRONGER_NODE_PUSH:100001,REFRESH_ACHIEVEMENT_PUSH:100002,REFRESH_DAILY_GIFT_BTN:100003,REFRESH_ACHIEVEMENT_OR_STRONGER_GEM:100004,REFRESH_DAILY_TASK_PUSH:100005,REFRESH_DAILY_TASK_LAYER:100006,REFRESH_SURPRISE_PUSH:100007,REFRESH_RANK_LAYER:100008,REFRESH_GRADE_PUSH:100009,REFRESH_PAUSE:200002,RESURGENCE_REFRESH:200003,REFRESH_ITEM_NUM:200004,SHOW_TARGET_ACTION:200005,GOTO_NEXT_CUSTOM:200006,CLOSE_NEW_ELEMENT:200007,REWARD_ADD_SCORE_PARACHUTE:200008,REFRESH_GEM_NUMBER:3e5,REFRESH_GOLD_NUMBER:300001,CLOSE_LOADING_LAYER:300002},cc._RF.pop()},{}],GameEventManager:[function(e,t,n){"use strict";cc._RF.push(t,"b5ab6VzOG5CwoM7A6wftrQs","GameEventManager"),cc.Class({properties:{node:null,keyDic:null},initialize:function(){this.node=new cc.Node,this.keyDic=new Object},on:function(e,t,n){null!=this.keyDic[e]?ccLog("事件重复添加，事件编号:"+e):this.keyDic[e]=e,this.node.on(e,t,n)},off:function(e,t,n){null!=this.keyDic[e]&&(this.keyDic[e]=null,delete this.keyDic[e]),this.node.off(e,t,n)},emit:function(e,t){this.node.emit(e,t)}}),cc._RF.pop()},{}],GameExternalImage:[function(e,t,n){"use strict";cc._RF.push(t,"0cc55a/evFKRbKSgTaZ8wF5","GameExternalImage");cc.Class({extends:cc.Node,properties:{animationSprite:null},loadImage:function(e,t,n,i){this.animationSprite=this.addComponent(cc.Sprite),null!=t&&(this.animationSprite.spriteFrame=t,null!=n&&(this.scaleX=n/this.getContentSize().width),null!=i&&(this.scaleY=i/this.getContentSize().height));var a=engine.memory.getExternalImage(e),o=this;null==a?(loadExternalImage(e),this.animationSprite.update=function(t){var a=engine.memory.getExternalImage(e);null!=a&&(o.animationSprite.update=function(e){},o.animationSprite.spriteFrame=a,null!=n&&(o.scaleX=n/o.getContentSize().width),null!=i&&(o.scaleY=i/o.getContentSize().height))}):(this.animationSprite.spriteFrame=a,null!=n&&(o.scaleX=n/o.getContentSize().width),null!=i&&(o.scaleY=i/o.getContentSize().height))}});cc._RF.pop()},{}],GameGlobal:[function(e,t,n){"use strict";cc._RF.push(t,"12d37ZPvOZDzp7kMvfn0GQJ","GameGlobal");var i=e("FaceBookSDK");window.faceBookSDK="FaceBookSDK",window.faceBookSDKTest="FaceBookSDKTest",window.errorServerUrl="https://sendsmgvt.9191youxi.com:8080/WordsGame_err",window.gameSDKName=faceBookSDKTest,window.gameSDK=null,window.gameVersions="20200824_v3",window.engineGlobal={gamelanguage:"english",languageStyle:0,gameFrame:50,playEffectMinTime:300,loadSoundDic:new Object,gameWidth:720,gameHeigh:1280,offY:0,offX:0,viewGameWidth:720,viewGameHeigh:1280},window.UIzIndexInfo={UIBgimgzIndex:-1,UIBottomzIndex:1e3,UIMiddlezIndex:2e3,UITopzIndex:3e3,UIConfirmzIndex:4e3,UIEffectIndex:5e3,UIEffectIndex2:5100,UINovicezIndex:6e3,UIRewardIndex:7e3,UILoadzIndex:8e3},window.fightZIndexConfig={gridZIndex:1e4,lineZIndex:2e4,parachuteZIndex:25e3,scoreZIndex:3e4},window.initGameSDK=function(){switch(ccLog(window.gameSDKName),window.gameSDKName){case faceBookSDKTest:case faceBookSDK:gameSDK=new i,gameSDK.initialize()}},cc._RF.pop()},{FaceBookSDK:"FaceBookSDK"}],GameGradeData:[function(e,t,n){"use strict";cc._RF.push(t,"9366dpRex9L+4U9MwTb8ztj","GameGradeData"),cc.Class({extends:cc.Component,properties:{rewardObj:null},initialize:function(e){this.rewardObj=null==e?{}:e},getRewardStateByID:function(e){if(null!=this.rewardObj[e])return rewardStateEm.already;var t=getDicData(dataJson.grade_json,e);return this.getCurGradeByScore()>=t.grade?rewardStateEm.canReward:rewardStateEm.notCan},getGradePush:function(){var e=!1;for(var t in getDicData(dataJson.grade_json))if(this.getRewardStateByID(t)==rewardStateEm.canReward){e=!0;break}return e},gradeReward:function(e){this.rewardObj[e]=1},getCurGradeByScore:function(e){var t=0;null==e&&(e=heroData.bestScore);var n=getDicData(dataJson.grade_json);for(var i in n){var a=n[i];if(e>a.score1&&(null==a.score2||""==a.score2||e<=a.score2)){t=a.grade;break}}return t},getSaveData:function(){return this.rewardObj}}),cc._RF.pop()},{}],GameLanguageLabel:[function(e,t,n){"use strict";cc._RF.push(t,"30fe3rxTvpKZ6bjdyYdeUrj","GameLanguageLabel"),cc.Class({extends:cc.Component,properties:{dic:"language",_key:"",key:{set:function(e){this._key=e,this.refreshString()},get:function(){return this._key}},column:"content"},onDestroy:function(){this.dic=null,this.key=null,this.column=null,null!=this.node&&(this.node.setLanguageKey=null)},onLoad:function(){this.node.setLanguageKey=function(e){this.getComponent("GameLanguageLabel").key=e},this.refreshString()},refreshString:function(){"undefined"!=typeof engine&&""!=this._key&&(this.node.getComponent(cc.Label).string=engine.gameData.dataDic[this.dic][this._key][this.column])}}),cc._RF.pop()},{}],GameLanguageSprite:[function(e,t,n){"use strict";cc._RF.push(t,"f0568AcwDFIx4CBvbLcS9n7","GameLanguageSprite"),window.LanguageStyleType=cc.Enum({English:0,Hindi:1,Indonisian:2,Portuguese:3,Thai:4,Vietemnese:5}),cc.Class({extends:cc.Component,properties:{_language:1,_dataInfo:null,_pngURL:null,_pngX:0,_pngY:0,language:{type:LanguageStyleType,set:function(e){this._language=e,this.refreshSprite()},get:function(){return this.refreshSprite(),this._language}},pngURL:{type:cc.SpriteFrame,set:function(e){this._pngURL=e,this.saveDataInfo(),this.refreshSprite()},get:function(){return this._pngURL}},pngX:{set:function(e){this._pngX=e,this.saveDataInfo(),this.refreshSprite()},get:function(){return this._pngX}},pngY:{set:function(e){this._pngY=e,this.saveDataInfo(),this.refreshSprite()},get:function(){return this._pngY}}},createLanguage:function(){if(null==this._dataInfo)for(var e in this._dataInfo={},LanguageStyleType)this._dataInfo[LanguageStyleType[e]]={};null==this._dataInfo[this._language]&&(this._dataInfo[this._language]={})},onLoad:function(){this._language=engineGlobal.languageStyle,this.refreshSprite()},saveDataInfo:function(){this.createLanguage(),this._dataInfo[this._language].x=this._pngX,this._dataInfo[this._language].y=this._pngY,this._dataInfo[this._language].png=this._pngURL},refreshSprite:function(){this.createLanguage();var e=this._dataInfo[this._language];if(null!=e){var t=this.node.getComponent(cc.Sprite);void 0!==e.png&&null!=e.png&&(t.spriteFrame=e.png,this.node.width=t.spriteFrame.getOriginalSize().width,this.node.height=t.spriteFrame.getOriginalSize().height,this._pngURL=t.spriteFrame),void 0!==e.x&&null!=e.x&&(this.node.x=e.x,this._pngX=e.x),void 0!==e.y&&null!=e.y&&(this.node.y=e.y,this._pngY=e.y)}}}),cc._RF.pop()},{}],GameListLayer:[function(e,t,n){"use strict";cc._RF.push(t,"c0a9fi/aotG1LeAvBJuJ0qP","GameListLayer"),cc.Class({extends:cc.Component,properties:{nodeUIList:null,nodeDataList:null,createUIFun:null,keyNum:null,borderPos1:null,borderPos2:null,initPoint:null,curPoint:null,isStop:null},onDestroy:function(){this.nodeUIList=null,this.nodeDataList=null,this.createUIFun=null,this.keyNum=null,this.borderPos1=null,this.borderPos2=null,this.initPoint=null,this.curPoint=null,this.isStop=null},setData:function(e){this.nodeUIList=[],this.nodeDataList=[],this.initPoint=e.initPoint,this.curPoint=null,this.isStop=!1,this.keyNum=1e3,this.borderPos1=e.borderPos1,this.borderPos2=e.borderPos2;for(var t=0;t<e.nodeDatas.length;t++){var n=new Object;n.data=e.nodeDatas[t],n.dataKey=this.keyNum,n.isAdd=!1,this.nodeDataList.push(n),this.keyNum++}this.createUIFun=e.createUIFun},refreshNodeData:function(e){var t=new Object;t.data=e,t.dataKey=this.keyNum,t.isAdd=!1,this.nodeDataList.push(t),this.keyNum++},refreshBorder:function(e){this.borderPos1=e.borderPos1,this.borderPos2=e.borderPos2,this.refurbishUI()},updateView:function(e){1!=this.isStop&&this.curPoint!=e&&(this.curPoint=e,this.refurbishUI())},setStop:function(e){this.isStop=e},addNodeByIndex:function(e){var t=this.nodeDataList[e];if(null!=t){var n=this.curPoint+t.data.pos;if(n<=this.borderPos1&&n>=this.borderPos2&&0==t.isAdd){t.isAdd=!0;var i=this.createUIFun(t.data);null!=i&&(i.dataKey=t.dataKey,this.nodeUIList.push(i))}return!0}return!1},refurbishUI:function(){for(var e=0;e<this.nodeDataList.length;e++){var t=this.nodeDataList[e];if((i=this.curPoint+t.data.pos)<=this.borderPos1&&i>=this.borderPos2)if(0==t.isAdd)t.isAdd=!0,null!=(a=this.createUIFun(t.data))&&(a.dataKey=t.dataKey,this.nodeUIList.push(a))}for(var n=this.nodeUIList.length-1;n>=0;n--){var i,a=this.nodeUIList[n];t=this.getNodeDataByDataKey(a.dataKey);((i=this.curPoint+t.data.pos)>this.borderPos1||i<this.borderPos2)&&(t.isAdd=!1,a.destroy(),this.nodeUIList.splice(n,1))}},clear:function(){if(null!=this.nodeUIList)for(;this.nodeUIList.length>0;){this.nodeUIList.shift().destroy()}if(null!=this.nodeDataList)for(;this.nodeDataList.length>0;){var e=this.nodeDataList.shift();e.data=null,e.dataKey=null,e.isAdd=null}this.curPoint=this.initPoint},removeData:function(e){for(var t=this.nodeDataList.length-1;t>=0;t--)if(this.nodeDataList[t].dataKey==e)return void this.nodeDataList.splice(t,1)},removeNodeUI:function(e){for(var t=this.nodeUIList.length-1;t>=0;t--)if(this.nodeUIList[t].dataKey==e)return void this.nodeUIList.splice(t,1)},getNodeDataByDataKey:function(e){for(var t=0;t<this.nodeDataList.length;t++)if(this.nodeDataList[t].dataKey==e)return this.nodeDataList[t];return null}}),cc._RF.pop()},{}],GameLoadCPU:[function(e,t,n){"use strict";cc._RF.push(t,"475d2HorzVGH5YhM2E44lbE","GameLoadCPU");var i=e("LoadControl"),a=e("GameCPU");cc.Class({extends:a,properties:{loadData:null},destroy:function(){this.loadData.resources=null,this.loadData.completeCallbackFun=null,this.loadData=null},initialize:function(e){var t=this;this.loadData=new Object,this.loadData.resources=e.data,this.loadData.loadErrorMaxCount=e.loadErrorMaxCount,this.loadData.completeCallbackFun=function(){t.complete()},this.loadData.loadErrorCallBackFun=function(){t.failComplete()}},run:function(){var e=new i;e.initialize(this.loadData),e.loadRes()}}),cc._RF.pop()},{GameCPU:"GameCPU",LoadControl:"LoadControl"}],GameLoadPrefabLayer:[function(e,t,n){"use strict";cc._RF.push(t,"2e239fuh9ZI8ohElfBk2Oc0","GameLoadPrefabLayer"),cc.Class({extends:cc.Component,properties:{isInit:null,callFun:null},onDestroy:function(){this.isInit=null,this.callFun=null},destroyNode:function(){this.node.getChildByName("closebtn").off(cc.Node.EventType.TOUCH_END,this.clickClosebtnFun,this),this.node.destroy()},initialize:function(e){if(1!=this.isInit){this.isInit=!0,this.callFun=e.callFun;var t=e.curLoadPreConfig,n=this.node.getChildByName("bgsp");null!=n&&(n.y=t.bgY,n.width=t.bgWidth,n.height=t.bgHeight);var i=this.node.getChildByName("closebtn");null!=i&&(null!=t.closeX?(i.y=t.closeY,i.x=t.closeX):i.active=!1,i.on(cc.Node.EventType.TOUCH_END,this.clickClosebtnFun,this));var a=this.node.getChildByName("circleimg");if(null!=a){a.scale=t.circleScale;var o=cc.rotateBy(2,360);o.repeatForever(),a.y=t.circleY,a.runAction(o)}var r=this.node.addComponent("GameLoadPrefab");this.node.loadPrefabComplete=this.loadPrefabComplete.bind(this),r.loadPrefab(t.loadPrefab)}},loadPrefabComplete:function(){null!=this.callFun&&this.callFun(),this.destroyNode()},clickClosebtnFun:function(){engine.gameSound.playEffect(soundurl.click),this.destroyNode()}}),cc._RF.pop()},{}],GameLoadPrefab:[function(e,t,n){"use strict";cc._RF.push(t,"e3a11ftLyRLf4myB3dbgVM8","GameLoadPrefab");e("GameCPUManagement");cc.Class({extends:cc.Component,properties:{resArr:null,isRunUpdate:null},onDestroy:function(){this.resArr=null,this.isRunUpdate=null},loadRes:function(e,t,n,i){null==n&&(n=CPUExecuteOrder.otherType),null==i&&(i=LoadErrorMaxCountConfig.Prefab);var a=[];if(this.resArr=[],null!=t)for(var o=0;o<t.length;o++){if(0==engine.memory.isExistRes(t[o]))(r={}).url=t[o],r.restype=LoadStyleType.spriteAtlas,a.push(r),this.resArr.push(t[o])}for(o=0;o<e.length;o++){var r;if(0==engine.memory.isExistRes(e[o]))(r={}).url=e[o],r.restype=LoadStyleType.prefab,a.push(r),this.resArr.push(e[o])}this.resArr.length<0?(this.node.loadComplete(),this.destroy()):(engine.CPUM.addCPUInfo([{type:CPUStyleType.loadType,data:a,executeOrder:n,timeOrder:engine.gameTime.localTime,loadErrorMaxCount:i}]),this.isRunUpdate=!0)},update:function(e){1==this.isRunUpdate&&1==this.isLoadComplete()&&(this.node.loadComplete(),this.destroy())},isLoadComplete:function(){for(var e=0;e<this.resArr.length;e++)if(0==engine.memory.isExistRes(this.resArr[e]))return!1;return!0}}),cc._RF.pop()},{GameCPUManagement:"GameCPUManagement"}],GameLoadSpine:[function(e,t,n){"use strict";cc._RF.push(t,"3ffa9tXf4NMk5vHnC9N5zDI","GameLoadSpine");e("GameCPUManagement"),cc.Class({extends:cc.Component,properties:{isInit:null,spineUrlArr:null,isRunUpdate:null},onDestroy:function(){this.spineUrlArr=null},onLoad:function(){this.initialize()},loadSpine:function(e,t,n){if(this.spineUrlArr=e,null==t&&(t=CPUExecuteOrder.otherType),null==n&&(n=LoadErrorMaxCountConfig.Spine),1==this.isLoadComplete())this.node.loadComplete(),this.destroy();else{for(var i=0;i<this.spineUrlArr.length;i++)0==engine.memory.isExistRes(this.spineUrlArr[i])&&engine.CPUM.addCPUInfo([{type:CPUStyleType.loadType,data:[{url:this.spineUrlArr[i],restype:LoadStyleType.spine}],executeOrder:t,timeOrder:engine.gameTime.localTime,loadErrorMaxCount:n}]);this.isRunUpdate=!0}},isLoadComplete:function(){for(var e=0;e<this.spineUrlArr.length;e++)if(0==engine.memory.isExistRes(this.spineUrlArr[e]))return!1;return!0},initialize:function(){1!=this.isInit&&(this.isInit=!0)},update:function(e){1==this.isRunUpdate&&1==this.isLoadComplete()&&(this.node.loadComplete(),this.destroy())}});cc._RF.pop()},{GameCPUManagement:"GameCPUManagement"}],GameLoadSprite:[function(e,t,n){"use strict";cc._RF.push(t,"ab649QQvUxNJqynbgE6mp9g","GameLoadSprite");e("GameCPUManagement"),cc.Class({extends:cc.Component,properties:{isInit:null,spriteAtlas:null,pngName:null,isRunUpdate:null},onDestroy:function(){this.spriteAtlas=null,this.pngName=null,this.isRunUpdate=null},onLoad:function(){this.initialize()},loadPng:function(e,t,n,i,a){this.spriteAtlas=e,this.pngName=t,null==i&&(i=CPUExecuteOrder.otherType),null==a&&(a=LoadErrorMaxCountConfig.Sprite),0==engine.memory.isExistRes(e)?(0!=n&&engine.CPUM.addCPUInfo([{type:CPUStyleType.loadType,data:[{url:e,restype:LoadStyleType.spriteAtlas}],executeOrder:i,timeOrder:engine.gameTime.localTime,loadErrorMaxCount:a}]),this.isRunUpdate=!0):(this.node.getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(this.spriteAtlas,this.pngName),this.destroy())},initialize:function(){1!=this.isInit&&(this.isInit=!0)},update:function(e){1==this.isRunUpdate&&1==engine.memory.isExistRes(this.spriteAtlas)&&(this.node.getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(this.spriteAtlas,this.pngName),this.destroy())}});cc._RF.pop()},{GameCPUManagement:"GameCPUManagement"}],GameLoadTexture:[function(e,t,n){"use strict";cc._RF.push(t,"cea3f697xpJEIY93hjxQdGj","GameLoadTexture");e("GameBackgroundLoad"),cc.Class({extends:cc.Component,properties:{isInit:null,url:null,isRunUpdate:null},onDestroy:function(){this.url=null,this.isRunUpdate=null},onLoad:function(){this.initialize()},loadPng:function(e){this.url=e,0==engine.gameMemoryManagement.isExistRes(this.url)?(engine.gameBackgroundLoad.addLoadRes([{url:this.url,restype:LoadStyleType.texture}]),this.isRunUpdate=!0):(this.node.getComponent(cc.Sprite).spriteFrame=engine.gameMemoryManagement.getTexture(this.url),this.destroy())},initialize:function(){1!=this.isInit&&(this.isInit=!0)},update:function(e){1==this.isRunUpdate&&1==engine.gameMemoryManagement.isExistRes(this.url)&&(this.node.getComponent(cc.Sprite).spriteFrame=engine.gameMemoryManagement.getTexture(this.url),this.destroy())}});cc._RF.pop()},{GameBackgroundLoad:"GameBackgroundLoad"}],GameLoadUI:[function(e,t,n){"use strict";cc._RF.push(t,"c4c93H70JVFwJ9phyKBLW9C","GameLoadUI");e("GameLoadSpine");var i=e("LoadControl");cc.Class({extends:cc.Component,properties:{loadUI:null,progress:null,proTxt:null,effectN:null,isAddLoad:null,createComplete:null},onDestroy:function(){this.loadUI=null,this.progress=null,this.proTxt=null,this.effectN=null,this.isAddLoad=null,this.createComplete=null},onLoad:function(){this.isAddLoad=!1,this.startLoadRes()},startLoadRes:function(){var e=new i,t=new Object;t.resources=[],t.setLoadPercent=function(){},t.completeCallbackFun=function(){},t.loadErrorMaxCount=100,e.initialize(t),e.loadRes()},update:function(e){this.isAddLoad},creatLoadUI:function(e){},destroyClass:function(){null!=this.node&&null!=this.loadUI&&this.loadUI.destroy()},setLoadPercent:function(e){}}),cc._RF.pop()},{GameLoadSpine:"GameLoadSpine",LoadControl:"LoadControl"}],GameLog:[function(e,t,n){"use strict";cc._RF.push(t,"eaabca+x2VK+qUTmbjdO/S3","GameLog");cc.Class({properties:{isInit:null,bugLimitCount:null},initialize:function(){if(1!=this.isInit){this.bugLimitCount=0;var e=this;window.onerror=function(t,n,i,a,o){if(null!=o&&null!=o.stack&&e.bugLimitCount<=5){e.bugLimitCount++;var r=o.stack.toString();switch(gameSDKName){case faceBookSDKTest:e.bugInfoHttp(r)}}}}},bugInfoHttp:function(e){if(!(e.indexOf("_assembler")>0)){var t=new Date,n=t.getFullYear()+"."+(t.getMonth()+1)+"."+t.getDate(),i=new Object,a="0";"undefined"!=typeof gameSDK&&null!=gameSDK&&null!=gameSDK.sdkPlayInfo&&null!=gameSDK.sdkPlayInfo.playerID&&(a=gameSDK.sdkPlayInfo.playerID),i.playerid=a,i.emsg=(" 版本号："+gameVersions).replace(/\|/g," "),i.date=n,i.emsg2=e.replace(/\|/g," ");var o=errorServerUrl+"?opcode=90001";ccLog(o);var r=JSON.stringify(i),s=new XMLHttpRequest;s.open("POST",o),s.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),s.send(r),ccLog("发送给服务器错误信息："+r)}}});cc._RF.pop()},{}],GameMemoryManagement:[function(e,t,n){"use strict";cc._RF.push(t,"216d76lZ4tOC7sRH/nkGJy8","GameMemoryManagement");cc.Class({properties:{isInit:null,spriteAtlassDic:null,spriteFrameDic:null,prefabDic:null,jsonDic:null,spineDic:null,fontDic:null,textureDic:null,externalImageDic:null,particleDic:null,soundDic:null,txtDic:null,deleteKeyDic:null},initialize:function(){1!=this.isInit&&(this.isInit=!0,this.spriteFrameDic=new Object,this.spriteAtlassDic=new Object,this.particleDic=new Object,this.externalImageDic=new Object,this.prefabDic=new Object,this.jsonDic=new Object,this.spineDic=new Object,this.textureDic=new Object,this.fntDic=new Object,this.soundDic=new Object,this.txtDic=new Object,this.deleteKeyDic=new Object)},addExternalImage:function(e,t){this.externalImageDic[e]=t},getExternalImage:function(e){return this.externalImageDic[e]},addTexture:function(e,t){this.textureDic[e]=new cc.SpriteFrame(t)},getTexture:function(e){return this.textureDic[e]},addPrefabDic:function(e,t){this.prefabDic[e]=t},getPrefab:function(e){var t=this.prefabDic[e];return null==t?(ccLog("预制件："+e+"没有被加载！"),null):cc.instantiate(t)},addSoundDic:function(e,t){this.soundDic[e]=t},getSound:function(e){return this.soundDic[e]},addFont:function(e,t){this.fntDic[e]=t},getFont:function(e){return this.fntDic[e]},addSpine:function(e,t){this.spineDic[e]=t},getSpine:function(e){var t=this.spineDic[e];return null==t?(ccLog("spine："+e+"没有被加载！"),null):t},addSpriteAtlasDic:function(e,t){if(null==this.spriteFrameDic[e]){this.spriteAtlassDic[e]=t,this.spriteFrameDic[e]=new Object;for(var n=t.getSpriteFrames(),i=0;i<n.length;i++)this.spriteFrameDic[e][n[i].name]=n[i]}},getSpriteAtlas:function(e){return this.spriteAtlassDic[e]},getSpriteFrame:function(e,t){var n=this.spriteFrameDic[e];if(null!=n){var i=n[t];return null==i&&ccLog("图片名字"+t+"不对！"),i}return ccLog("图片名字"+t),ccLog("合图文件"+e+"没有被加载！"),null},addparticleDic:function(e,t){null==this.particleDic[e]&&(this.particleDic[e]=t)},getParticle:function(e){var t=this.particleDic[e];return null==t?(ccLog("particle："+e+"没有被加载！"),null):t},addJsonDic:function(e,t){null!=t&&(this.jsonDic[e]=t.json)},getJsonDic:function(e){var t=this.jsonDic[e];return null!=t&&(this.jsonDic[e]=t),t},addTextAssetDic:function(e,t){null!=t&&(this.txtDic[e]=t)},getTextAssetDic:function(e){var t=this.txtDic[e];return null!=t&&(this.txtDic[e]=t),t},isExistRes:function(e){return null!=this.prefabDic[e]||(null!=this.spriteAtlassDic[e]||(null!=this.jsonDic[e]||(null!=this.spineDic[e]||(null!=this.fntDic[e]||(null!=this.textureDic[e]||(null!=this.soundDic[e]||(null!=this.particleDic[e]||null!=this.txtDic[e])))))))},cleanManagement:function(){}});cc._RF.pop()},{}],GameMove:[function(e,t,n){"use strict";cc._RF.push(t,"075f8ydvoVIUKc+rSEPMMjq","GameMove"),cc.Class({extends:cc.Component,properties:{toX:null,toY:null,speedDic:null,isInit:null,endPos:null,moveComplete:null},onDestroy:function(){this.toX=null,this.toY=null,this.speedDic=null,this.isInit=null,this.endPos=null,this.moveComplete=null},initialize:function(e){this.endPos=cc.v2(e.toX,e.toY),this.toX=e.toX,this.toY=e.toY,this.speedDic=e.speedDic,this.isInit=!0},update:function(e){if(0!=this.isInit){var t=this.endPos.sub(this.node.position).mag();t<=this.speedDic?(this.node.x=this.toX,this.node.y=this.toY,null!=this.moveComplete&&(this.moveComplete(),this.destroy())):(this.node.x=this.node.x+this.speedDic/t*(this.toX-this.node.x),this.node.y=this.node.y+this.speedDic/t*(this.toY-this.node.y))}}}),cc._RF.pop()},{}],GameOverLayer:[function(e,t,n){"use strict";cc._RF.push(t,"f6e5ayRNZlGJ4XJ0UCQVddb","GameOverLayer"),cc.Class({extends:cc.Component,properties:{},onDestroy:function(){},destroyClass:function(){null!=this.node&&this.node.destroy()},initialize:function(){if(engine.gameSound.playEffect(soundurl.gameover),heroData.bestScore<fightControl.curScore){heroData.bestScore=fightControl.curScore;gameSDK.leaderboard.setScoreAsync(fbRankName,fightControl.curScore,null,function(){gameRankData.async_getRankData(rankTypeEm.friendRank,null,1),gameRankData.async_getRankData(rankTypeEm.globalRank,null,1)})}heroData.totalScore=fightControl.curScore,null!=heroData.gameConfig&&(heroData.gameConfig=null),heroData.dailyTaskData.addTaskPro(dailyTaskTypeEm.gameTime),heroData.dailyTaskData.addTaskPro(dailyTaskTypeEm.getSort,fightControl.addScore),fightControl.addScore=0,heroData.achievementData.addProgress(achievementTypeEm.maxScore,fightControl.curScore),heroData.saveData();var e=this.node.getChildByName("overnode");e.opacity=0;var t=cc.spawn(cc.fadeIn(.4),cc.moveBy(.4,0,-88)),n=this;e.runAction(cc.sequence(t,cc.moveBy(.3,0,29),cc.moveBy(.3,0,-7),cc.delayTime(.5),cc.callFunc(function(){n.actionEnd()})))},actionEnd:function(){heroData.saveData(),sceneControl.turnMainScene();this.destroyClass()}}),cc._RF.pop()},{}],GameRankData:[function(e,t,n){"use strict";cc._RF.push(t,"fff03PDuxZJZr4xsmeCNzx9","GameRankData"),window.rankTypeEm=cc.Enum({globalRank:1,friendRank:2,nearbyRank:3,mySelfRank:4});cc.Class({properties:{nearbyRankData:null,globalRankData:null,friendRankData:null,mySelfRankData:null},initialize:function(){this.initialize=function(){},this.nearbyRankData=[],this.globalRankData=[],this.friendRankData=[],this.mySelfRankData=[]},async_getRankData:function(e,t,n){var i;switch(n&&this._setRankData(e,[]),e){case rankTypeEm.globalRank:this.globalRankData.length>0?i=this.globalRankData:this._loadGlobalRankDataBySDK(t);break;case rankTypeEm.friendRank:this.friendRankData.length>0?i=this.friendRankData:this._loadFriendRankDataBySDK(t);break;case rankTypeEm.nearbyRank:this.nearbyRankData.length>0?i=this.nearbyRankData:this._loadNearbyRankDataBySDK(t);break;case rankTypeEm.mySelfRank:this.mySelfRankData.length>0?i=this.mySelfRankData[0]:this._mySelfRankDataBySDK(t)}t&&i&&t(i)},_loadGlobalRankDataBySDK:function(e){var t=this;ccLog("get global rank");gameSDK.leaderboard.getEntriesAsyncInfo(fbRankName,[{count:50,beginNum:0}],function(n){t._setRankData(rankTypeEm.globalRank,n),e&&e(n)})},_loadFriendRankDataBySDK:function(e){var t=this;ccLog("get friend rank"),gameSDK.leaderboard.getConnectedPlayerEntriesAsync(fbRankName,100,0,function(n){t._setRankData(rankTypeEm.friendRank,n),e&&e(n)})},_loadNearbyRankDataBySDK:function(e){var t=this;gameSDK.leaderboard.getPlayerEntryAsync(fbRankName,function(n){var i;null!=n&&(i=1==n.rank?0:n.rank-2,gameSDK.leaderboard.getEntriesAsyncInfo(fbRankName,[{count:50,beginNum:i}],function(n){t._setRankData(rankTypeEm.nearbyRank,n),e&&e(n)}))})},_mySelfRankDataBySDK:function(e){var t=this;gameSDK.leaderboard.getPlayerEntryAsync(fbRankName,function(n){t._setRankData(rankTypeEm.mySelfRank,[n]),e&&e(n)})},_setRankData:function(e,t){switch(e){case rankTypeEm.globalRank:this.globalRankData=t;break;case rankTypeEm.friendRank:this.friendRankData=t;break;case rankTypeEm.nearbyRank:this.nearbyRankData=t;break;case rankTypeEm.mySelfRank:this.mySelfRankData=t}}});cc._RF.pop()},{}],GameRankLayer:[function(e,t,n){"use strict";cc._RF.push(t,"c9696jzlbZNDLE/V2/7dEGS","GameRankLayer");var i=e("GameListLayer"),a=e("GameExternalImage");window.rankPageEm=cc.Enum({world:0,friend:1}),cc.Class({extends:i,properties:{curIndex:null,curData:null,moveLayer:null,curWorldData:null,curFriendData:null,myWorldData:null,isShowMy:null,isShowRank:null},onDestroy:function(){this.removeDataEvent(),this.curIndex=null,this.curData=null,this.moveLayer=null,this.curWorldData=null,this.curFriendData=null,this.myWorldData=null,this.isShowMy=null,this.isShowRank=null},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addDataEvent:function(){engine.eventM.on(event_id.REFRESH_RANK_LAYER,this.refreshRankInfo,this)},removeDataEvent:function(){engine.eventM.off(event_id.REFRESH_RANK_LAYER,this.refreshRankInfo,this)},addEvent:function(){for(var e=0;e<2;++e)this.node.getChildByName("page_"+e).on(cc.Node.EventType.TOUCH_END,this.clickPageBtn,this);this.node.getChildByName("closebtn").on(cc.Node.EventType.TOUCH_END,this.clickCloseBtn,this),this.node.getChildByName("invitebtn").on(cc.Node.EventType.TOUCH_END,this.clickInviteBtn,this)},removeEvent:function(){for(var e=0;e<2;++e)this.node.getChildByName("page_"+e).off(cc.Node.EventType.TOUCH_END,this.clickPageBtn,this);this.node.getChildByName("closebtn").off(cc.Node.EventType.TOUCH_END,this.clickCloseBtn,this),this.node.getChildByName("invitebtn").off(cc.Node.EventType.TOUCH_END,this.clickInviteBtn,this)},initialize:function(){this.isShowMy=!1,this.isShowRank=!1,this.curIndex=rankPageEm.world,this.moveLayer=this.node.getChildByName("scr").getComponent(cc.ScrollView).content,this.addEvent(),this.addDataEvent(),this.refreshView(),this.clearMyShow(),gameRankData.async_getRankData(rankTypeEm.mySelfRank,this.setMyWorldData.bind(this),0),gameRankData.async_getRankData(rankTypeEm.globalRank,this.setCurWorldData.bind(this),0),gameRankData.async_getRankData(rankTypeEm.friendRank,this.setCurFriendData.bind(this),0)},setMyWorldData:function(e){ccLog("设置我的世界信息"),this.myWorldData=e},setCurWorldData:function(e){ccLog("设置世界排行榜信息"),this.curWorldData=e},setCurFriendData:function(e){ccLog("设置好友排行榜信息"),this.curFriendData=e},refreshView:function(){this.refreshBtnInfo()},clearMyShow:function(){this.node.getChildByName("self").active=!1},refreshBtnInfo:function(){for(var e=0;e<2;++e){var t=this.node.getChildByName("page_"+e),n=t.getChildByName("txt");e==this.curIndex?(t.getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(loginLoadImage.scaleimg1,"scaleimg21"),n.color=cc.color(255,255,255),n.getComponent(cc.LabelOutline).enabled=!0):(t.getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(loginLoadImage.scaleimg1,"scaleimg22"),n.color=cc.color(181,212,240),n.getComponent(cc.LabelOutline).enabled=!1)}},refreshRankInfo:function(){var e=[];e=this.curIndex==rankPageEm.world?this.curWorldData:this.curFriendData,this.clear();this.curData=[];for(var t=1,n=0;n<e.length;n++){var i=e[n];i.score>rankMaxScore||(i.rank=t,this.curData.push(i),t++)}for(n=0;n<this.curData.length;n++)this.curData[n].pos=-61-135*n;this.moveLayer.y=0,this.moveLayer.height=135*this.curData.length+20;var a=this,o=new Object;o.initPoint=0,o.borderPos1=65,o.borderPos2=-790,o.nodeDatas=this.curData;o.createUIFun=function(e){var t=engine.memory.getPrefab(nextLoadPrefab.rank_node_prefab);return t.addComponent("GameRankNode").initialize(e,this),t.y=e.pos,a.moveLayer.addChild(t),t},this.setData(o)},update:function(){null!=this.curData&&this.curData.length>0&&this.updateView(this.moveLayer.y),this.showRankView(),this.showMyInfo()},showRankView:function(){1!=this.isShowRank&&(this.curIndex==rankPageEm.world&&null==this.curWorldData||this.curIndex==rankPageEm.friend&&null==this.curFriendData||(this.isShowRank=!0,this.refreshRankInfo()))},showMyInfo:function(){if(1!=this.isShowMy){var e=null;if(this.curIndex==rankPageEm.world)e=this.myWorldData;else{if(null==this.curFriendData)return;for(var t=0;t<this.curFriendData.length;t++){var n=this.curFriendData[t];if(n.playerID==gameSDK.sdkPlayInfo.playerID){e=n;break}}if(null==e&&null==this.myWorldData)return}if(null!=e){this.isShowMy=!0;var i=this.node.getChildByName("self");i.active=!0;var o=i.getChildByName("rankimg"),r=i.getChildByName("ranknum");e.rank<=3?(r.active=!1,o.active=!0,o.getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.nextloadimg1,"rank_"+e.rank)):(r.active=!0,o.active=!1,r.getComponent(cc.Label).string=e.rank);var s=i.getChildByName("headbg"),c=new a;c.loadImage(e.photo,null,s.getContentSize().width-6,s.getContentSize().height-6),s.addChild(c,-1),i.getChildByName("name").getComponent(cc.Label).string=e.name,i.getChildByName("score").getComponent("GameArtWord").setString(""+e.score)}}},clickPageBtn:function(e){var t=parseInt(e.target.name.split("_")[1]);t!=this.curIndex&&(this.isShowMy=!1,this.isShowRank=!1,this.curData=[],this.clearMyShow(),this.clear(),this.curIndex=t,this.refreshView())},clickInviteBtn:function(){gameSDK.faceBookUpdateAsync.sendFaceBookFriend(getSendFriendData())},clickCloseBtn:function(){this.destroyClass()}}),cc._RF.pop()},{GameExternalImage:"GameExternalImage",GameListLayer:"GameListLayer"}],GameRankNode:[function(e,t,n){"use strict";cc._RF.push(t,"c1bd6KAemBPvrxU/YW5ahWL","GameRankNode");var i=e("GameExternalImage");cc.Class({extends:cc.Component,properties:{},onDestroy:function(){},destroyClass:function(){this.removeEvent(),this.node.destroy()},initialize:function(e){this.addEvent(),this.initUI(e)},addEvent:function(){},removeEvent:function(){},initUI:function(e){var t=this.node.getChildByName("rankimg"),n=this.node.getChildByName("ranknum");e.rank<=3?(n.active=!1,t.active=!0,t.getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.nextloadimg1,"rank_"+e.rank)):(n.active=!0,t.active=!1,n.getComponent(cc.Label).string=e.rank);var a=this.node.getChildByName("headbg"),o=new i;o.loadImage(e.photo,null,a.getContentSize().width-6,a.getContentSize().height-6),a.addChild(o,-1),this.node.getChildByName("name").getComponent(cc.Label).string=myGameGetShortName(e.name),this.node.getChildByName("score").getComponent("GameArtWord").setString(""+e.score)}}),cc._RF.pop()},{GameExternalImage:"GameExternalImage"}],GameScene:[function(e,t,n){"use strict";cc._RF.push(t,"0829aYj3k9MmZgxQw+Ghy5W","GameScene");var i=e("LoadControl");cc.Class({extends:cc.Component,properties:{},onLoad:function(e){var t=this;this.node.addTipsWindow=function(e){t.addTipsWindow(e)},this.node.showReward=function(e){t.showReward(e)},ccLog(".....进入场景onLoad...."),this.loadRes(e)},start:function(){ccLog(".....进入场景start....")},loadRes:function(e){var t=this,n=new i,a=new Object;a.resources=this.getRes(),a.setLoadPercent=function(e){t.setLoadPercent(e)},a.analysisFun=function(){t.analysis()},a.completeCallbackFun=function(){t.loadComplete()},a.loadErrorCallBackFun=function(){},null!=e&&(null!=e.minPercent&&(a.minPercent=e.minPercent),null!=e.maxPercent&&(a.maxPercent=e.maxPercent)),n.initialize(a),n.loadRes()},initialize:function(){ccLog(".....进入场景initialize...."),sceneControl.curSceneType!=SceneType.login&&this.addSceneMaskLayer(),engine.CPUM.openCPU();var e=this;this.node.addTips=function(t){e.addTips(t)},this.node.addNewbieLayer=function(t){e.addNewbieLayer(t)},this.node.removeNewbieLayer=function(t){e.removeNewbieLayer(t)}},onDestroy:function(){null!=this.node&&null!=this.node.addTips&&(this.node.addTips=null),null!=this.node&&null!=this.node.addTipsWindow&&(this.node.addTipsWindow=null),null!=this.node&&(this.node.resLoadComplete=null)},loadComplete:function(){null!=this.node&&(this.node.resLoadComplete=!0)},getRes:function(){return[]},analysis:function(){},setLoadPercent:function(e){},addSceneMaskLayer:function(){},addTipsWindow:function(e){if(null==this.node.getChildByName("tipsWindowNode")){var t=new Object;t.str=e.str,t.callFun=function(){null!=e.callFunc&&e.callFunc()}}},addTips:function(e){},removeNewbieLayer:function(){},addNewbieLayer:function(e){this.removeNewbieLayer()},showReward:function(e){for(var t=0;t<e.length;t++)this.addReward(e[t],t)},addReward:function(e,t){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=getItemSpriteFrame(e.id),n.scale=.4,n.opacity=0;var i=new cc.Node;i.anchorX=0,i.scale=2;var a=i.addComponent(cc.Label);a.string="+"+e.num,a.font=engine.memory.getFont(needLoadFont.fntttf1_font),a.fontSize=40,a.horizontalAlign=cc.Label.HorizontalAlign.LEFT,a.verticalAlign=cc.Label.VerticalAlign.CENTER,i.x=136,n.addChild(i);var o=engine.gameAdapterInfo.getPercentageX(.5)-50,r=engine.gameAdapterInfo.getPercentageY(.5)+80;engine.gameAdapterInfo.addSceneNode(n,o,r,UIzIndexInfo.UIRewardIndex);var s=cc.spawn(cc.moveBy(.4,0,100),cc.fadeOut(.4));n.runAction(cc.sequence(cc.delayTime(.4*t),cc.fadeIn(.01),cc.moveBy(.8,0,200),s,cc.removeSelf()))},update:function(e){}}),cc._RF.pop()},{LoadControl:"LoadControl"}],GameSoundButton:[function(e,t,n){"use strict";cc._RF.push(t,"8225d9PnTZOJbX7Y6ncL9e9","GameSoundButton"),cc.Class({extends:cc.Component,properties:{_soundBtn:null,_btnSpriteUrl:null,btnSpriteUrl:{type:cc.SpriteFrame,set:function(e){this.refreshBtnTexture(e)},get:function(){return this._btnSpriteUrl}},_soundIconSp:null,_closeSpriteUrl:null,closeSpriteUrl:{type:cc.SpriteFrame,set:function(e){this.refreshSoundTexture(e,1)},get:function(){return this._closeSpriteUrl}},_openSpriteUrl:null,openSpriteUrl:{type:cc.SpriteFrame,set:function(e){this.refreshSoundTexture(e,0)},get:function(){return this._openSpriteUrl}},_isInit:null},onLoad:function(){this.initialize()},onDestroy:function(){this._soundBtn.off(cc.Node.EventType.TOUCH_END,this.clickSoundBtnFun,this),this._soundBtn=null,this._btnSpriteUrl=null,this._soundIconSp=null,this._closeSpriteUrl=null,this._openSpriteUrl=null,this._curSoundType=null,this._isInit=null},initialize:function(){1!=this._isInit&&(this._isInit=!0,this.createBtn(),this.createSoundIcon(),this.iconChangeTexture(engine.gameSound.stopSound))},createBtn:function(){if(null==this._soundBtn){this._soundBtn=new cc.Node,this._soundBtn.addComponent(cc.Sprite);var e=this._soundBtn.addComponent(cc.Button);e.transition=cc.Button.Transition.SCALE,e.zoomScale=.9,this.node.addChild(this._soundBtn)}this._soundBtn.on(cc.Node.EventType.TOUCH_END,this.clickSoundBtnFun,this)},clickSoundBtnFun:function(){1==engine.gameSound.stopSound?engine.gameSound.openMusic():engine.gameSound.stopMusic(),"undefined"!=typeof changeMusic&&null!=changeMusic&&changeMusic(),this.iconChangeTexture(engine.gameSound.stopSound)},createSoundIcon:function(){null==this._soundIconSp&&(this._soundIconSp=new cc.Node,this._soundIconSp.addComponent(cc.Sprite),this._soundBtn.addChild(this._soundIconSp))},refreshBtnTexture:function(e){this._btnSpriteUrl=e,this.createBtn(),this._soundBtn.getComponent(cc.Sprite).spriteFrame=this._btnSpriteUrl},iconChangeTexture:function(e){this._soundIconSp.getComponent(cc.Sprite).spriteFrame=1==e?this._closeSpriteUrl:this._openSpriteUrl},refreshSoundTexture:function(e,t){null!=this._soundIconSp&&(this._soundIconSp.destroy(),this._soundIconSp=null),1==t?this._closeSpriteUrl=e:this._openSpriteUrl=e,this.createBtn(),this.createSoundIcon(),this.iconChangeTexture(t)}}),cc._RF.pop()},{}],GameSoundLoad:[function(e,t,n){"use strict";cc._RF.push(t,"39d59sv/SRKu5h8OcJV5ZYm","GameSoundLoad"),window.loadSoundDic=new Object;cc.Class({properties:{url:null,playSound:null},loadEffectSound:function(e){null==loadSoundDic[e]&&(loadSoundDic[e]=!0,cc.loader.loadRes(e,cc.AudioClip,function(t,n){null!=n&&n instanceof cc.AudioClip&&engine.memory.addSoundDic(e,n)}))},loadBackgroundSound:function(e){var t=this;this.url=e,null==loadSoundDic[e]&&(loadSoundDic[e]=new Object,loadSoundDic[e].loadCount=1,loadSoundDic[e].isNowLoad=!1),loadSoundDic[e].loadCount>=5||0==loadSoundDic[e].isNowLoad&&(loadSoundDic[e].isNowLoad=!0,loadSoundDic[e].loadCount++,cc.loader.loadRes(e,cc.AudioClip,function(n,i){loadSoundDic[e].isNowLoad=!1,null!=i&&i instanceof cc.AudioClip&&engine.memory.addSoundDic(e,i),null!=t.playSound&&(t.playSound(t.url),t.playSound=null)}))}});cc._RF.pop()},{}],GameSound:[function(e,t,n){"use strict";cc._RF.push(t,"44be7DXRgVDU7yA86scaIhh","GameSound");var i=e("GameSoundLoad");cc.Class({properties:{isInit:null,soundVolume:null,backgroundSoundVolume:null,effectSoundVolume:null,stopSound:null,stopBackgroundSound:null,stopEffectSound:null,playBackgroundSoundUrl:null,lastTimeDic:null,loadSoundDic:null},initialize:function(){1!=this.isInit&&(this.isInit=!0,this.soundVolume=1,this.backgroundSoundVolume=1,this.effectSoundVolume=1,this.stopBackgroundSound=0,this.stopEffectSound=0,this.stopSound=0,this.playBackgroundSoundUrl="",this.lastTimeDic=new Object,this.loadSoundDic=new Object)},stopBackgroundMusic:function(){this.stopBackgroundSound=1,cc.audioEngine.setMusicVolume(0)},openBackgroundMusic:function(){this.stopBackgroundSound=0,cc.audioEngine.setMusicVolume(this.backgroundSoundVolume)},changeBackgroundMusicState:function(){1==this.stopBackgroundSound?this.openBackgroundMusic():this.stopBackgroundMusic()},stopEffectMusic:function(){this.stopEffectSound=1,cc.audioEngine.setEffectsVolume(0)},openEffectMusic:function(){this.stopEffectSound=0,cc.audioEngine.setEffectsVolume(this.effectSoundVolume)},changeEffectMusicState:function(){1==this.stopEffectSound?this.openEffectMusic():this.stopEffectMusic()},stopMusic:function(){this.stopSound=1,this.stopBackgroundMusic(),this.stopEffectMusic()},openMusic:function(){this.stopSound=0,this.openBackgroundMusic(),this.openEffectMusic()},playEffect:function(e){var t=engine.gameTime.localTime;if(!(null!=this.lastTimeDic[e]&&t-engineGlobal.playEffectMinTime<=this.lastTimeDic[e])){this.lastTimeDic[e]=t;var n=engine.memory.getSound(e);if(null!=n)cc.audioEngine.playEffect(n);else(new i).loadEffectSound(e)}},playMusic:function(e,t){null==t&&(t=!0);var n=this;this.playMusicUrl=e;var a=engine.memory.getSound(e);if(null==a){var o=new i;o.playSound=function(e){if(e==n.playMusicUrl){var i=engine.memory.getSound(e);null!=i&&cc.audioEngine.playMusic(i,t)}},o.loadBackgroundSound(e)}else cc.audioEngine.playMusic(a,t)}});cc._RF.pop()},{GameSoundLoad:"GameSoundLoad"}],GameStrongData:[function(e,t,n){"use strict";cc._RF.push(t,"a0f0ffF4epCMbjK0wAx3gvQ","GameStrongData"),window.strongerAddTypeEm=cc.Enum({addTime:1,addScore:2,addComboScore:3,addComboTime:4,addItem:6}),cc.Class({extends:cc.Component,properties:{strongLvObj:null,maxLevelObj:null},initialize:function(e){this.maxLevelObj={};var t=getDicData("stronger");for(var n in t){var i=0,a=t[n];for(var o in a)i<parseInt(a[o].level)&&(i=parseInt(a[o].level));this.maxLevelObj[n]=i}null==e&&(e={}),this.strongLvObj=e},getStrongerData:function(e){var t=this.strongLvObj[e];return null==t&&(t=0),getDicData("stronger",e,t)},getStrongerMax:function(e){return this.maxLevelObj[e]},lvUpStronger:function(e){null==this.strongLvObj[e]&&(this.strongLvObj[e]=0);var t=this.getStrongerMax(e);return this.strongLvObj[e]<t&&(this.strongLvObj[e]+=1,!0)},getStrongerPush:function(){var e=getDicData("stronger");for(var t in e)if(1==this.getStrongerTypePush(t))return!0;return!1},getStrongerTypePush:function(e){var t=this.getStrongerData(e);return!(t.level>=this.getStrongerMax(e))&&heroData.diamond>=t.nextcost},getStrongAddValue:function(e){return this.getStrongerData(e).value},getSaveData:function(){return this.strongLvObj}}),cc._RF.pop()},{}],GameSurpriseLayer:[function(e,t,n){"use strict";cc._RF.push(t,"2f93c1PGttDg6D4xRThqzwL","GameSurpriseLayer");window.surpriseOpenTypeEm=cc.Enum({mainLayer:0,other:1}),cc.Class({extends:cc.Component,properties:{initPosArr:null,centerPos:null,getRewardList:null,openType:null,cardComponentArr:null,isCanClick:null,curChoose:null},onDestroy:function(){this.initPosArr=null,this.centerPos=null,this.getRewardList=null,this.openType=null,this.cardComponentArr=null,this.isCanClick=null,this.curChoose=null},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addEvent:function(){this.node.getChildByName("nobtn").on(cc.Node.EventType.TOUCH_END,this.clickNotBtn,this),this.node.getChildByName("watchbtn").on(cc.Node.EventType.TOUCH_END,this.clickWatchBtn,this)},removeEvent:function(){this.node.getChildByName("nobtn").off(cc.Node.EventType.TOUCH_END,this.clickNotBtn,this),this.node.getChildByName("watchbtn").on(cc.Node.EventType.TOUCH_END,this.clickWatchBtn,this)},initialize:function(e){this.isCanClick=!1,this.openType=e,this.node.getChildByName("nobtn").active=!1,this.node.getChildByName("watchbtn").active=!1,this.getPosConfig(),this.getSurpriseReward(),this.addCardNode(),this.addEvent(),this.turnOverBack()},getPosConfig:function(){this.initPosArr=[];for(var e=0;e<6;e++){var t=e%3*235-235,n=224-320*Math.floor(e/3);this.initPosArr.push(cc.v2(t,n))}this.centerPos=cc.v2(0,-450)},getSurpriseReward:function(){this.getRewardList=[];var e=getDicData(dataJson.mysteriousgift_json),t=0;for(var n in e)t+=e[n].weight;for(var i=0;i<6;i++){var a=GameTool.getRandomInt(1,t),o=0;for(var n in e){var r=e[n];if(a<=(o+=r.weight)){this.getRewardList.push(getItemConfig(r.item,r.num));break}}}},addCardNode:function(){this.cardComponentArr=[];for(var e=0;e<6;e++){var t=engine.memory.getPrefab(nextLoadPrefab.surprise_card_node_prefab),n=t.addComponent("GameSurpriseNode");n.initialize(e,this),t.setPosition(this.initPosArr[e]),this.node.addChild(t),this.cardComponentArr.push(n)}},turnOverBack:function(){var e=this;this.node.runAction(cc.sequence(cc.delayTime(.7),cc.callFunc(function(){for(var t=0;t<e.cardComponentArr.length;t++)e.cardComponentArr[t].turnOverBack()})))},mergeCard:function(){var e=this;this.node.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){for(var t=0;t<e.cardComponentArr.length;t++)e.cardComponentArr[t].mergeCard()})))},shuffleAction:function(){var e=this;this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){e.dealCard()})))},dealCard:function(){this.getRewardList.sort(function(){return Math.random()-.5});for(var e=0;e<this.cardComponentArr.length;e++)this.cardComponentArr[e].dealCard(this.initPosArr[e])},actionEnd:function(){this.isCanClick=!0},clickReward:function(e){if(null==this.curChoose){this.isCanClick=!1,this.curChoose=e;var t=this;this.cardComponentArr[e].turnOverFront(function(){t.showBtn(),t.cardComponentArr[e].addChooseAction()})}},showBtn:function(){this.node.getChildByName("nobtn").active=!0,this.node.getChildByName("watchbtn").active=!0},turnAll:function(){var e=this;this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){sceneControl.showReward(e.getRewardList),e.destroyClass()})))},clickWatchBtn:function(){if(gaLogEvent.logByDate("卡牌",1),1===openModuleValue.forFBCheck||1==openModuleValue.noAD)this.successFun();else{var e=videoAdKeyList[parseInt(Math.random()*videoAdKeyList.length)];gameSDK.faceBookAdvertisement.showRewardVideoAd(e,this.successFun.bind(this))}},successFun:function(){heroData.addItemByObj(this.getRewardList),this.openType==surpriseOpenTypeEm.mainLayer&&heroData.rewardSurprise(),heroData.saveData();for(var e=0,t=0;t<this.cardComponentArr.length;t++)t!=this.curChoose&&(5==++e?this.cardComponentArr[t].turnOverFront(this.turnAll.bind(this)):this.cardComponentArr[t].turnOverFront())},clickNotBtn:function(){gaLogEvent.logByDate("卡牌",2);var e=this.getRewardList[this.curChoose];heroData.addItemByObj([e]),sceneControl.showReward([e]),this.openType==surpriseOpenTypeEm.mainLayer&&heroData.rewardSurprise(),heroData.saveData(),this.destroyClass()}}),cc._RF.pop()},{}],GameSurpriseNode:[function(e,t,n){"use strict";cc._RF.push(t,"cd5dapJ4upAjomDP6TGlSL0","GameSurpriseNode"),cc.Class({extends:cc.Component,properties:{index:null,parentLayer:null},onDestroy:function(){this.index=null,this.parentLayer=null},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addEvent:function(){this.node.getChildByName("cardbg").on(cc.Node.EventType.TOUCH_END,this.clickGetBtn,this)},removeEvent:function(){this.node.getChildByName("cardbg").off(cc.Node.EventType.TOUCH_END,this.clickGetBtn,this)},initialize:function(e,t){this.index=e,this.parentLayer=t,this.addEvent(),this.node.getChildByName("cardbg").getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.nextloadimg1,"card1"),this.refreshLayer()},refreshLayer:function(){var e=this.parentLayer.getRewardList[this.index];this.node.getChildByName("itemicon").getComponent(cc.Sprite).spriteFrame=getItemSpriteFrame(e.id),this.node.getChildByName("numword").getComponent("GameArtWord").setString(""+e.num)},turnOverBack:function(){var e=this;this.node.runAction(cc.sequence(cc.scaleTo(.3,0,1),cc.callFunc(function(){e.node.getChildByName("itemicon").active=!1,e.node.getChildByName("numword").active=!1,e.node.getChildByName("cardbg").getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.nextloadimg1,"card2")}),cc.scaleTo(.3,1,1),cc.callFunc(function(){5==e.index&&e.parentLayer.mergeCard()})))},mergeCard:function(){var e=this;this.node.runAction(cc.sequence(cc.moveTo(.5,this.parentLayer.centerPos),cc.callFunc(function(){5==e.index&&e.parentLayer.shuffleAction()})))},dealCard:function(e){this.refreshLayer();var t=this;this.node.runAction(cc.sequence(cc.delayTime(.35*this.index),cc.moveTo(.3,e),cc.callFunc(function(){5==t.index&&t.parentLayer.actionEnd()})))},turnOverFront:function(e){var t=this;this.node.runAction(cc.sequence(cc.scaleTo(.3,0,1),cc.callFunc(function(){t.node.getChildByName("itemicon").active=!0,t.node.getChildByName("numword").active=!0,t.node.getChildByName("cardbg").getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.nextloadimg1,"card1")}),cc.scaleTo(.3,1,1),cc.callFunc(function(){null!=e&&e()})))},addChooseAction:function(){var e=new cc.Node,t=e.addComponent(sp.Skeleton);GameTool.setSkeleton(t,nextLoadSpine.mysterious,"mysterious",1,!0),this.node.addChild(e,-1)},clickGetBtn:function(){1==this.parentLayer.isCanClick&&this.parentLayer.clickReward(this.index)}}),cc._RF.pop()},{}],GameTextLanguage:[function(e,t,n){"use strict";cc._RF.push(t,"b843axXZeZGULWgNuP8T98G","GameTextLanguage"),cc.Class({extends:cc.Component,properties:{_txtKey:0,txtKey:{set:function(e){this._txtKey=e},get:function(){return this._txtKey}}},onLoad:function(){if(null!=engine){var e=engine.gameData.dataDic[dataJson.language_json];null==e[this._txtKey]&&(ccLog("这个节点的翻译ID填错了  "+this.node.name),ccLog("父节点是这个  "+this.node._parent.name),ccLog("在这个预制件里面  "+this.node._prefab.root.name)),this.node.getComponent(cc.Label).string=e[this._txtKey].content}}}),cc._RF.pop()},{}],GameTextureLoad:[function(e,t,n){"use strict";cc._RF.push(t,"e8039KSOWJIp4XMprADSQM5","GameTextureLoad"),cc.Class({extends:cc.Component,properties:{_textureRes:null,textureUrl:{type:cc.Texture2D,set:function(e){this._textureRes=e},get:function(){return this._textureRes}}},onLoad:function(){this.loadTexture()},loadTexture:function(){this.node.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this._textureRes)}}),cc._RF.pop()},{}],GameTime:[function(e,t,n){"use strict";cc._RF.push(t,"87c99WRZvdMtrVqkIePM1hS","GameTime"),window.timeFormatTypeEm=cc.Enum({secondType:1,minuteType:2,hourType:3,dayType:4,objectType:5}),cc.Class({extends:cc.Component,properties:{isInit:null,localTime:null,updateCount:null,checkTime:null,serverTime:null,updateManageFun:null},initialize:function(){if(1!=this.isInit){this.checkTime=0,this.serverTime=0,this.isInit=!0;var e=new Date;this.localTime=e.getTime(),this.updateCount=0,this.setFrameRate(engineGlobal.gameFrame)}},updateTime:function(e){if(this.localTime=this.localTime+parseInt(1e3*e),this.updateCount++,this.updateCount>engineGlobal.gameFrame){this.updateCount=0;var t=new Date;this.localTime=t.getTime()}null!=this.updateManageFun&&this.updateManageFun(this.localTime,e)},setFrameRate:function(e){this.updateCount=0,engineGlobal.gameFrame=e,cc.game.setFrameRate(e),this.unschedule(this.updateTime),this.schedule(this.updateTime,1/e)},refreshLocal:function(){var e=new Date;this.localTime=e.getTime()},formatTime:function(e,t){var n="";if(e<=0)switch(t){case timeFormatTypeEm.dayType:n="0d 00:00:00";break;case timeFormatTypeEm.hourType:n="00:00:00";break;case timeFormatTypeEm.minuteType:n="00:00";break;case timeFormatTypeEm.secondType:n="00";break;case timeFormatTypeEm.objectType:n={day:0,hour:0,minute:0,second:0};break;default:n="00:00:00"}else{var i=Math.floor(e/1e3),a="0";i>86400&&(i-=24*(a=Math.floor(i/3600/24))*3600);var o=Math.floor(i/3600);o<10&&(o="0"+o);var r=Math.floor(i%3600/60);r<10&&(r="0"+r);var s=Math.floor(i%60);switch(s<10&&(s="0"+s),t){case timeFormatTypeEm.dayType:n=a+"d "+o+":"+r+":"+s;break;case timeFormatTypeEm.hourType:n=o+":"+r+":"+s;break;case timeFormatTypeEm.minuteType:n=r+":"+s;break;case timeFormatTypeEm.secondType:n=s;break;case timeFormatTypeEm.objectType:n={day:a,hour:o,minute:r,second:s};break;default:n=o+":"+r+":"+s}}return n},getDayToString:function(){var e=new Date;return e.getFullYear().toString()+"-"+e.getMonth().toString()+"-"+e.getDate().toString()},getTimeDate:function(e){var t=null;t=null==e?new Date:new Date(e);var n={};return n.year=t.getFullYear(),n.monthNum=t.getMonth()+1,n.monthNum<10&&(n.monthNum="0"+n.monthNum),n.dayNum=t.getDate(),n.dayNum<10&&(n.dayNum="0"+n.dayNum),n.hourNum=t.getHours(),n.hourNum<10&&(n.hourNum="0"+n.hourNum),n.minNum=t.getMinutes(),n.minNum<10&&(n.minNum="0"+n.minNum),n.second=t.getSeconds(),n.second<10&&(n.second="0"+n.second),n},setCheckTime:function(e){this.checkTime=this.localTime,this.serverTime=e},getSeverTime:function(){return this.serverTime+(this.localTime-this.checkTime)/1e3}}),cc._RF.pop()},{}],GameTool:[function(e,t,n){"use strict";cc._RF.push(t,"90c35QEXWtIhK6ryEGAZzqz","GameTool"),window.GameTool=new Object,GameTool.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},GameTool.createSpineSkeleton=function(e,t,n,i){ccLog("spine动画"+e);var a=new cc.Node,o=a.addComponent(sp.Skeleton),r=engine.memory.getSpine(e);return o.skeletonData=r,o.animation=t,o.timeScale=n,o.loop=i,{node:a,skeleton:o}},GameTool.setSkeleton=function(e,t,n,i,a){var o=engine.memory.getSpine(t);e.skeletonData=o,e.animation=n,e.timeScale=i,e.loop=a},GameTool.createSpirteNode=function(e,t){var n=new cc.Node,i=n.addComponent(cc.Sprite);return i.spriteFrame=engine.memory.getSpriteFrame(e,t),{node:n,sprite:i}},GameTool.getAngleByPoint=function(e,t){var n=0,i=t.x-e.x,a=t.y-e.y;return n=Math.atan2(a,i),(n*=180/Math.PI)<0&&(n+=360),n%=360},GameTool.getRadianByPoint=function(e,t){var n=0,i=t.x-e.x,a=t.y-e.y;return(n=Math.atan2(i,a))<0&&(n+=2*Math.PI),n},GameTool.getDirByPoint=function(e,t){var n=2,i=GameTool.getAngleByPoint(e,t);return i>=0&&i<=45&&(n=6),i>45&&i<=135&&(n=8),i>135&&i<=225&&(n=4),i>225&&i<=315&&(n=2),i>315&&i<=360&&(n=6),n},GameTool.arrIsIndexOf=function(e,t,n){for(var i=0;i<e.length;i++)if(null==n){if(e[i]==t)return!0}else if(e[i][n]==t)return!0;return!1},GameTool.analysisJsonData=function(e){for(var t=0;t<e.length;t++)engine.gameData.analysisJsonData(e[t],e[t])},GameTool.timeStrToData=function(e,t){var n="/";null!=t&&(n=t);var i=new Date(1e3*e);return i.getFullYear().toString()+n+(i.getMonth()+1).toString()+n+i.getDate().toString()},GameTool.getSortWeight=function(e,t,n,i){for(var a=0;a<n.length;a++)if(e[n[a]]!=t[n[a]])return 1==i?e[n[a]]-t[n[a]]:t[n[a]]-e[n[a]];return 0},cc._RF.pop()},{}],Game:[function(e,t,n){"use strict";cc._RF.push(t,"5de12nkyL1NWbhEROXk9EJS","Game");var i=e("HeroData"),a=e("SceneControl");window.isGameInit=!1,window.sceneControl=null,window.heroData=null,window.isLogin=!1,window.gameInit=function(){0==isGameInit&&(isGameInit=!0,initEngine(),initRes(),initGameSDK(),heroData=new i,sceneControl=new a)},cc._RF.pop()},{HeroData:"HeroData",SceneControl:"SceneControl"}],GradeLayer:[function(e,t,n){"use strict";cc._RF.push(t,"ee465ubiwJLeaLmEbUuVTRa","GradeLayer");var i=e("PublicLayer");cc.Class({extends:i,properties:{},onDestroy:function(){},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},initialize:function(){var e={bg:{y:0,width:652,height:891},bg2:{y:13,width:604,height:835},title:{y:442,txt:getLanguageDic(1042)},close:{x:307,y:436}};this.addEvent();var t=getDicData(dataJson.grade_json),n=0;for(var i in t){var a=engine.memory.getPrefab(nextLoadPrefab.grade_node_prefab);a.addComponent("GradeNode").initialize(i,this),a.y=297-256*parseInt(n/4),a.x=8==n?0:n%4*147-220,this.node.getChildByName("activenode").addChild(a),n++}this._super(e)}}),cc._RF.pop()},{PublicLayer:"PublicLayer"}],GradeNode:[function(e,t,n){"use strict";cc._RF.push(t,"30818bvfUpH2ZQSWPWr1aLK","GradeNode"),cc.Class({extends:cc.Component,properties:{gradeID:null,parentLayer:null},onDestroy:function(){this.gradeID=null,this.parentLayer=null},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addEvent:function(){this.node.getChildByName("activebtn").on(cc.Node.EventType.TOUCH_END,this.clickActiveBtn,this)},removeEvent:function(){this.node.getChildByName("activebtn").off(cc.Node.EventType.TOUCH_END,this.clickActiveBtn,this)},initialize:function(e,t){this.gradeID=e,this.parentLayer=t,this.addEvent();var n=getDicData(dataJson.grade_json,this.gradeID);this.node.getChildByName("gradeicon").getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(needLoadImage.mastloadimg1,"gradeicon"+this.gradeID);var i="";i=""==n.score2||null==n.score2?n.score1+"+":n.score1+"-"+n.score2,this.node.getChildByName("scoretxt").getComponent(cc.Label).string=i,this.refreshLayer()},refreshLayer:function(){var e=this.node.getChildByName("activebtn"),t=e.getChildByName("acsp").getComponent(cc.Sprite);switch(heroData.gradeData.getRewardStateByID(this.gradeID)){case rewardStateEm.already:e.getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(loginLoadImage.publicimg1,"button1"),t.spriteFrame=engine.memory.getSpriteFrame(loginLoadImage.publicimg1,"okimg");break;case rewardStateEm.canReward:e.getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(loginLoadImage.publicimg1,"button2"),t.spriteFrame=engine.memory.getSpriteFrame(needLoadLanguageImage.language1,"activation1");break;case rewardStateEm.notCan:e.getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(loginLoadImage.publicimg1,"button3"),t.spriteFrame=engine.memory.getSpriteFrame(needLoadLanguageImage.language1,"activation2")}},clickActiveBtn:function(){heroData.gradeData.getRewardStateByID(this.gradeID)==rewardStateEm.canReward&&(gaLogEvent.logByDate("领取进阶",this.gradeID),heroData.raceLampData.addRaceLampData(this.gradeID),heroData.gradeData.gradeReward(this.gradeID),heroData.saveData(),this.refreshLayer(),engine.eventM.emit(event_id.REFRESH_GRADE_PUSH))}}),cc._RF.pop()},{}],GradeUpLayer:[function(e,t,n){"use strict";cc._RF.push(t,"2e618EmSjBPirPl3D8lhtHI","GradeUpLayer"),cc.Class({extends:cc.Component,properties:{},onDestroy:function(){},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addEvent:function(){this.node.getChildByName("surpassbg").on(cc.Node.EventType.TOUCH_END,this.clickCloseBtn,this)},removeEvent:function(){this.node.getChildByName("surpassbg").off(cc.Node.EventType.TOUCH_END,this.clickCloseBtn,this)},initialize:function(){this.addEvent();var e=heroData.gradeData.getCurGradeByScore();this.node.getChildByName("gradeicon").getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(needLoadImage.mastloadimg1,"gradeicon"+e);var t=this.node.getChildByName("des").getComponent(cc.Label),n=getDicData(dataJson.grade_json,e+1);if(null==n)t.string=getLanguageDic(1044);else{var i=n.score1+1-heroData.bestScore;t.string=getLanguageDic(1041).replace("%d",i).replace("%l",n.name)}this.node.getChildByName("light1").runAction(cc.rotateBy(4,360).repeatForever()),this.node.getChildByName("light2").runAction(cc.spawn(cc.rotateBy(6,360),cc.sequence(cc.fadeTo(1,50),cc.fadeTo(1,255))).repeatForever())},clickCloseBtn:function(){isHaveSurpassLayer(),this.destroyClass()}}),cc._RF.pop()},{}],GridData:[function(e,t,n){"use strict";cc._RF.push(t,"a4af4e/bDhB56EMx/iBBr1s","GridData"),window.gridTypeEm=cc.Enum({question:-2,normal:0}),cc.Class({extends:cc.Component,properties:{gridID:null,gridPos:null,otherType:null},initialize:function(e,t){this.gridID=e,this.gridPos=t,this.otherType=gridTypeEm.normal},clear:function(){this.gridID=0},refreshGridID:function(e){this.gridID=e},refreshGridOther:function(e){this.otherType=e},isItem:function(){return this.gridID==itemIDConfig.bomb||this.gridID==itemIDConfig.tips||this.gridID==itemIDConfig.resort||this.gridID==itemIDConfig.addTime},isParry:function(){return-1==this.gridID},isUsable:function(){return this.gridID>0},isEmpty:function(){return 0==this.gridID}}),cc._RF.pop()},{}],GridNode:[function(e,t,n){"use strict";cc._RF.push(t,"6dc57hUDrRFPryc7G/TY7LI","GridNode"),cc.Class({extends:cc.Component,properties:{gridPos:null,parentLayer:null,isCanClick:null},onDestroy:function(){this.gridPos=null,this.parentLayer=null,this.isCanClick=null},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addEvent:function(){this.node.getChildByName("clicknode").on(cc.Node.EventType.TOUCH_END,this.clickGrid,this)},removeEvent:function(){this.node.getChildByName("clicknode").on(cc.Node.EventType.TOUCH_END,this.clickGrid,this)},initialize:function(e,t){this.isCanClick=!0,this.gridPos=e,this.parentLayer=t,this.addEvent(),this.refreshView(),this.refreshChoose(),this.refreshGridBg()},refreshView:function(){var e=fightControl.mapData.getGridDataByPos(this.gridPos);1==e.isEmpty()?this.node.active=!1:1==e.isParry()?(this.node.active=!0,this.node.getChildByName("gridicon").getComponent(cc.Sprite).spriteFrame=""):(this.node.active=!0,this.node.getChildByName("gridicon").getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.fightimg1,"grid_"+e.gridID))},isShow:function(e){this.node.active=e},refreshGridBg:function(){var e=fightControl.mapData.getGridDataByPos(this.gridPos);1==e.isItem()?this.node.getChildByName("gridbg").getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.fightimg1,"gridbg_2"):1==e.isParry()?this.node.getChildByName("gridbg").getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.fightimg1,"gridbg_4"):this.node.getChildByName("gridbg").getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.fightimg1,"gridbg_1")},createAction:function(e){if(1==this.node.active){this.node.scale=.6;this.node.runAction(cc.sequence(cc.scaleTo(.2,1.1*1.1),cc.scaleTo(.1,.9*1.1),cc.scaleTo(.1,1.1),cc.callFunc(function(){e()})))}},refreshChoose:function(){var e=this.node.getChildByName("select"),t=this.node.getChildByName("gridbg").getComponent(cc.Sprite);1==isSamePos(this.gridPos,fightControl.gridPos1)||1==isSamePos(this.gridPos,fightControl.gridPos2)?(e.active=!0,t.spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.fightimg1,"gridbg_3")):(e.active=!1,this.refreshGridBg()),this.refreshQuestion(e.active)},showTipsType:function(e){this.node.getChildByName("select").active=e,1==e?this.node.getChildByName("gridbg").getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.fightimg1,"gridbg_3"):this.refreshGridBg(),this.refreshQuestion(e)},refreshQuestion:function(e){var t=this.node.getChildByName("question");fightControl.mapData.getGridDataByPos(this.gridPos).otherType==gridTypeEm.question?(null==e&&(e=!1),t.active=!e):t.active=!1},gridGray:function(e){var t=this.node.getChildByName("gridbg"),n=this.node.getChildByName("gridicon"),i=this.node.getChildByName("question");1==e?(spriteSetGray(t),spriteSetGray(n),spriteSetGray(i)):(spriteGrayRecover(t),spriteGrayRecover(n),spriteGrayRecover(i))},changeCanClick:function(e){this.isCanClick=e},clickGrid:function(e){if(engine.gameSound.playEffect(soundurl.clickgrid),1==isHaveNewbie){var t=this.parentLayer.parentLayer;if(1!=t.isNewbieNeedPos(this.gridPos))return;t.runNextNewbie()}if(1==this.isCanClick&&0!=this.parentLayer.isCanClick){if(0==fightControl.mapData.getGridDataByPos(this.gridPos).isUsable()){var n=e.getLocation();n=this.node.convertToNodeSpaceAR(n);var i=new cc.Node;return i.position=n,i.addComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.nextloadimg1,"ban"),this.node.addChild(i),void i.runAction(cc.sequence(cc.delayTime(.25),cc.removeSelf()))}this.parentLayer.clickGrid(this.gridPos)}}}),cc._RF.pop()},{}],HelpLayer:[function(e,t,n){"use strict";cc._RF.push(t,"57761V+i+ZCRqFxYRe4uPzy","HelpLayer");var i=e("PublicLayer");cc.Class({extends:i,properties:{},onDestroy:function(){},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},initialize:function(){var e={bg:{y:0,width:585,height:697},bg2:{y:10,width:538,height:640},title:{y:348,txt:getLanguageDic(1024)},close:{x:273,y:332}};this.addEvent();for(var t=[itemIDConfig.addTime,itemIDConfig.tips,itemIDConfig.bomb,itemIDConfig.resort],n=1;n<=4;n++){var i=engine.memory.getPrefab(nextLoadPrefab.help_node_prefab);i.getChildByName("itemicon").getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(needLoadImage.mastloadimg1,"itemicon"+getDicData(dataJson.item_json,t[n-1],"icon")),i.getChildByName("des").getComponent(cc.Label).string=getDicData(dataJson.item_json,t[n-1],"describe"),i.y=210-140*(n-1),this.node.getChildByName("activenode").addChild(i)}this._super(e)}}),cc._RF.pop()},{PublicLayer:"PublicLayer"}],HeroData:[function(e,t,n){"use strict";cc._RF.push(t,"c9db65UF5hGdIzL7DpHH1T6","HeroData");var i=e("GameStrongData"),a=e("GameAchievementData"),o=e("GameDailyTaskData"),r=e("GameGradeData"),s=e("RaceLampData");cc.Class({properties:{gold:null,diamond:null,isStopMusic:null,itemObj:null,strongData:null,achievementData:null,gradeData:null,dailyGift:null,loginDay:null,dailyTaskData:null,isRewardSurprise:null,lastRewardSurpriseTime:null,taskRefreshTime:null,gameConfig:null,bestScore:null,newElementObj:null,clearLv1:null,curLevel:null,totalScore:null,raceLampData:null,dailyGiftReward:null,todayFirst:null,curDayBeforeDawnTime:null,surpriseCD:null,dailyTaskCD:null},initialize:function(){this.todayFirst=!1},updateManageFun:function(e,t){if(e>this.curDayBeforeDawnTime){var n=new Date;this.loginDay=100*n.getMonth()+n.getDate(),this.isRefreshDay(!0),this.getCurDayBeforeDawnTime()}this.refreshSurprise(),this.refreshDailyTask(),this.raceLampData.refreshRaceLamp()},initData:function(e){null==e&&(e={}),ccLog("get data:"),ccLog(e),null==e.gold?this.gold=10:this.gold=e.gold,null==e.diamond?this.diamond=10:this.diamond=e.diamond,1==openModuleValue.money&&(this.diamond=1e11),null==e.isStopMusic?this.isStopMusic=0:this.isStopMusic=e.isStopMusic,null==e.itemObj?this.itemObj={}:this.itemObj=e.itemObj,null==e.dailyGift?this.dailyGift=0:this.dailyGift=e.dailyGift,null==e.isRewardSurprise?this.isRewardSurprise=0:this.isRewardSurprise=e.isRewardSurprise,null==e.lastRewardSurpriseTime?this.lastRewardSurpriseTime=engine.gameTime.localTime:this.lastRewardSurpriseTime=e.lastRewardSurpriseTime,null==e.taskRefreshTime?this.taskRefreshTime=engine.gameTime.localTime:this.taskRefreshTime=e.taskRefreshTime,this.gameConfig=e.gameConfig,null==e.clearLv1?(this.gameConfig=null,this.clearLv1=1):this.clearLv1=e.clearLv1,null==e.bestScore?this.bestScore=0:this.bestScore=e.bestScore,null==e.totalScore?this.totalScore=0:this.totalScore=e.totalScore,null==e.curLevel?this.curLevel=0:this.curLevel=e.curLevel,null==e.newElementObj?this.newElementObj={}:this.newElementObj=e.newElementObj,this.strongData=new i,this.strongData.initialize(e.strongData),this.achievementData=new a,this.achievementData.initialize(e.achievementData),this.gradeData=new r,this.gradeData.initialize(e.gradeData),this.dailyTaskData=new o,this.dailyTaskData.initialize(e.dailyTaskData),this.raceLampData=new s,this.raceLampData.initialize();var t=new Date,n=100*t.getMonth()+t.getDate(),c=!1;null==e.loginDay?(this.loginDay=n,c=!0):(this.loginDay=e.loginDay,this.loginDay!=n&&(this.loginDay=n,c=!0)),this.isRefreshDay(c),this.getCurDayBeforeDawnTime(),engine.gameTime.updateManageFun=this.updateManageFun.bind(this)},isRefreshDay:function(e){1==e&&(this.dailyGift=0,this.todayFirst=!0,engine.eventM.emit(event_id.REFRESH_DAILY_GIFT_BTN,!0))},rewardSurprise:function(){this.lastRewardSurpriseTime=engine.gameTime.localTime,this.isRewardSurprise=1,engine.eventM.emit(event_id.REFRESH_SURPRISE_PUSH)},refreshSurprise:function(){null!=this.surpriseCD&&1==this.isRewardSurprise&&engine.gameTime.localTime>=this.lastRewardSurpriseTime+this.surpriseCD&&(this.isRewardSurprise=0,engine.eventM.emit(event_id.REFRESH_SURPRISE_PUSH))},refreshDailyTask:function(){null!=this.dailyTaskCD&&engine.gameTime.localTime>=this.taskRefreshTime+this.dailyTaskCD&&(null!=this.dailyTaskData&&this.dailyTaskData.refreshTaskData(),this.taskRefreshTime=engine.gameTime.localTime,engine.eventM.emit(event_id.REFRESH_DAILY_TASK_PUSH),engine.eventM.emit(event_id.REFRESH_DAILY_TASK_LAYER))},getCurDayBeforeDawnTime:function(){var e=new Date;e.setTime(engine.gameTime.localTime),e.setDate(e.getDate()+1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),this.curDayBeforeDawnTime=e.getTime()},analysisDataByDic:function(){this.dailyGiftReward=analysisItemInfoByDic(getGlobleDic(13)),this.surpriseCD=3600*getGlobleDic(14)*1e3,this.dailyTaskCD=3600*getGlobleDic(20)*1e3},getSaveData:function(){var e={};return e.gold=this.gold,e.diamond=this.diamond,e.isStopMusic=this.isStopMusic,e.itemObj=this.itemObj,e.dailyGift=this.dailyGift,e.loginDay=this.loginDay,e.strongData=this.strongData.getSaveData(),e.achievementData=this.achievementData.getSaveData(),e.dailyTaskData=this.dailyTaskData.getSaveData(),e.gradeData=this.gradeData.getSaveData(),e.isRewardSurprise=this.isRewardSurprise,e.lastRewardSurpriseTime=this.lastRewardSurpriseTime,e.taskRefreshTime=this.taskRefreshTime,e.gameConfig=this.gameConfig,e.bestScore=this.bestScore,e.totalScore=this.totalScore,e.curLevel=this.curLevel,e.newElementObj=this.newElementObj,e.clearLv1=this.clearLv1,e},saveData:function(e){var t=new Object;t[fbSaveDataKey[0]]=this.getSaveData(),gameSDK.saveUserData(t,e)},addItemNum:function(e,t){null==this.itemObj[e]&&(this.itemObj[e]=0),this.itemObj[e]+=t,engine.eventM.emit(event_id.REFRESH_ITEM_NUM,{index:e,isID:!0})},getItemNum:function(e){var t=0;return null!=this.itemObj[e]&&(t+=this.itemObj[e]),t},addGem:function(e){this.diamond+=e,engine.eventM.emit(event_id.REFRESH_GEM_NUMBER),engine.eventM.emit(event_id.REFRESH_ACHIEVEMENT_OR_STRONGER_GEM),engine.eventM.emit(event_id.REFRESH_STRONGER_NODE_PUSH)},addGold:function(e){this.gold+=e,engine.eventM.emit(event_id.REFRESH_GOLD_NUMBER)},addItemByObj:function(e){for(var t=0;t<e.length;t++){var n=e[t];switch(n.id){case itemIDConfig.gem:this.addGem(n.num);break;default:this.addItemNum(n.id,n.num)}}}});cc._RF.pop()},{GameAchievementData:"GameAchievementData",GameDailyTaskData:"GameDailyTaskData",GameGradeData:"GameGradeData",GameStrongData:"GameStrongData",RaceLampData:"RaceLampData"}],HttpSendData:[function(e,t,n){"use strict";cc._RF.push(t,"79997FCxHVJbZyB/pn5hb9e","HttpSendData");cc.Class({properties:{},sendHttp:function(e,t,n){var i=JSON.stringify(t),a=((new Date).getTime(),new XMLHttpRequest);a.open("POST",e),a.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),a.callfun=n,a.jsonStr=i,ccLog("jsonStr: "+i),a.url=e,ccLog("url: "+e),a.onreadystatechange=function(){if(4==a.readyState&&a.status>=200&&a.status<=207){ccLog(".........."+a.responseText);var t=JSON.parse(a.responseText);ccLog("协议返回："+e),ccLog(t),null!=a.callfun&&a.callfun(t)}},a.send(i)}});cc._RF.pop()},{}],LoadControl:[function(e,t,n){"use strict";cc._RF.push(t,"2bab7MQzoVBG4FYkRsCMASa","LoadControl"),window.LoadStyleType=cc.Enum({json:0,prefab:1,spriteAtlas:2,spine:3,font:4,particleAsset:5,texture:6,proto:7}),window.LoadErrorMaxCountConfig={Spine:3,UI:3,Sprite:3,Prefab:3},window.loadExternalImage=function(e,t){cc.loader.load(e,function(n,i){null!=i&&i instanceof cc.Texture2D&&(engine.memory.addExternalImage(e,new cc.SpriteFrame(i)),null!=t&&t())})};cc.Class({properties:{resources:null,progres:null,maxPercent:null,minPercent:null,nameUrlKeyDic:null,analysisFun:null,completeCallbackFun:null,loadErrorCount:null,loadErrorCallBackFun:null,isFirstLoadComplete:null},initialize:function(e){this.resources=e.resources,this.analysisFun=e.analysisFun,this.completeCallbackFun=e.completeCallbackFun,this.setLoadPercent=e.setLoadPercent,this.nameUrlKeyDic=new Object,this.loadErrorCount=0,this.isFirstLoadComplete=!0,this.loadErrorCallBackFun=e.loadErrorCallBackFun,null!=e.maxPercent?this.maxPercent=e.maxPercent:this.maxPercent=100,null!=e.minPercent?this.minPercent=e.minPercent:this.minPercent=0,null!=e.loadErrorMaxCount?this.loadErrorMaxCount=e.loadErrorMaxCount:this.loadErrorMaxCount=11;for(var t=0;t<e.resources.length;t++){var n=e.resources[t].url,i=e.resources[t].restype,a=n.split("/"),o=a[a.length-1];i==LoadStyleType.texture?this.nameUrlKeyDic[cc.url.raw("resources/"+n)]=n:this.nameUrlKeyDic[o]=n}},destroy:function(){this.resources=null,this.progres=null,this.maxPercent=null,this.nameUrlKeyDic=null,this.analysisFun=null,this.completeCallbackFun=null,this.loadErrorCount=null,this.loadErrorCallBackFun=null,this.isFirstLoadComplete=null},loadRes:function(){var e=this;if(this.loadErrorCount>=this.loadErrorMaxCount)null!=this.loadErrorCallBackFun&&(this.loadErrorCallBackFun(),this.destroy());else{this.loadErrorCount++;for(var t=[],n=[],i=0;i<this.resources.length;i++){var a=this.resources[i].url,o=this.getResLoadType(this.resources[i].restype),r=a.split("/"),s=r[r.length-1];o==LoadStyleType.texture?this.nameUrlKeyDic[cc.url.raw("resources/"+a)]=a:this.nameUrlKeyDic[s]=a,0==engine.memory.isExistRes(a)&&(t.push(a),n.push(o))}t.length>0?cc.loader.loadResArray(t,n,function(t,n,i){e.setLoadPercentFun(t,n)},function(t,n){null!=t&&ccLog(t.message);for(var i=0;i<n.length;i++){var a=n[i];if(a instanceof cc.JsonAsset)engine.memory.addJsonDic(e.nameUrlKeyDic[a.name],a);else if(a instanceof cc.Texture2D){var o=a.url.split(".");engine.memory.addTexture(e.nameUrlKeyDic[o[0]],a)}else if(a instanceof cc.Prefab)engine.memory.addPrefabDic(e.nameUrlKeyDic[a.name],a);else if(a instanceof cc.SpriteAtlas){var r=a.name.split(".");engine.memory.addSpriteAtlasDic(e.nameUrlKeyDic[r[0]],a)}else a instanceof sp.SkeletonData?engine.memory.addSpine(e.nameUrlKeyDic[a.name],a):a instanceof cc.Font?engine.memory.addFont(e.nameUrlKeyDic[a.name],a):a instanceof cc.ParticleAsset?engine.memory.addparticleDic(e.nameUrlKeyDic[a.name],a):a instanceof cc.TextAsset&&engine.memory.addTextAssetDic(e.nameUrlKeyDic[a.name],a)}1==e.isFirstLoadComplete?(e.isFirstLoadComplete=!1,e.loadRes()):setTimeout(function(){e.loadRes()},500)}):(this.setLoadPercentFun(100,100),this.completeLoad())}},getResLoadType:function(e){var t=cc.Prefab;switch(e){case LoadStyleType.json:t=cc.JsonAsset;break;case LoadStyleType.prefab:t=cc.Prefab;break;case LoadStyleType.spriteAtlas:t=cc.SpriteAtlas;break;case LoadStyleType.spine:t=sp.SkeletonData;break;case LoadStyleType.font:t=cc.Font;break;case LoadStyleType.particleAsset:t=cc.ParticleAsset;break;case LoadStyleType.texture:t=cc.Texture2D;break;case LoadStyleType.proto:t=cc.TextAsset}return t},setLoadPercentFun:function(e,t){var n=e/t;if(n>this.progres&&(this.progres=n),null!=this.setLoadPercent){var i=this.maxPercent-this.minPercent,a=this.progres*i+this.minPercent;a=0|Math.floor(a),this.setLoadPercent(Math.min(a,99))}},completeLoad:function(){null!=this.analysisFun&&this.analysisFun(),null!=this.completeCallbackFun&&this.completeCallbackFun(),this.destroy()}});cc._RF.pop()},{}],LoadResLayer:[function(e,t,n){"use strict";cc._RF.push(t,"b75aejyqXdEtY4zsvhuK4el","LoadResLayer"),cc.Class({extends:cc.Component,properties:{callFun:null,openType:null},onDestroy:function(){this.callFun=null,this.openType=null},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addEvent:function(){this.node.getChildByName("homebtn").on(cc.Node.EventType.TOUCH_END,this.clickCloseBtn,this)},removeEvent:function(){this.node.getChildByName("homebtn").off(cc.Node.EventType.TOUCH_END,this.clickCloseBtn,this)},initialize:function(e){this.openType=e.openType,this.callFun=e.callFun,this.addEvent(),this.node.getChildByName("homebtn").active=!0,this.node.getChildByName("circle").runAction(cc.rotateBy(1,360).repeatForever());var t=openDataConfig[this.openType],n=[];n.push({url:t.prefab,restype:LoadStyleType.prefab}),null!=t.otherPrefab&&n.push({url:t.otherPrefab,restype:LoadStyleType.prefab}),null!=t.otherSpine&&n.push({url:t.otherSpine,restype:LoadStyleType.spine}),engine.CPUM.addCPUInfo([{type:CPUStyleType.loadType,data:n,executeOrder:CPUExecuteOrder.curUIType,timeOrder:engine.gameTime.localTime,loadErrorMaxCount:LoadErrorMaxCountConfig.UI}])},loadComplete:function(){null!=this.callFun&&this.callFun(),this.destroyClass()},update:function(e){1==windowResIsExist(this.openType)&&(null!=this.callFun&&this.callFun(),this.destroyClass())},clickCloseBtn:function(){this.destroyClass()}}),cc._RF.pop()},{}],LoadingLayer:[function(e,t,n){"use strict";cc._RF.push(t,"945c2RDSP1Elb0zHLM8v25/","LoadingLayer"),cc.Class({extends:cc.Component,properties:{circleNode:null},destroyClass:function(){this.circleNode.stopAllActions(),this.node.destroy()},onDestroy:function(){this.removeDataEvent(),Global.needSoonRemoveLoadingCircle=!1,this.circleNode=null},addDataEvent:function(){engine.eventM.on(event_id.CLOSE_LOADING_LAYER,this.removeHandle,this)},removeDataEvent:function(){engine.eventM.off(event_id.CLOSE_LOADING_LAYER,this.removeHandle,this)},initialize:function(){this.addDataEvent(),this.node.getChildByName("homebtn").active=!1,this.circleNode=this.node.getChildByName("circle"),this.circleNode.runAction(cc.rotateBy(1,360).repeatForever()),Global.needSoonRemoveLoadingCircle&&this.removeHandle()},removeHandle:function(){this.destroyClass()}}),cc._RF.pop()},{}],LoginFaceBookSDK:[function(e,t,n){"use strict";cc._RF.push(t,"0b01cVQm8RBNpSafgjfsnyQ","LoginFaceBookSDK"),window.gameRankData=null;var i=e("GameRankData"),a=e("LoadControl");window.isHaveNewbie=null,window.isNewPlayer=null,cc.Class({properties:{userData:null},initialize:function(){},login:function(){gaLogEvent.logByDate("开始加载",1);var e=this;gameSDK.getPlayInfo(function(t){ccLog("获取信息完毕，开始加载"),t?(isHaveNewbie=!1,gameSDK.logEventByString("oldPlayer"),gaLogEvent.logByDate("老玩家",1),isNewPlayer=!1):(isHaveNewbie=!0,gameSDK.logEventByString("newPlayer"),gaLogEvent.logByDate("新玩家",1),isNewPlayer=!0),e.userData=t,heroData.initialize(),e.loadGameRes(),gameRankData=new i,gameRankData.initialize()})},loadGameRes:function(){var e=0,t=0;if(1==openModuleValue.isApk){var n=cc.view.getFrameSize();e=n.height,t=n.width}else e=document.documentElement.clientHeight,t=document.documentElement.clientWidth;if(gameSDKName==faceBookSDK&&t>0&&e>0){var i=e/t;if(i>engineGlobal.viewGameHeigh/engineGlobal.viewGameWidth){var o=engineGlobal.viewGameWidth*i;engineGlobal.offY=(o-engineGlobal.viewGameHeigh)/2,ccLog("修改高度")}else{var r=engineGlobal.viewGameHeigh/i;engineGlobal.offX=(r-engineGlobal.viewGameWidth)/2,ccLog("修改宽度")}}ccLog("offY:"+engineGlobal.offY),ccLog("offX:"+engineGlobal.offX);var s=this,c=new a,l=new Object;l.resources=gameLoginRes(),l.setLoadPercent=function(e){s.setLoadPercent(e)},l.analysisFun=function(){s.analysis()},l.completeCallbackFun=function(){s.loadComplete()},l.loadErrorCallBackFun=function(){},c.initialize(l),c.loadRes()},analysis:function(){GameTool.analysisJsonData(analysisJsonArr()),engine.gameData.dataDic.stronger={};var e=getDicData(dataJson.stronger_json);for(var t in e){var n=e[t];null==engine.gameData.dataDic.stronger[n.type]&&(engine.gameData.dataDic.stronger[n.type]={}),engine.gameData.dataDic.stronger[n.type][n.level]=n}engine.gameData.dataDic.dailytask={};e=getDicData(dataJson.dailytask_json);for(var t in e){n=e[t];null==engine.gameData.dataDic.dailytask[n.type]&&(engine.gameData.dataDic.dailytask[n.type]=[]),engine.gameData.dataDic.dailytask[n.type].push(n)}engine.gameData.dataDic.achievement={};e=getDicData(dataJson.achievement_json);for(var t in e){n=e[t];null==engine.gameData.dataDic.achievement[n.type]&&(engine.gameData.dataDic.achievement[n.type]={}),engine.gameData.dataDic.achievement[n.type][n.index]=n}engine.gameData.dataDic.level={};e=getDicData(dataJson.level_json);for(var t in e){for(var i=(n=e[t]).content.split("|"),a=0,o=0;o<i.length;o++){var r=parseInt(i[o]);(r<-1||r>0)&&a++}a%2>0&&(cc.error("第"+t+"关，配置的数量是奇数"+a),e[t].content=e[t].content.replace("1","0"));var s=(n.group+"").split("|");for(o=0;o<s.length;o++){var c=parseInt(s[o]);null==engine.gameData.dataDic.level[c]&&(engine.gameData.dataDic.level[c]=[]),engine.gameData.dataDic.level[c].push(n.id)}}heroData.analysisDataByDic(),heroData.initData(this.userData)},loadComplete:function(){gaLogEvent.logByDate("加载完成",1);gameRankData.async_getRankData(rankTypeEm.globalRank,null,0),gameRankData.async_getRankData(rankTypeEm.friendRank,null,0),this.userData||true?sceneControl.turnMainScene():sceneControl.turnFightScene()},setLoadPercent:function(e){gameSDK.setLoadingProgress(e)}}),cc._RF.pop()},{GameRankData:"GameRankData",LoadControl:"LoadControl"}],LoginSceneControl:[function(e,t,n){"use strict";cc._RF.push(t,"0bdf8+xxslIra3V/D/cjz+K","LoginSceneControl");var i=e("LoginFaceBookSDK");cc.Class({extends:cc.Component,properties:{},onLoad:function(){if(gameInit(),1!=isLogin){ccLog("版本号："+gameVersions);var e=new i;e.initialize(),e.login(),isLogin=!0}}}),cc._RF.pop()},{LoginFaceBookSDK:"LoginFaceBookSDK"}],LoseDetailLayer:[function(e,t,n){"use strict";cc._RF.push(t,"ae6e59fQC1GyJgmNQwYl9kO","LoseDetailLayer"),cc.Class({extends:cc.Component,properties:{},onDestroy:function(){openWindowLayer(openTypeEm.resurgence)},destroyClass:function(){null!=this.node&&this.node.destroy()},initialize:function(){var e=this.node.getChildByName("youscore"),t=this.node.getChildByName("scorelabel"),n=this.node.getChildByName("targetscore"),i=this.node.getChildByName("targetlabel"),a=this.node.getChildByName("closeimg"),o=this.node.getChildByName("line");e.opacity=0,e.y=e.y-30,t.opacity=0,t.y=t.y-30,t.getComponent(cc.Label).string=fightControl.curScore,n.scale=0,i.scale=0,i.getComponent(cc.Label).string=fightControl.targetScore,a.opacity=0,a.scale=10,o.scaleX=0,e.runAction(this.myScoreAction()),t.runAction(this.myScoreAction()),n.runAction(this.targetAction()),i.runAction(this.targetAction()),a.runAction(cc.sequence(cc.delayTime(1.8),cc.fadeIn(.01),cc.scaleTo(.3,1))),o.runAction(cc.scaleTo(.3,1,1));var r=this;this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){r.destroyClass()})))},myScoreAction:function(){var e=cc.spawn(cc.moveBy(.3,0,60),cc.fadeIn(.3));return cc.sequence(e,cc.moveBy(.1,0,-30))},targetAction:function(){return cc.sequence(cc.delayTime(.8),cc.scaleTo(.25,1.1),cc.scaleTo(.15,.9),cc.scaleTo(.1,1))}}),cc._RF.pop()},{}],MainSceneControl:[function(e,t,n){"use strict";cc._RF.push(t,"7eab3h8s1hFkIfNNMnnksQK","MainSceneControl");var i=e("GameScene");cc.Class({extends:i,properties:{gameLoadUICompent:null},onDestroy:function(){this._super(),null!=this.gameLoadUICompent&&(this.gameLoadUICompent=null)},initialize:function(){this._super(),sceneControl.resetTransitionData(),engine.gameSound.playMusic(soundurl.bgMusic,!0),openWindowLayer(openTypeEm.mainUI)},onEnable:function(){},onLoad:function(){1==heroData.isStopMusic&&engine.gameSound.stopMusic(),this.gameLoadUICompent=this.node.addComponent("GameLoadUI"),this._super({maxPercent:100}),sceneControl.curSceneType=SceneType.main},getRes:function(){for(var e=[],t=gameMainRes(),n=0;n<t.length;n++)e.push(t[n]);return e},loadComplete:function(){this._super(),null!=this.gameLoadUI&&(this.gameLoadUI.destroyClass(),this.gameLoadUI.destroy(),this.gameLoadUI=null);this.initialize(),gameSDK.startGame(function(){gameSDK.faceBookBot.canSubscribeBotAsync(function(){cc.log("show msg info!"),1===openModuleValue.forFBCheck?(cc.warn("审核用message"),gameSDK.faceBookBot.subscribeBotAsync()):0===openModuleValue.forFBCheck&&(gameSDKName==faceBookSDK?openWindowLayer(openTypeEm.messageBox):openModuleValue.hideMessageBox||openWindowLayer(openTypeEm.messageBox))})}),heroData.bestScore>0&&gameSDK.createShortcut()},setLoadPercent:function(e){null!=this.gameLoadUICompent&&this.gameLoadUICompent.setLoadPercent(e)}}),cc._RF.pop()},{GameScene:"GameScene"}],MainUILayer:[function(e,t,n){"use strict";cc._RF.push(t,"27607R6V55ECpsokRGPZ1TX","MainUILayer"),cc.Class({extends:cc.Component,properties:{timeTxt1:null,timeTxt2:null,updateCD:null,timeStr2:null},onDestroy:function(){this.removeDataEvent(),this.timeTxt2=null,this.timeTxt1=null,this.updateCD=null,this.timeStr2=null},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addDataEvent:function(){engine.eventM.on(event_id.REFRESH_GEM_NUMBER,this.refreshGemNum,this),engine.eventM.on(event_id.REFRESH_ACHIEVEMENT_PUSH,this.refreshAchievementPush,this),engine.eventM.on(event_id.REFRESH_DAILY_GIFT_BTN,this.refreshDailyGift,this),engine.eventM.on(event_id.REFRESH_DAILY_TASK_PUSH,this.refreshDailyTaskPush,this),engine.eventM.on(event_id.REFRESH_SURPRISE_PUSH,this.refreshSurprisePush,this),engine.eventM.on(event_id.REFRESH_GRADE_PUSH,this.refreshGradePush,this)},removeDataEvent:function(){engine.eventM.off(event_id.REFRESH_GEM_NUMBER,this.refreshGemNum,this),engine.eventM.off(event_id.REFRESH_ACHIEVEMENT_PUSH,this.refreshAchievementPush,this),engine.eventM.off(event_id.REFRESH_DAILY_GIFT_BTN,this.refreshDailyGift,this),engine.eventM.off(event_id.REFRESH_DAILY_TASK_PUSH,this.refreshDailyTaskPush,this),engine.eventM.off(event_id.REFRESH_SURPRISE_PUSH,this.refreshSurprisePush,this),engine.eventM.off(event_id.REFRESH_GRADE_PUSH,this.refreshGradePush,this)},addEvent:function(){this.node.getChildByName("playbtn").on(cc.Node.EventType.TOUCH_END,this.clickPlayBtn,this),this.node.getChildByName("continuebtn").on(cc.Node.EventType.TOUCH_END,this.clickContinueBtn,this),this.node.getChildByName("cupbtn").on(cc.Node.EventType.TOUCH_END,this.clickCupBtn,this),this.node.getChildByName("rankbtn").on(cc.Node.EventType.TOUCH_END,this.clickRankBtn,this),this.node.getChildByName("strongbtn").on(cc.Node.EventType.TOUCH_END,this.clickStrongBtn,this),this.node.getChildByName("daygiftbtn").on(cc.Node.EventType.TOUCH_END,this.clickDayGiftBtn,this),this.node.getChildByName("gradebtn").on(cc.Node.EventType.TOUCH_END,this.clickGradeBtn,this),this.node.getChildByName("mysticalbtn").on(cc.Node.EventType.TOUCH_END,this.clickMysticalBtn,this),this.node.getChildByName("taskbtn").on(cc.Node.EventType.TOUCH_END,this.clickTaskBtn,this),this.node.getChildByName("addgembtn").on(cc.Node.EventType.TOUCH_END,this.clickAddGemBtn,this)},removeEvent:function(){this.node.getChildByName("playbtn").off(cc.Node.EventType.TOUCH_END,this.clickPlayBtn,this),this.node.getChildByName("continuebtn").off(cc.Node.EventType.TOUCH_END,this.clickContinueBtn,this),this.node.getChildByName("cupbtn").off(cc.Node.EventType.TOUCH_END,this.clickCupBtn,this),this.node.getChildByName("rankbtn").off(cc.Node.EventType.TOUCH_END,this.clickRankBtn,this),this.node.getChildByName("strongbtn").off(cc.Node.EventType.TOUCH_END,this.clickStrongBtn,this),this.node.getChildByName("daygiftbtn").off(cc.Node.EventType.TOUCH_END,this.clickDayGiftBtn,this),this.node.getChildByName("gradebtn").off(cc.Node.EventType.TOUCH_END,this.clickGradeBtn,this),this.node.getChildByName("mysticalbtn").off(cc.Node.EventType.TOUCH_END,this.clickMysticalBtn,this),this.node.getChildByName("taskbtn").off(cc.Node.EventType.TOUCH_END,this.clickTaskBtn,this),this.node.getChildByName("addgembtn").off(cc.Node.EventType.TOUCH_END,this.clickAddGemBtn,this)},initialize:function(){this.timeStr2=getLanguageDic(1016);this.addEvent();this.addDataEvent();this.refreshGemNum();this.refreshDailyGift();this.refreshGradePush();this.refreshAchievementPush();this.refreshDailyTaskPush();this.refreshSurprisePush();this.node.getChildByName("bestscorebg").getChildByName("txt").getComponent(cc.Label).string=getLanguageDic(1043)+heroData.bestScore;this.timeTxt1=this.node.getChildByName("tasktime").getComponent(cc.Label);this.timeTxt2=this.node.getChildByName("mysticaltime").getComponent(cc.Label);this.refreshEndTime();this.refreshContinueBtn();1==openModuleValue.forFBCheck&&(this.node.getChildByName("mysticalbtn").active=!1,this.node.getChildByName("mysticaltime").active=!1);this.node.getChildByName("lvnum").active=!1;openModuleValue.chooseLv>0&&(this.node.getChildByName("lvnum").active=!0);this.node.getChildByName("rankbtn").active=false;this.node.getChildByName("cupbtn").x=0;this.node.getChildByName("lvnum").active=false},refreshGradePush:function(){this.node.getChildByName("gradebtn").getChildByName("push").active=heroData.gradeData.getGradePush()},refreshStrongerPush:function(){this.node.getChildByName("strongbtn").getChildByName("push").active=heroData.strongData.getStrongerPush()},refreshAchievementPush:function(){this.node.getChildByName("cupbtn").getChildByName("push").active=heroData.achievementData.getAchievementPush()},refreshDailyGift:function(){var e=!1;0==heroData.dailyGift&&(e=!0);var t=this.node.getChildByName("daygiftbtn");t.getChildByName("push").active=e,t.stopAllActions(),t.scale=1,1==e&&t.runAction(cc.sequence(cc.scaleTo(.5,1.1),cc.scaleTo(.5,1),cc.scaleTo(.5,.9),cc.scaleTo(.5,1)).repeatForever())},refreshDailyTaskPush:function(){this.node.getChildByName("taskbtn").getChildByName("push").active=heroData.dailyTaskData.getTaskPush()},refreshSurprisePush:function(){this.node.getChildByName("mysticalbtn").getChildByName("push").active=0==heroData.isRewardSurprise},refreshGemNum:function(){this.node.getChildByName("gemword").getComponent("GameArtWord").setString(""+heroData.diamond),this.refreshStrongerPush()},refreshEndTime:function(){this.updateCD=engine.gameTime.localTime;var e=heroData.taskRefreshTime+heroData.dailyTaskCD-engine.gameTime.localTime;if(this.timeTxt1.string=engine.gameTime.formatTime(e),0==heroData.isRewardSurprise)this.timeTxt2.string=this.timeStr2;else{var t=heroData.lastRewardSurpriseTime+heroData.surpriseCD-engine.gameTime.localTime;this.timeTxt2.string=engine.gameTime.formatTime(t)}},refreshContinueBtn:function(){var e=this.node.getChildByName("continuebtn"),t=e.getChildByName("txt").getComponent(cc.LabelOutline);null==heroData.gameConfig?(t.color=cc.color(114,114,114),e.getComponent(cc.Button).interactable=!1):(t.color=cc.color(85,156,23),e.getComponent(cc.Button).interactable=!0)},update:function(e){null!=this.updateCD&&engine.gameTime.localTime-this.updateCD>500&&this.refreshEndTime()},clickPlayBtn:function(){var e=this;openModuleValue.chooseLv>0&&(openModuleValue.chooseLv=parseInt(e.node.getChildByName("lvnum").getComponent(cc.EditBox).string)),sceneControl.turnFightScene(),null!=heroData.gameConfig&&(heroData.gameConfig=null,heroData.saveData());if(typeof gdsdk!=='undefined'&&typeof gdsdk.showAd!=='undefined'){gdsdk.showAd()}},clickContinueBtn:function(){null!=heroData.gameConfig&&(gaLogEvent.logByDate("点击继续",1),sceneControl.turnFightScene(heroData.gameConfig))},clickCupBtn:function(){openWindowLayer(openTypeEm.achievementOrStrong,achiOpenTypeEm.achievement)},clickRankBtn:function(){openWindowLayer(openTypeEm.rank)},clickStrongBtn:function(){openWindowLayer(openTypeEm.achievementOrStrong,achiOpenTypeEm.strong)},clickDayGiftBtn:function(){openWindowLayer(openTypeEm.watchAdvert,watchOpenTypeEm.dailyGift)},clickGradeBtn:function(){openWindowLayer(openTypeEm.gradeUI)},clickMysticalBtn:function(){heroData.isRewardSurprise>0?openWindowLayer(openTypeEm.tipsLayer,{des:getLanguageDic(1034)}):openWindowLayer(openTypeEm.surpriseLayer,surpriseOpenTypeEm.mainLayer)},clickTaskBtn:function(){openWindowLayer(openTypeEm.dailyTask)},clickAddGemBtn:function(){openWindowLayer(openTypeEm.watchAdvert,watchOpenTypeEm.getGem)}}),cc._RF.pop()},{}],MapData:[function(e,t,n){"use strict";cc._RF.push(t,"1bfd3OpTQRNEaHIWBolNXZB","MapData");var i=e("GridData");cc.Class({properties:{gridArr:null,mapWight:null,mapHeight:null,remainGrid:null},initialize:function(){this.mapWight=getGlobleDic(1),this.mapHeight=getGlobleDic(2),this.gridArr=[],this.remainGrid=0;for(var e=0;e<this.mapHeight;e++){this.gridArr[e]=[];for(var t=0;t<this.mapWight;t++){var n=new i;n.initialize(0,{y:e,x:t}),this.gridArr[e].push(n)}}},refreshMapByConfig:function(e){for(var t=[],n=0;n<this.mapHeight;n++)t.push([]);var i=e.split("|");for(n=0;n<i.length;n++){t[Math.floor(n/this.mapWight)].push(parseInt(i[n]))}this.remainGrid=0;for(n=0;n<t.length;n++)for(var a=0;a<t[n].length;a++){var o=t[n][a];o>=-1?this.gridArr[n][a].refreshGridOther(gridTypeEm.normal):(this.gridArr[n][a].refreshGridOther(o),o=1),this.gridArr[n][a].refreshGridID(o),o>0&&this.remainGrid++}},deleteGrid:function(e){var t=this.getGridDataByPos(e);null!=t&&(t.clear(),this.remainGrid--)},getHaveArr:function(e){for(var t=[],n=0;n<this.gridArr.length;n++)for(var i=0;i<this.gridArr[n].length;i++){var a=this.gridArr[n][i];1==e?0==a.isEmpty()&&t.push(a):1==a.isUsable()&&t.push(a)}return t},getGridDataByPos:function(e){return null==this.gridArr[e.y]||null==this.gridArr[e.y][e.x]?null:this.gridArr[e.y][e.x]},getMapConfig:function(){for(var e="",t=0;t<this.gridArr.length;t++)for(var n=0;n<this.gridArr[t].length;n++)e+=this.gridArr[t][n].gridID+"|";return e=e.substr(0,e.length-1)}}),cc._RF.pop()},{GridData:"GridData"}],NewElementTipsLayer:[function(e,t,n){"use strict";cc._RF.push(t,"8381aTNiKdK77itPF8K3su7","NewElementTipsLayer");var i=e("PublicLayer");window.newElementTipsTypeEm={cloud:0,iron:1},window.newElementConfig={0:{lv:10,des:1037,texture:bgImgUrl.cloudbg},1:{lv:7,des:1036,texture:bgImgUrl.ironbg}},cc.Class({extends:i,properties:{isAddSprite:null,tipsType:null,spriteNode:null},onDestroy:function(){this.isAddSprite=null,this.tipsType=null,this.spriteNode=null,engine.eventM.emit(event_id.CLOSE_NEW_ELEMENT)},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},initialize:function(e){this.isAddSprite=!1,this.tipsType=e;var t={bg:{y:28,width:670,height:626},bg2:{y:41,width:620,height:565},title:{y:333,txt:getLanguageDic(1035)},close:{x:307,y:319}},n=engine.memory.getFont(needLoadFont.fntttf1_font),i=new cc.Node;i.anchorY=1,i.y=252,i.width=600,i.height=120;var a=i.addComponent(cc.Label);a.overflow=cc.Label.Overflow.SHRINK,a.enableWrapText=!0,a.fontSize=28,a.lineHeight=40,a.horizontalAlign=cc.Label.HorizontalAlign.CENTER,a.verticalAlign=cc.Label.VerticalAlign.TOP,a.font=n,a.string=getLanguageDic(newElementConfig[this.tipsType].des),this.node.getChildByName("activenode").addChild(i),this.addEvent(),this.spriteNode=new cc.Node,this.node.getChildByName("activenode").addChild(this.spriteNode),this.spriteNode.y=-45,1==engine.memory.isExistRes(newElementConfig[this.tipsType].texture)&&(this.isAddSprite=!0,this.spriteNode.addComponent(cc.Sprite).spriteFrame=engine.memory.getTexture(newElementConfig[this.tipsType].texture)),this._super(t)},update:function(e){0==this.isAddSprite&&1==engine.memory.isExistRes(newElementConfig[this.tipsType].texture)&&(this.isAddSprite=!0,this.spriteNode.addComponent(cc.Sprite).spriteFrame=engine.memory.getTexture(newElementConfig[this.tipsType].texture))}}),cc._RF.pop()},{PublicLayer:"PublicLayer"}],NumBigUnit:[function(e,t,n){"use strict";cc._RF.push(t,"f9fa3PrubNLk6r6QvPo03LW","NumBigUnit");var i=cc.Class({properties:{num:null,numUnit:null,criticalNum:9999999},onDestroy:function(){this.num=null,this.numUnit=null},initialize:function(e){"number"==typeof e&&((t=new Object).numUnit=0,t.num=e,e=t);var t=this.isScientific(e.num);this.num=t.num,this.numUnit=t.numUnit+e.numUnit,this.formatNum()},formatNum:function(){if(this.num>this.criticalNum){var e=(t=parseInt(this.num).toString().length)-(n=this.criticalNum.toString().length);this.num=this.num/Math.pow(10,e),this.numUnit+=e}else if(this.numUnit>0){var t,n;if((t=parseInt(this.num).toString().length)<(n=this.criticalNum.toString().length))(e=n-t)>this.numUnit&&(e=this.numUnit),this.num=this.num*Math.pow(10,e),this.numUnit-=e}},isScientific:function(e){var t=new Object,n=e.toString(),i=n.indexOf("e+"),a=n.indexOf("E+");return a>i&&(i=a),i>-1?(t.num=1e4*parseFloat(n.substring(0,i)),t.numUnit=parseInt(n.substring(i+2,n.length))-4):(t.num=e,t.numUnit=0),t},getAddNum:function(e){if("number"==typeof e){var t=new i;t.initialize({num:e,numUnit:0}),e=t}var n=null,a=new Object,o=null;this.numUnit>=e.numUnit?(n=this.num,o=this.numUnit,a.num=e.num,a.numUnit=e.numUnit):this.numUnit<e.numUnit&&(n=e.num,o=e.numUnit,a.num=this.num,a.numUnit=this.numUnit);var r=o-a.numUnit;r>0&&(a.num=a.num/Math.pow(10,r)),(n+=a.num)>this.criticalNum&&(n/=10,o++);var s={num:n,numUnit:o},c=new i;return c.initialize(s),c},getSubNum:function(e,t){if("number"==typeof e){var n=new i;n.initialize({num:e,numUnit:0}),e=n}if(e.numUnit>this.numUnit&&1==t){var a={num:0,numUnit:0};return(s=new i).initialize(a),s}var o=new Object;o.num=e.num,o.numUnit=e.numUnit;var r=this.numUnit-o.numUnit;if(o.num=o.num/Math.pow(10,r),o.num>this.num&&1==t){a={num:0,numUnit:0};return(s=new i).initialize(a),s}var s;a={num:this.num-o.num,numUnit:this.numUnit};return(s=new i).initialize(a),s},getMultiplication:function(e){var t=this.num,n=this.numUnit;"number"==typeof e?t*=e:(t*=e.num,n+=e.numUnit);var a={num:t,numUnit:n},o=new i;return o.initialize(a),o},getPercentage:function(e){if("number"==typeof e){var t=new Object;t.numUnit=0,t.num=e,e=t}var n=e.num,i=e.numUnit,a=parseInt(this.num).toString().length+this.numUnit,o=parseInt(n).toString().length+i;if(a<o-3)return 0;if(a>o+3)return 100;var r=this.num,s=this.numUnit,c=s;return c>i&&(c=i),s-=c,r*=Math.pow(10,s),i-=c,0==(n*=Math.pow(10,i))?(cc.error("注意：除数为0。"),0):r/n},getDivide:function(e){if("number"==typeof e){var t=new i;t.initialize({num:e,numUnit:0}),e=t}if(0==e.num){cc.error("注意：除数为0。");var n={num:0,numUnit:0};return(u=new i).initialize(n),u}var a=this.num,o=this.numUnit,r=e.num,s=e.numUnit,c=o;if(c>s&&(c=s),o-=c,(s-=c)>100){n={num:0,numUnit:0};return(u=new i).initialize(n),u}r*=Math.pow(10,s);var l=parseInt(r).toString().length,h=parseInt(a).toString().length,d=3;h<l+3&&(d=d+l+3-h),d>o&&(d=o);var u;n={num:(a*=Math.pow(10,d))/r,numUnit:o-=d};return(u=new i).initialize(n),u},getNumText:function(e,t){t=void 0==t?1:t;var n="k",i=97,a=["m","b","t"];1==e&&(a=["M","B","T"],n="K",i=65);var o="",r=parseInt(this.num).toString().length+this.numUnit;if(this.num<1e3)o=this.num.toFixed(0);else{var s="";if(r<=6)s=n;else if(r<=15){s=a[c=Math.floor((r-7)/3)]}else{var c;if((c=Math.floor((r-16)/3))>=676){var l=Math.floor(c/676)+i-1;s=String.fromCharCode(l),c%=676}var h=Math.floor(c/26)+i,d=c%26+i;s=s+String.fromCharCode(h)+String.fromCharCode(d)}var u=this.num,g=3-this.numUnit%3;for(3==g&&(g=0),u=parseFloat((u/Math.pow(10,g)).toFixed(2));u>=1e3;)u=parseFloat((u/1e3).toFixed(t));o=u.toString()+s}return o},getSaveData:function(){var e=new Object;return e.num=this.num,e.numUnit=this.numUnit,e},clone:function(){var e=new i;return e.initialize({num:this.num,numUnit:this.numUnit}),e},isBiggerZero:function(){return this.num>0},setZero:function(){this.num=0,this.numUnit=0},compareWithNum:function(e){if("number"==typeof e){var t=new i;t.initialize({num:e,numUnit:0}),e=t}return this.numUnit>e.numUnit||!(this.numUnit<e.numUnit)&&this.num>=e.num},equalWithNum:function(e){if("number"==typeof e){var t=new i;t.initialize({num:e,numUnit:0}),e=t}return this.numUnit==e.numUnit&&this.num==e.num},getNum:function(){return this.num*Math.pow(10,this.numUnit)},getIntNum:function(){this.formatNum(),0==this.numUnit&&(this.num=Math.ceil(this.num))}});window.getCalculateCritical=function(e){return e>2?300:e>1.5?1e3:e>1.2?1700:e>1.1?3800:7300},window.powerGuardBreak=function(e,t){var n=new i;n.initialize({num:1,numUnit:0});for(var a=getCalculateCritical(e);t>a;){t-=a;var o=Math.pow(e,a);(new i).initialize({num:o,numUnit:0}),n=n.getMultiplication(o)}var r=Math.pow(e,t),s=new i;return s.initialize({num:r,numUnit:0}),n=n.getMultiplication(s)},cc._RF.pop()},{}],NumCalculate:[function(e,t,n){"use strict";cc._RF.push(t,"af541boy7xN9r/9ae1/WeT1","NumCalculate");var i=cc.Class({properties:{numArr:null},ctor:function(){this.initialize()},onDestroy:function(){this.isInit=null;for(var e=this.numArr.length-1;e>=0;e--)this.numArr.splice(e,1);this.numArr=null},initialize:function(){1!=this.isInit&&(this.isInit=!0)},addNum:function(e){for(var t=Math.max(this.numArr.length,e.numArr.length),n=0;n<t;n++){null==this.numArr[n]&&(this.numArr[n]=0),null==e.numArr[n]&&(e.numArr[n]=0),this.numArr[n]=this.numArr[n]+e.numArr[n];var i=this.numArr[n]/1e9;if(i>1){var a=this.numArr[n]%1e9;null==this.numArr[n+1]&&(this.numArr[n+1]=0),this.numArr[n+1]=this.numArr[n+1]+Math.floor(i),this.numArr[n]=a}}ccLog("计算加法值："+this.numArr)},subNum:function(e){if(this.numArr.length<e.numArr.length)return!1;if(this.numArr.length-e.numArr.length<2)for(var t=0;t<this.numArr.length;t++)if(null==e.numArr[t]&&(e.numArr[t]=0),this.numArr[t]>=e.numArr[t])this.numArr[t]=this.numArr[t]-e.numArr[t];else{if(null==this.numArr[t+1])return!1;if(this.numArr[t+1]>0)this.numArr[t+1]=this.numArr[t+1]-1,this.numArr[t]=this.numArr[t]+1e9,this.numArr[t]=this.numArr[t]-e.numArr[t];else{if(null==this.numArr[t+2])return!1;this.numArr[t+2]=this.numArr[t+2]-1,this.numArr[t+1]=this.numArr[t+1]+1e9,this.numArr[t+1]=this.numArr[t+1]-1,this.numArr[t]=this.numArr[t]+1e9,this.numArr[t]=this.numArr[t]-e.numArr[t]}}ccLog("计算加法值："+this.numArr)},multiplicationNum:function(e){for(var t=[],n=0;n<this.numArr.length;n++){for(var a=[],o=0;o<e.numArr.length;o++){for(var r=this.numArr[n]*e.numArr[o],s=0;s<o;s++)a.push(0);a.push(r)}t.push(a)}this.numArr=[];for(n=0;n<t.length;n++){var c=new i;c.loadSaveData(t[n]),this.addNum(c)}(new i).loadSaveData([]),this.addNum(c)},getNumText:function(){this.deleteHighestNumArr();var e=[["","K","M","B","KB","MB","TB"],["BB"],["BBB"]][this.numArr.length-1],t="",n=0;if(e.length>1){var i=0;for(n=(n=this.numArr[0]).toFixed(2);n>=1e3;)n=(n/1e3).toFixed(2),i++;t=e[i]}else{t=e[0],n=this.numArr[this.numArr.length-1];var a=this.numArr[this.numArr.length-2]/1e9;a>=.01&&(n+=parseFloat(a.toFixed(2)))}return n+t},deleteHighestNumArr:function(){return 0==this.numArr[this.numArr.length-1]?(this.numArr.splice(this.numArr.length-1,1),this.deleteHighestNumArr(),!1):(0==this.numArr.length&&this.numArr.push(0),!0)},getSaveData:function(){return this.numArr},loadSaveData:function(e){this.numArr=e}});cc._RF.pop()},{}],PauseLayer:[function(e,t,n){"use strict";cc._RF.push(t,"2a925F11pxNN50pFel0osIE","PauseLayer");var i=e("PublicLayer");cc.Class({extends:i,properties:{pauseNode:null},onDestroy:function(){this.pauseNode=null},destroyClass:function(){engine.eventM.emit(event_id.REFRESH_PAUSE,!1),null!=this.pauseNode&&this.pauseNode.destroy(),null!=this.node&&(this.removeEvent(),this.node.destroy())},addEvent:function(){this._super(),this.pauseNode.getChildByName("homebtn").on(cc.Node.EventType.TOUCH_END,this.clickHomeBtn,this),this.pauseNode.getChildByName("helpbtn").on(cc.Node.EventType.TOUCH_END,this.clickHelpBtn,this)},removeEvent:function(){this._super(),this.pauseNode.getChildByName("homebtn").on(cc.Node.EventType.TOUCH_END,this.clickHomeBtn,this),this.pauseNode.getChildByName("helpbtn").on(cc.Node.EventType.TOUCH_END,this.clickHelpBtn,this)},initialize:function(){var e={bg:{y:-12,width:585,height:652},bg2:{y:-1,width:538,height:598},title:{y:310,txt:getLanguageDic(1025)},close:{x:268,y:300}};this.pauseNode=engine.memory.getPrefab(needLoadPrefab.pause_layer_prefab),this.node.getChildByName("activenode").addChild(this.pauseNode),this.addEvent(),this._super(e)},clickHelpBtn:function(){openWindowLayer(openTypeEm.help)},clickHomeBtn:function(){heroData.gameConfig=fightControl.getGameConfig(),heroData.saveData(),sceneControl.turnMainScene()}}),cc._RF.pop()},{PublicLayer:"PublicLayer"}],PublicLayer:[function(e,t,n){"use strict";cc._RF.push(t,"299c3rjmQ9KS6iGOqnSETCr","PublicLayer"),cc.Class({extends:cc.Component,properties:{},addEvent:function(){this.node.getChildByName("activenode").getChildByName("closebtn").on(cc.Node.EventType.TOUCH_END,this.clickCloseBtn,this)},removeEvent:function(){this.node.getChildByName("activenode").getChildByName("closebtn").off(cc.Node.EventType.TOUCH_END,this.clickCloseBtn,this)},initialize:function(e){var t=this.node.getChildByName("activenode");if(null!=e){var n=t.getChildByName("bg");n.y=e.bg.y,n.width=e.bg.width,n.height=e.bg.height;var i=t.getChildByName("bg2");i.y=e.bg2.y,i.width=e.bg2.width,i.height=e.bg2.height;var a=t.getChildByName("titlebg"),o=t.getChildByName("title");null==e.title?(o.active=!1,a.active=!1):(o.y=e.title.y,a.y=o.y-8,o.getComponent(cc.Label).string=e.title.txt);var r=t.getChildByName("closebtn");null==e.close?r.active=!1:(r.x=e.close.x,r.y=e.close.y)}t.scale=.5,t.runAction(cc.sequence(cc.delayTime(.02),cc.scaleTo(.2,1.1),cc.scaleTo(.1,.9),cc.scaleTo(.1,1)))},clickCloseBtn:function(){this.destroyClass()}}),cc._RF.pop()},{}],RaceLampData:[function(e,t,n){"use strict";cc._RF.push(t,"e207ePgrsFMHqpnzCp5NEno","RaceLampData"),cc.Class({extends:cc.Component,properties:{raceLampArr:null,raceLampTime:null},initialize:function(){this.raceLampArr=[],this.getRaceLampTime()},refreshRaceLamp:function(){engine.gameTime.localTime>=this.raceLampTime&&(this.addRaceLampData(),this.getRaceLampTime())},getRaceLampTime:function(){this.raceLampTime=engine.gameTime.localTime+1e3*GameTool.getRandomInt(30,60)},addRaceLampData:function(e){var t="",n=0;if(null==e){var i=GameTool.getRandomInt(0,randomNameArr.length-1);t=randomNameArr[i],n=GameTool.getRandomInt(1,9)}else t=gameSDK.sdkPlayInfo.name,n=e;var a=getDicData(dataJson.grade_json,n,"name"),o=getLanguageDic(1040).replace("%s",t).replace("%l",a);this.raceLampArr.push(o)},getRaceLampData:function(){return this.raceLampArr.length>0?this.raceLampArr[0]:null},deleteRaceLampData:function(){this.raceLampArr.length>0&&this.raceLampArr.shift()}}),cc._RF.pop()},{}],Resource:[function(e,t,n){"use strict";cc._RF.push(t,"a2c35h4cyNJTqVY0ZadmCUs","Resource"),window.dataJson={language_json:"language",item_json:"item",stronger_json:"stronger",globle_json:"globle",achievement_json:"achievement",dailytask_json:"dailytask",mysteriousgift_json:"mysteriousgift",level_json:"level",levelscore_json:"levelscore",grade_json:"grade"},window.loginLoadPrefab={},window.loginLoadImage={publicimg1:"img/public/publicimg1",scaleimg1:"img/scale/scaleimg1"},window.loginLoadSpine={},window.needLoadFont={fntttf1_font:"font/fnt1"},window.needLoadPrefab={fight_prefab:"prefab/fightui/fight_prefab",public_watch_prefab:"prefab/publicui/public_watch_prefab",main_prefab:"prefab/mainui/main_prefab",public_layer_prefab:"prefab/publicui/public_layer_prefab",choose_messenger_prefab:"prefab/mainui/choose_messenger_prefab",loading_prefab:"prefab/publicui/loading_prefab",tips_layer_prefab:"prefab/publicui/tips_layer_prefab",custom_end_prefab:"prefab/fightui/custom_end_prefab",game_over_prefab:"prefab/fightui/game_over_prefab",grid_node_prefab:"prefab/fightui/grid_node_prefab",pause_layer_prefab:"prefab/fightui/pause_layer_prefab",result_prefab:"prefab/fightui/result_prefab",resurgence_layer_prefab:"prefab/fightui/resurgence_layer_prefab",target_layer_prefab:"prefab/fightui/target_layer_prefab",grade_up_layer_prefab:"prefab/fightui/grade_up_layer_prefab",lose_detail_layer_prefab:"prefab/fightui/lose_detail_layer_prefab"},window.needLoadImage={mastloadimg1:"img/mastloadimg/mastloadimg1"},window.needLoadLanguageImage={language1:"language1"},window.needLoadSpine={bomb:"spine/bomb",congratulations:"spine/congratulations",lightning:"spine/lightning",rearrange:"spine/rearrange",select:"spine/select",end_light:"spine/end_light",star:"spine/star",spread:"spine/spread"},window.needLoadParticle={rearrange_plz:"particle/rearrange_plz",xingxing:"particle/xingxing"},window.nextLoadPrefab={achievement_stronger_prefab:"prefab/mainui/achievement_stronger_prefab",achievement_stronger_node_prefab:"prefab/mainui/achievement_stronger_node_prefab",daily_task_node_prefab:"prefab/mainui/daily_task_node_prefab",rank_prefab:"prefab/mainui/rank_prefab",rank_node_prefab:"prefab/mainui/rank_node_prefab",surprise_card_node_prefab:"prefab/mainui/surprise_card_node_prefab",surprise_layer_prefab:"prefab/mainui/surprise_layer_prefab",grade_node_prefab:"prefab/mainui/grade_node_prefab",result_node_prefab:"prefab/fightui/result_node_prefab",help_node_prefab:"prefab/fightui/help_node_prefab",surpass_layer_prefab:"prefab/fightui/surpass_layer_prefab"},window.nextLoadImage={nextloadimg1:"img/nextloadimg/nextloadimg1",fightimg1:"img/fightimg/fightimg1"},window.nextLoadSpine={mysterious:"spine/mysterious"},window.bgImgUrl={surpassBg:"img/background/surpassbg",cloudBig:"img/background/clousbig",cloudbg:"img/background/cloudbg",ironbg:"img/background/ironbg"},window.soundurl={cleargrid:"sound/cleargrid",clickgrid:"sound/clickgrid",combo10:"sound/combo10",combo15:"sound/combo15",combo20:"sound/combo20",gameover:"sound/gameover",rearrange:"sound/rearrange",timeend:"sound/timeend",victory:"sound/victory",bomb:"sound/bomb",bgMusic:"sound/bgmusic"},window.initRes=function(){for(var e in dataJson)dataJson[e]="language/"+engineGlobal.gamelanguage+"/data/"+dataJson[e];for(var t in needLoadLanguageImage)needLoadLanguageImage[t]="language/"+engineGlobal.gamelanguage+"/img/"+needLoadLanguageImage[t]},window.gameLoginRes=function(){var e=[];for(var t in dataJson)e.push({url:dataJson[t],restype:LoadStyleType.json});for(var n in loginLoadPrefab)e.push({url:loginLoadPrefab[n],restype:LoadStyleType.prefab});for(var i in loginLoadImage)e.push({url:loginLoadImage[i],restype:LoadStyleType.spriteAtlas});for(var a in loginLoadSpine)e.push({url:loginLoadSpine[a],restype:LoadStyleType.spine});for(var n in needLoadPrefab)e.push({url:needLoadPrefab[n],restype:LoadStyleType.prefab});for(var o in needLoadImage)e.push({url:needLoadImage[o],restype:LoadStyleType.spriteAtlas});for(var o in needLoadLanguageImage)e.push({url:needLoadLanguageImage[o],restype:LoadStyleType.spriteAtlas});for(var r in needLoadFont)e.push({url:needLoadFont[r],restype:LoadStyleType.font});for(var s in needLoadSpine)e.push({url:needLoadSpine[s],restype:LoadStyleType.spine});for(var o in nextLoadImage)e.push({url:nextLoadImage[o],restype:LoadStyleType.spriteAtlas});for(var o in needLoadLanguageImage)e.push({url:needLoadLanguageImage[o],restype:LoadStyleType.spriteAtlas});for(var s in needLoadParticle)e.push({url:needLoadParticle[s],restype:LoadStyleType.particleAsset});return e},window.gameMainRes=function(){return[]},window.gameFightRes=function(){var e=[];return e.push({url:nextLoadPrefab.result_node_prefab,restype:LoadStyleType.prefab}),e.push({url:nextLoadPrefab.surpass_layer_prefab,restype:LoadStyleType.prefab}),e.push({url:bgImgUrl.cloudBig,restype:LoadStyleType.texture}),e.push({url:bgImgUrl.cloudbg,restype:LoadStyleType.texture}),e.push({url:bgImgUrl.ironbg,restype:LoadStyleType.texture}),e},window.analysisJsonArr=function(){var e=[];for(var t in dataJson)e.push(dataJson[t]);return e},cc._RF.pop()},{}],ResultLayer:[function(e,t,n){"use strict";cc._RF.push(t,"d04cahuAyVMm5AObiTaVPcJ","ResultLayer");var i=e("GameListLayer");cc.Class({extends:i,properties:{isCanClick:null,curData:null,moveLayer:null,curFriendData:null,isShowRank:null},onDestroy:function(){this.isCanClick=null,this.curData=null,this.moveLayer=null,this.curFriendData=null,this.isShowRank=null},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addEvent:function(){var e=this.node.getChildByName("activenode");e.getChildByName("homebtn").on(cc.Node.EventType.TOUCH_END,this.clickHomeBtn,this),e.getChildByName("againbtn").on(cc.Node.EventType.TOUCH_END,this.clickAgainBtn,this),e.getChildByName("watch").on(cc.Node.EventType.TOUCH_END,this.clickWatchBtn,this),e.getChildByName("invite").on(cc.Node.EventType.TOUCH_END,this.clickInviteBtn,this)},removeEvent:function(){var e=this.node.getChildByName("activenode");e.getChildByName("homebtn").off(cc.Node.EventType.TOUCH_END,this.clickHomeBtn,this),e.getChildByName("againbtn").off(cc.Node.EventType.TOUCH_END,this.clickAgainBtn,this),e.getChildByName("watch").off(cc.Node.EventType.TOUCH_END,this.clickWatchBtn,this),e.getChildByName("invite").off(cc.Node.EventType.TOUCH_END,this.clickInviteBtn,this)},initialize:function(){if(gameSDK.sendToFBBestScore(fightControl.curScore),heroData.bestScore<fightControl.curScore){heroData.bestScore=fightControl.curScore;var e=this,t=function(t){e.setCurFriendData(t)};gameSDK.leaderboard.setScoreAsync(fbRankName,fightControl.curScore,null,function(){gameRankData.async_getRankData(rankTypeEm.friendRank,t,1),gameRankData.async_getRankData(rankTypeEm.globalRank,null,1)},function(){gameRankData.async_getRankData(rankTypeEm.friendRank,t,0)})}else gameRankData.async_getRankData(rankTypeEm.friendRank,this.setCurFriendData.bind(this),0);this.isCanClick=!1,this.addEvent();var n=this.node.getChildByName("activenode");this.moveLayer=n.getChildByName("scr").getComponent(cc.ScrollView).content,n.getChildByName("score").getComponent(cc.Label).string=fightControl.curScore,n.getChildByName("watch").active=!1,this.runEnterAction()},setCurFriendData:function(e){ccLog("设置好友排行榜信息"),this.curFriendData=e},runEnterAction:function(){var e=this.node.getChildByName("activenode");e.scale=.5;var t=this;e.runAction(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.1,.9),cc.scaleTo(.1,1),cc.callFunc(function(){t.isCanClick=!0,e.getChildByName("watch").runAction(cc.sequence(cc.scaleTo(.5,1.1),cc.scaleTo(.5,1),cc.scaleTo(.5,.9),cc.scaleTo(.5,1)).repeatForever())})))},refreshRankInfo:function(){var e=this.curFriendData;this.moveLayer.removeAllChildren(),this.clear();this.curData=[];for(var t=1,n=0;n<e.length;n++){var i=e[n];i.score>rankMaxScore||(i.rank=t,this.curData.push(i),t++)}for(n=0;n<this.curData.length;n++)this.curData[n].pos=-70-146*n;this.moveLayer.y=0,this.moveLayer.height=146*this.curData.length+20;var a=this,o=new Object;o.initPoint=0,o.borderPos1=70,o.borderPos2=-800,o.nodeDatas=this.curData;o.createUIFun=function(e){var t=engine.memory.getPrefab(nextLoadPrefab.result_node_prefab);return t.addComponent("ResultNode").initialize(e,this),t.y=e.pos,a.moveLayer.addChild(t),t},this.setData(o)},update:function(){null!=this.curData&&this.curData.length>0&&this.updateView(this.moveLayer.y),this.showRankView()},showRankView:function(){1!=this.isShowRank&&null!=this.curFriendData&&0!=engine.memory.isExistRes(nextLoadPrefab.result_node_prefab)&&(this.isShowRank=!0,this.refreshRankInfo())},clickHomeBtn:function(){1==this.isCanClick&&sceneControl.turnMainScene()},clickAgainBtn:function(){1==this.isCanClick&&sceneControl.turnFightScene()},clickWatchBtn:function(){if(1==this.isCanClick)if(1===openModuleValue.forFBCheck||1==openModuleValue.noAD)this.successFun();else{var e=videoAdKeyList[parseInt(Math.random()*videoAdKeyList.length)];gameSDK.faceBookAdvertisement.showRewardVideoAd(e,this.successFun.bind(this))}},successFun:function(){},clickInviteBtn:function(){1==this.isCanClick&&gameSDK.faceBookUpdateAsync.sendFaceBookFriend(getSendFriendData())}}),window.isHaveSurpassLayer=function(){var e=!1;null!=fightControl.lastSurpass&&(e=!0),1==e&&1==engine.memory.isExistRes(nextLoadPrefab.surpass_layer_prefab)?openWindowLayer(openTypeEm.surpass):openWindowLayer(openTypeEm.resultLayer)},cc._RF.pop()},{GameListLayer:"GameListLayer"}],ResultNode:[function(e,t,n){"use strict";cc._RF.push(t,"d076f+VH6hMHrNOYDVAYP5O","ResultNode");var i=e("GameExternalImage");cc.Class({extends:cc.Component,properties:{playerID:null},onDestroy:function(){this.playerID=null},destroyClass:function(){this.removeEvent(),this.node.destroy()},addEvent:function(){this.node.getChildByName("sharebtn").on(cc.Node.EventType.TOUCH_END,this.clickShareBtn,this)},removeEvent:function(){this.node.getChildByName("sharebtn").off(cc.Node.EventType.TOUCH_END,this.clickShareBtn,this)},initialize:function(e){this.playerID=e.playerID,this.addEvent(),this.initUI(e)},initUI:function(e){var t=this.node.getChildByName("rankimg"),n=this.node.getChildByName("ranknum");e.rank<=3?(n.active=!1,t.active=!0,t.getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.nextloadimg1,"rank_"+e.rank)):(n.active=!0,t.active=!1,n.getComponent(cc.Label).string=e.rank);var a=this.node.getChildByName("headbg"),o=new i;o.loadImage(e.photo,null,a.getContentSize().width-6,a.getContentSize().height-6),a.addChild(o,-1),this.node.getChildByName("name").getComponent(cc.Label).string=myGameGetShortName(e.name),this.node.getChildByName("score").getComponent("GameArtWord").setString(""+e.score);var r=this.node.getChildByName("bg").getComponent(cc.Sprite),s=this.node.getChildByName("sharebtn").getComponent(cc.Sprite);e.playerID==gameSDK.sdkPlayInfo.playerID?(r.spriteFrame=engine.memory.getSpriteFrame(loginLoadImage.scaleimg1,"scaleimg20"),s.spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.nextloadimg1,"share")):(r.spriteFrame=engine.memory.getSpriteFrame(loginLoadImage.scaleimg1,"scaleimg19"),s.spriteFrame=engine.memory.getSpriteFrame(nextLoadImage.nextloadimg1,"playgame"))},clickShareBtn:function(){this.playerID==gameSDK.sdkPlayInfo.playerID?gameSDK.faceBookUpdateAsync.shareGame(getShareData()):gameSDK.faceBookUpdateAsync.appointFaceBookFriendAndUpdateAsync(getAppointInviteData(this.playerID))}}),cc._RF.pop()},{GameExternalImage:"GameExternalImage"}],ResurgenceLayer:[function(e,t,n){"use strict";cc._RF.push(t,"c58f8gEDMFBvZ0cb0gCssLm","ResurgenceLayer"),cc.Class({extends:cc.Component,properties:{curTime:null,totalTime:null,timeTxt:null,timePro:null,isPause:null,noWatchBtn:null},onDestroy:function(){this.curTime=null,this.totalTime=null,this.timeTxt=null,this.timePro=null,this.isPause=null,this.noWatchBtn=null},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addEvent:function(){var e=this.node.getChildByName("actionnode");e.getChildByName("watchbtn").on(cc.Node.EventType.TOUCH_END,this.clickWatchBtn,this),e.getChildByName("nowatch").on(cc.Node.EventType.TOUCH_END,this.clickNoWatchBtn,this)},removeEvent:function(){var e=this.node.getChildByName("actionnode");e.getChildByName("watchbtn").off(cc.Node.EventType.TOUCH_END,this.clickWatchBtn,this),e.getChildByName("nowatch").off(cc.Node.EventType.TOUCH_END,this.clickNoWatchBtn,this)},initialize:function(){this.isPause=!0;var e=this.node.getChildByName("actionnode");if(this.noWatchBtn=e.getChildByName("nowatch"),this.noWatchBtn.active=!1,this.addEvent(),this.totalTime=getGlobleDic(19),this.curTime=this.totalTime,this.timePro=e.getChildByName("timepro").getComponent(cc.ProgressBar),this.timeTxt=e.getChildByName("times").getComponent(cc.Label),this.timeTxt.string=Math.ceil(this.curTime),this.refreshTime(),this.runEnterAction(),1==fightControl.curResurgence&&1!=openModuleValue.isTimeOut){var t=fightControl.targetScore-fightControl.curScore;e.getChildByName("continue").getComponent(cc.Label).string=getLanguageDic(1039).replace("%s",t)}},runEnterAction:function(){var e=this.node.getChildByName("actionnode");e.scale=.5;var t=this;e.runAction(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.1,.9),cc.scaleTo(.1,1),cc.callFunc(function(){t.isPause=!1})))},update:function(e){1!=this.isPause&&(this.curTime-=e,this.curTime<0&&(this.curTime=0),this.timeTxt.string=Math.ceil(this.curTime),this.refreshTime())},refreshTime:function(){0==this.noWatchBtn.active&&this.curTime<=this.totalTime-2&&(this.noWatchBtn.active=!0,this.noWatchBtn.opacity=0,this.noWatchBtn.runAction(cc.fadeIn(.3))),this.curTime<=0&&(this.isPause=!0,this.curTime=0,openWindowLayer(openTypeEm.gameOver),this.destroyClass()),this.timePro.progress=this.curTime/this.totalTime},clickWatchBtn:function(){if(1!=this.isPause){this.isPause=!0;var e=this;if(1===openModuleValue.forFBCheck||1==openModuleValue.noAD)this.successFun();else{var t=videoAdKeyList[parseInt(Math.random()*videoAdKeyList.length)];gameSDK.faceBookAdvertisement.showRewardVideoAd(t,this.successFun.bind(this),function(){e.isPause=!1})}}},successFun:function(){gaLogEvent.logByDate("关卡复活",fightControl.curLevel),gameSDK.logEvent("guankafuhuo",fightControl.curLevel,{guankafuhuo:"guankafuhuo"}),fightControl.isWatch=!0,fightControl.resurgenceData(),engine.eventM.emit(event_id.RESURGENCE_REFRESH),this.destroyClass()},clickNoWatchBtn:function(){openWindowLayer(openTypeEm.gameOver),this.destroyClass()}}),cc._RF.pop()},{}],SceneControl:[function(e,t,n){"use strict";cc._RF.push(t,"fbbc7iTRGlLQpCS/Zx22dFR","SceneControl"),window.SceneType=cc.Enum({login:1,main:2,fight:3});e("GameScene");window.persistNodeConfig={},cc.Class({properties:{curSceneType:null,nodeComponentList:[],transitionData:null,isLoadCompleteByLoginScene:!1},turnMainScene:function(e){engine.CPUM.stopCPU(),this.removePersistNode("MainScene"),engine.memory.cleanManagement(),this.transitionData=e,cc.director.loadScene("MainScene",function(){ccLog(".....MainScene转场完毕...."),engine.CPUM.openCPU()})},turnLoginScene:function(){engine.CPUM.stopCPU(),this.removePersistNode("LoginScene"),engine.memory.cleanManagement(),cc.director.loadScene("LoginScene",function(){ccLog(".....LoginScene转场完毕...."),engine.CPUM.openCPU()})},turnFightScene:function(e){engine.CPUM.stopCPU(),this.removePersistNode("FightScene"),engine.memory.cleanManagement(),this.transitionData=e,cc.director.loadScene("FightScene",function(){ccLog(".....FightScene转场完毕...."),engine.CPUM.openCPU()})},transitionComplete:function(){null!=this.transitionData&&null!=this.transitionData.completeFun&&(this.transitionData.completeFun(),this.transitionData.completeFun=null)},resetTransitionData:function(){this.transitionData=null},addTips:function(e){var t=cc.director.getScene();if(null!=t){var n=t.getChildByName("Canvas");null!=n&&null!=n.addTips&&n.addTips(e)}},addChatMainNode:function(e){},addPersistNode:function(e,t){var n=t.node;if(1==this.nodeIsPersistInScene(e,n)){cc.game.addPersistRootNode(n);for(var i=!1,a=0;a<this.nodeComponentList.length;a++)if(this.nodeComponentList[a].node.name==n.name){i=!0;break}0==i&&this.nodeComponentList.push(t)}},removePersistNode:function(e){for(var t=this.nodeComponentList.length-1;t>=0;t--){var n=this.nodeComponentList[t].node;if(0==this.nodeIsPersistInScene(e,n))cc.game.removePersistRootNode(n),this.nodeComponentList.splice(t,1)[0].destroyClass()}},nodeIsPersistInScene:function(e,t){var n=!1,i=t.name,a=persistNodeConfig[i];if(null!=a)for(var o=0;o<a.length;o++)if(a[o]==e){n=!0;break}return n},addTipsWindow:function(e){var t=cc.director.getScene();if(null!=t){var n=t.getChildByName("Canvas");null!=n&&null!=n.addTipsWindow&&n.addTipsWindow(e)}},addNewbieLayer:function(e){var t=cc.director.getScene();if(null!=t){var n=t.getChildByName("Canvas");null!=n&&null!=n.addNewbieLayer&&n.addNewbieLayer(e)}},removeNewbieLayer:function(e){var t=cc.director.getScene();if(null!=t){var n=t.getChildByName("Canvas");null!=n&&null!=n.removeNewbieLayer&&n.removeNewbieLayer(e)}},showReward:function(e){var t=cc.director.getScene();if(null!=t){var n=t.getChildByName("Canvas");null!=n&&null!=n.showReward&&n.showReward(e)}}}),cc._RF.pop()},{GameScene:"GameScene"}],SurpassLayer:[function(e,t,n){"use strict";cc._RF.push(t,"1982a9GaYVMa7On28PV7cmt","SurpassLayer");var i=e("GameExternalImage");cc.Class({extends:cc.Component,properties:{isCanClick:null},onDestroy:function(){this.isCanClick=null},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addEvent:function(){this.node.getChildByName("continuebtn").on(cc.Node.EventType.TOUCH_END,this.clickContinueBtn,this),this.node.getChildByName("sharebtn").on(cc.Node.EventType.TOUCH_END,this.clickShareBtn,this)},removeEvent:function(){this.node.getChildByName("continuebtn").off(cc.Node.EventType.TOUCH_END,this.clickContinueBtn,this),this.node.getChildByName("sharebtn").on(cc.Node.EventType.TOUCH_END,this.clickShareBtn,this)},initialize:function(){this.isCanClick=!1,this.addEvent(),this.showOwnInfo(),this.showOtherInfo(),this.lightAction(),this.upAction(),this.downAction(),this.arrowUpAction(),this.buttonAction(),this.titleAction()},showOwnInfo:function(){var e=this.node.getChildByName("mynode");e.getChildByName("uparrows").getChildByName("txt").getComponent(cc.Label).string=~~(90*Math.random()+10);var t=e.getChildByName("head"),n=new i;n.loadImage(gameSDK.sdkPlayInfo.photo,null,t.width,t.height),t.addChild(n),e.getChildByName("name").getComponent(cc.Label).string=myGameGetShortName(gameSDK.sdkPlayInfo.name),e.getChildByName("score").getComponent(cc.Label).string=fightControl.curScore;var a=heroData.gradeData.getCurGradeByScore();e.getChildByName("gradeicon").getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(needLoadImage.mastloadimg1,"gradeicon"+a)},showOtherInfo:function(){var e=null;e=null!=fightControl.lastSurpass?fightControl.lastSurpass:fightControl.getSurpassInfo();var t=this.node.getChildByName("othernode"),n=t.getChildByName("head"),a=new i;a.loadImage(e.photo,null,n.width,n.height),n.addChild(a),t.getChildByName("name").getComponent(cc.Label).string=myGameGetShortName(e.name),t.getChildByName("score").getComponent(cc.Label).string=e.score;var o=heroData.gradeData.getCurGradeByScore(e.score);t.getChildByName("gradeicon").getComponent(cc.Sprite).spriteFrame=engine.memory.getSpriteFrame(needLoadImage.mastloadimg1,"gradeicon"+o)},lightAction:function(){var e=this.node.getChildByName("light");e.setScale(0),e.runAction(cc.sequence(cc.scaleTo(7/24,2.2),cc.scaleTo(7/24,2),cc.rotateBy(800,36e3)))},upAction:function(){var e=this.node.getChildByName("mynode");e.y=-90,e.x=201+engineGlobal.offX;var t=cc.sequence(cc.delayTime(.5),cc.scaleTo(.125,1.3),cc.scaleTo(.125,1),cc.delayTime(.125),cc.moveTo(4/24,cc.v2(-201-engineGlobal.offX,466)),cc.scaleTo(.125,1.03,.95),cc.scaleTo(.125,1,1),cc.callFunc(function(){this.isCanClick=!0}.bind(this)));e.runAction(t)},downAction:function(){var e=this.node.getChildByName("othernode");e.y=466,e.x=-201-engineGlobal.offX;var t=cc.sequence(cc.delayTime(.5),cc.scaleTo(.125,1.3),cc.scaleTo(.125,1),cc.delayTime(.125),cc.moveTo(4/24,cc.v2(201+engineGlobal.offX,-90)),cc.scaleTo(.125,1.03,.95),cc.scaleTo(.125,1,1));e.runAction(t)},titleAction:function(){var e=this.node.getChildByName("rankup");e.scaleY=0;var t=cc.sequence(cc.delayTime(.5),cc.scaleTo(7/24,1,1.3),cc.scaleTo(7/24,1.03,.95),cc.scaleTo(7/24,1,1));e.runAction(t)},arrowUpAction:function(){},buttonAction:function(){var e=function(){var e=cc.spawn(cc.moveBy(.4,0,40),cc.fadeIn(.4));return cc.sequence(cc.delayTime(.7),e,cc.moveBy(.2,0,-10))},t=this.node.getChildByName("continuebtn"),n=this.node.getChildByName("sharebtn");t.y=-542,t.opacity=0,n.y=t.y,n.opacity=0,t.runAction(e()),n.runAction(e())},clickContinueBtn:function(){1==this.isCanClick&&(openWindowLayer(openTypeEm.resultLayer),this.destroyClass())},clickShareBtn:function(){1==this.isCanClick&&gameSDK.faceBookUpdateAsync.shareGame(getShareData())},actionEnd:function(){this.isCanClick=!0}}),cc._RF.pop()},{GameExternalImage:"GameExternalImage"}],TargetLayer:[function(e,t,n){"use strict";cc._RF.push(t,"fc156mluptKDrE78xn4dfud","TargetLayer");var i=e("GameExternalImage");cc.Class({extends:cc.Component,properties:{},onDestroy:function(){engine.eventM.emit(event_id.SHOW_TARGET_ACTION)},destroyClass:function(){null!=this.node&&this.node.destroy()},initialize:function(){var e=this.node.getChildByName("bgnode");e.active=!0;var t=cc.spawn(cc.moveBy(.5,0,100),cc.fadeOut(.5)),n=this;e.runAction(cc.sequence(cc.delayTime(1),cc.moveBy(.5,0,100),t,cc.callFunc(function(){n.destroyClass()})));var a=e.getChildByName("head"),o=new i;o.loadImage(fightControl.surpassInfo.photo,null,a.getContentSize().width-6,a.getContentSize().height-6),a.addChild(o,-1),e.getChildByName("score").getComponent(cc.Label).string=fightControl.surpassInfo.score,e.getChildByName("name").getComponent(cc.Label).string=myGameGetShortName(fightControl.surpassInfo.name)}}),cc._RF.pop()},{GameExternalImage:"GameExternalImage"}],TileMapData:[function(e,t,n){"use strict";cc._RF.push(t,"5f035Dx3wJOpq+5iumzPP6F","TileMapData");cc.Class({properties:{offsetX:null,offsetY:null,gridWidth:null,gridHeight:null,gridMaxX:null,gridMaxY:null,isInit:null,gridArr:null,defaultGridValue:null,gridAngle:90},destroy:function(){this.offsetX=null,this.offsetY=null,this.gridWidth=null,this.gridHeight=null,this.gridMaxX=null,this.gridMaxY=null,this.isInit=null,this.gridArr=null,this.defaultGridValue=null,this.gridAngle=null},initialize:function(e){if(1!=this.isInit){this.isInit=!0,null!=e.gridAngle&&(this.gridAngle=e.gridAngle),this.offsetX=e.offsetX,this.offsetY=e.offsetY,this.gridWidth=e.gridWidth,this.gridHeight=e.gridHeight,this.gridMaxX=e.gridMaxX,this.gridMaxY=e.gridMaxY,this.defaultGridValue=e.defaultGridValue,this.gridArr=[];for(var t=0;t<this.gridMaxX;t++){for(var n=[],i=0;i<this.gridMaxY;i++)n.push(this.defaultGridValue);this.gridArr.push(n)}}},setTileMapAttribute:function(e){this.offsetX=e.offsetX,this.offsetY=e.offsetY,this.gridWidth=e.gridWidth,this.gridHeight=e.gridHeight,this.gridMaxX=e.gridMaxX,this.gridMaxY=e.gridMaxY,this.defaultGridValue=e.defaultGridValue,this.gridArr=[];for(var t=0;t<this.gridMaxX;t++){for(var n=[],i=0;i<this.gridMaxY;i++)n.push(this.defaultGridValue);this.gridArr.push(n)}},clearGridInfo:function(e,t){this.setGridInfo(e,t,this.defaultGridValue)},setGridInfo:function(e,t,n,i){if(null!=n){if(n.gridX=e,n.gridY=t,1==i){var a=this.getScenePointByGridPoint(e,t);n.x=a.x,n.y=a.y}n.setZIndex()}return this.gridArr[e][t]=n,a},getGridInfoByGridPoint:function(e,t){return e<0||t<0||e>=this.gridMaxX||t>=this.gridMaxY?null:this.gridArr[e][t]},getGridInfoByScenePoint:function(e,t){var n=this.getGridPointByScenePoint(e,t);return this.getGridInfoByGridPoint(n.x,n.y)},getGridPointByScenePoint:function(e,t){var n,i;return 90==this.gridAngle?(n=Math.floor((e-this.offsetX)/this.gridWidth),i=this.gridMaxY-1-Math.floor((t-this.offsetY)/this.gridHeight)):(e=e-this.offsetX+this.gridWidth/2,t-=this.offsetY,n=Math.floor(e/this.gridWidth-t/this.gridHeight),i=this.gridMaxY-1-Math.floor(e/this.gridWidth+t/this.gridHeight)),cc.v2(n,i)},getScenePointByGridPoint:function(e,t){var n=cc.v2(0,0);return 90==this.gridAngle?(n.x=e*this.gridWidth+this.gridWidth/2,n.y=(this.gridMaxY-1-t)*this.gridHeight+this.gridHeight/2):(n.x=(e+(this.gridMaxY-1-t))*this.gridWidth/2,n.y=(this.gridMaxY-1-t-e)*this.gridHeight/2),n.x=n.x+this.offsetX,n.y=n.y+this.offsetY,n},settingGridByAStar:function(e){for(var t=0;t<this.gridArr.length;t++)for(var n=0;n<this.gridArr[t].length;n++){var i=this.gridArr[t][n];if(null!=i){var a=this.getGridPointByScenePoint(t,n);i.x=a.x,i.y=a.y}}}});cc._RF.pop()},{}],TipsLayer:[function(e,t,n){"use strict";cc._RF.push(t,"26b03Krsp9FSY7Yw+49fK5Z","TipsLayer"),cc.Class({extends:cc.Component,properties:{callFun:null},onDestroy:function(){this.callFun=null},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addEvent:function(){this.node.getChildByName("okbtn").on(cc.Node.EventType.TOUCH_END,this.clickOkBtn,this),this.node.getChildByName("nobtn").on(cc.Node.EventType.TOUCH_END,this.clickNoBtn,this)},removeEvent:function(){this.node.getChildByName("okbtn").off(cc.Node.EventType.TOUCH_END,this.clickOkBtn,this),this.node.getChildByName("nobtn").off(cc.Node.EventType.TOUCH_END,this.clickNoBtn,this)},initialize:function(e){this.addEvent(),this.callFun=e.callFun;var t=this.node.getChildByName("okbtn"),n=this.node.getChildByName("nobtn"),i=t.getChildByName("txt").getComponent(cc.Label);1==e.isNeedNo?(t.x=-n.x,n.active=!0,i.string=getLanguageDic(1028)):(t.x=0,n.active=!1,i.string=getLanguageDic(1013)),this.node.getChildByName("des").getComponent(cc.Label).string=e.des},clickOkBtn:function(){null!=this.callFun&&this.callFun(),this.destroyClass()},clickNoBtn:function(){this.destroyClass()}}),cc._RF.pop()},{}],WatchAdvertLayer:[function(e,t,n){"use strict";cc._RF.push(t,"0327fPPfq9Mo437sQ5KQqDf","WatchAdvertLayer"),window.watchOpenTypeEm=cc.Enum({getGem:0,dailyGift:1,parachute:2,gemNoEnough:4,scoreParachute:5}),cc.Class({extends:cc.Component,properties:{openType:null,reward:null},onDestroy:function(){engine.eventM.emit(event_id.REFRESH_PAUSE,!1),this.openType=null,this.reward=null},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addEvent:function(){this.node.getChildByName("closebtn").on(cc.Node.EventType.TOUCH_END,this.clickCloseBtn,this),this.node.getChildByName("watchbtn").on(cc.Node.EventType.TOUCH_END,this.clickWatchBtn,this)},removeEvent:function(){this.node.getChildByName("closebtn").off(cc.Node.EventType.TOUCH_END,this.clickCloseBtn,this),this.node.getChildByName("watchbtn").off(cc.Node.EventType.TOUCH_END,this.clickWatchBtn,this)},initialize:function(e){this.openType=e,this.addEvent(),this.openType==watchOpenTypeEm.dailyGift?this.showDailyGift():this.openType==watchOpenTypeEm.scoreParachute?this.showAddScoreParachute():this.refreshLayer()},refreshLayer:function(){this.node.getChildByName("dailygift").active=!1,this.node.getChildByName("addscore").active=!1,this.node.getChildByName("gift").active=!0,this.node.getChildByName("count").active=!0,this.node.getChildByName("light").active=!0;var e="";switch(this.reward=[],this.openType){case watchOpenTypeEm.getGem:this.reward.push(getItemConfig(itemIDConfig.gem,getGlobleDic(11))),e=getLanguageDic(1027);break;case watchOpenTypeEm.gemNoEnough:this.reward.push(getItemConfig(itemIDConfig.gem,getGlobleDic(11))),e=getLanguageDic(1020);break;case watchOpenTypeEm.parachute:e=getLanguageDic(1021);var t=[getItemConfig(itemIDConfig.gem,50),getItemConfig(itemIDConfig.addTime,1),getItemConfig(itemIDConfig.tips,1),getItemConfig(itemIDConfig.bomb,1),getItemConfig(itemIDConfig.resort,1)],n=GameTool.getRandomInt(0,t.length-1);this.reward.push(t[n])}this.node.getChildByName("title").getComponent(cc.Label).string=e,this.node.getChildByName("gift").getComponent(cc.Sprite).spriteFrame=getItemSpriteFrame(this.reward[0].id),this.node.getChildByName("count").getComponent(cc.Label).string="x"+this.reward[0].num},showAddScoreParachute:function(){var e=this.node.getChildByName("titlebg");e.y=337;var t=this.node.getChildByName("title");t.y=e.y+10;var n=this.node.getChildByName("bg");n.width=671,n.height=661;var i=this.node.getChildByName("bg2");i.width=621,i.height=466;var a=this.node.getChildByName("closebtn");a.x=307,a.y=327,this.node.getChildByName("watchbtn").y=-217;var o=this.node.getChildByName("addscore");t.getComponent(cc.Label).string=getLanguageDic(1021),this.node.getChildByName("dailygift").active=!1,this.node.getChildByName("gift").active=!1,this.node.getChildByName("count").active=!1,this.node.getChildByName("light").active=!1,o.active=!0;var r=fightControl.targetScore-fightControl.curScore;o.getChildByName("scoretxt").getComponent(cc.Label).string="+"+r},showDailyGift:function(){var e=this.node.getChildByName("titlebg");e.y=337;var t=this.node.getChildByName("title");t.y=e.y+10;var n=this.node.getChildByName("bg");n.width=671,n.height=661;var i=this.node.getChildByName("bg2");i.width=621,i.height=466;var a=this.node.getChildByName("closebtn");a.x=307,a.y=327,this.node.getChildByName("watchbtn").y=-217;var o=this.node.getChildByName("dailygift");t.getComponent(cc.Label).string=getLanguageDic(1022),this.node.getChildByName("gift").active=!1,this.node.getChildByName("count").active=!1,this.node.getChildByName("light").active=!1,this.node.getChildByName("addscore").active=!1,o.active=!0;for(var r=0;r<3;r++){var s=heroData.dailyGiftReward[r],c=o.getChildByName("itemicon"+(r+1));c.getComponent(cc.Sprite).spriteFrame=getItemSpriteFrame(s.id),c.getChildByName("num").getComponent(cc.Label).string=s.num}this.reward=heroData.dailyGiftReward},clickWatchBtn:function(){if(this.openType!=watchOpenTypeEm.dailyGift||1!=heroData.dailyGift)if(1===openModuleValue.forFBCheck||1==openModuleValue.noAD)this.successFun();else{var e=videoAdKeyList[parseInt(Math.random()*videoAdKeyList.length)];gameSDK.faceBookAdvertisement.showRewardVideoAd(e,this.successFun.bind(this))}else openWindowLayer(openTypeEm.tipsLayer,{des:getLanguageDic(1012)})},successFun:function(){if(this.openType==watchOpenTypeEm.scoreParachute)gaLogEvent.logByDate("领取补分降落伞",1),engine.eventM.emit(event_id.REWARD_ADD_SCORE_PARACHUTE);else{switch(heroData.addItemByObj(this.reward),sceneControl.showReward(this.reward),this.openType){case watchOpenTypeEm.dailyGift:heroData.dailyGift=1,engine.eventM.emit(event_id.REFRESH_DAILY_GIFT_BTN,!1),gaLogEvent.logByDate("每日礼包",1);break;case watchOpenTypeEm.getGem:case watchOpenTypeEm.gemNoEnough:gaLogEvent.logByDate("看广告得钻石",1);break;case watchOpenTypeEm.parachute:gaLogEvent.logByDate("降落伞领取",1)}heroData.saveData()}this.destroyClass()},clickCloseBtn:function(){this.destroyClass()}}),cc._RF.pop()},{}],analytics_config:[function(e,t,n){"use strict";function i(){var e=Date.now()+performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}cc._RF.push(t,"17be4iVuEpEm7Xc4pYKycBn","analytics_config"),window.gaLogEvent={logByDate:function(e,t){cc.log(e,t)}},function(){}(),cc._RF.pop()},{}],analytics:[function(e,t,n){"use strict";cc._RF.push(t,"0403aek1shCfLXjF6jHCjts","analytics");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){var e=this||self,t=function(t,n){t=t.split(".");var i,a=e;t[0]in a||void 0===a.execScript||a.execScript("var "+t[0]);for(;t.length&&(i=t.shift());)t.length||void 0===n?a=a[i]&&a[i]!==Object.prototype[i]?a[i]:a[i]={}:a[i]=n},n=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i=function(e){for(var t in e)if(e.hasOwnProperty(t))return!0;return!1},a=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,o=window,r=document,s=function(e,t){r.addEventListener?r.addEventListener(e,t,!1):r.attachEvent&&r.attachEvent("on"+e,t)},c=/:[0-9]+$/,l=function(e,t){t&&(t=String(t).toLowerCase()),"protocol"!==t&&"port"!==t||(e.protocol=h(e.protocol)||h(o.location.protocol)),"port"===t?e.port=String(Number(e.hostname?e.port:o.location.port)||("http"==e.protocol?80:"https"==e.protocol?443:"")):"host"===t&&(e.hostname=(e.hostname||o.location.hostname).replace(c,"").toLowerCase());var n=h(e.protocol);switch(t&&(t=String(t).toLowerCase()),t){case"url_no_fragment":t="",e&&e.href&&(t=0>(t=e.href.indexOf("#"))?e.href:e.href.substr(0,t)),e=t;break;case"protocol":e=n;break;case"host":e=e.hostname.replace(c,"").toLowerCase();break;case"port":e=String(Number(e.port)||("http"==n?80:"https"==n?443:""));break;case"path":e=(e="/"==e.pathname.substr(0,1)?e.pathname:"/"+e.pathname).split("/");e:if(t=e[e.length-1],n=[],Array.prototype.indexOf)t=n.indexOf(t),t="number"==typeof t?t:-1;else{for(var i=0;i<n.length;i++)if(n[i]===t){t=i;break e}t=-1}0<=t&&(e[e.length-1]=""),e=e.join("/");break;case"query":e=e.search.replace("?","");break;case"extension":e=(e=1<(e=e.pathname.split(".")).length?e[e.length-1]:"").split("/")[0];break;case"fragment":e=e.hash.replace("#","");break;default:e=e&&e.href}return e},h=function(e){return e?e.replace(":","").toLowerCase():""},d=function(e){var t=r.createElement("a");e&&(t.href=e),"/"!==(e=t.pathname)[0]&&(e="/"+e);var n=t.hostname.replace(c,"");return{href:t.href,protocol:t.protocol,host:t.host,hostname:n,pathname:e,search:t.search,hash:t.hash,port:t.port}};function u(){for(var e=m,t={},n=0;n<e.length;++n)t[e[n]]=n;return t}function g(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return(e+=e.toLowerCase()+"0123456789-_")+"."}var m,p,f,y=function(e){m=m||g(),p=p||u();for(var t=[],n=0;n<e.length;n+=3){var i=n+1<e.length,a=n+2<e.length,o=e.charCodeAt(n),r=i?e.charCodeAt(n+1):0,s=a?e.charCodeAt(n+2):0,c=o>>2;o=(3&o)<<4|r>>4,r=(15&r)<<2|s>>6,s&=63,a||(s=64,i||(r=64)),t.push(m[c],m[o],m[r],m[s])}return t.join("")},v=function(e){function t(t){for(;i<e.length;){var n=e.charAt(i++),a=p[n];if(null!=a)return a;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}m=m||g(),p=p||u();for(var n="",i=0;;){var a=t(-1),o=t(0),r=t(64),s=t(64);if(64===s&&-1===a)return n;n+=String.fromCharCode(a<<2|o>>4),64!=r&&(n+=String.fromCharCode(o<<4&240|r>>2),64!=s&&(n+=String.fromCharCode(r<<6&192|s)))}};function C(e,t){if(!e||t===r.location.hostname)return!1;for(var n=0;n<e.length;n++)if(e[n]instanceof RegExp){if(e[n].test(t))return!0}else if(0<=t.indexOf(e[n]))return!0;return!1}var D=function(){var e={},t=o.google_tag_data;return o.google_tag_data=void 0===t?e:t,(t=(e=o.google_tag_data).gl)&&t.decorators||(t={decorators:[]},e.gl=t),t},S=/(.*?)\*(.*?)\*(.*)/,b=/([^?#]+)(\?[^#]*)?(#.*)?/,T=/(.*?)(^|&)_gl=([^&]*)&?(.*)/,L=function(e){var t,n=[];for(t in e)if(e.hasOwnProperty(t)){var i=e[t];void 0!==i&&i==i&&null!==i&&"[object Object]"!==i.toString()&&(n.push(t),n.push(y(String(i))))}return e=n.join("*"),["1",w(e),e].join("*")},w=function(e,t){if(e=[window.navigator.userAgent,(new Date).getTimezoneOffset(),window.navigator.userLanguage||window.navigator.language,Math.floor((new Date).getTime()/60/1e3)-(void 0===t?0:t),e].join("*"),!(t=f)){t=Array(256);for(var n=0;256>n;n++){for(var i=n,a=0;8>a;a++)i=1&i?i>>>1^3988292384:i>>>1;t[n]=i}}for(f=t,t=4294967295,n=0;n<e.length;n++)t=t>>>8^f[255&(t^e.charCodeAt(n))];return((-1^t)>>>0).toString(36)},I=function(e){return function(t){var n=d(o.location.href),i=n.search.replace("?","");e:{for(var a=i.split("&"),r=0;r<a.length;r++){var s=a[r].split("=");if("_gl"===decodeURIComponent(s[0]).replace(/\+/g," ")){a=s.slice(1).join("=");break e}}a=void 0}t.query=k(a||"")||{},r=(a=l(n,"fragment")).match(T),t.fragment=k(r&&r[3]||"")||{},e&&E(n,i,a)}};function N(e){var t=T.exec(e);if(t){var n=t[2],i=t[4];e=t[1],i&&(e=e+n+i)}return e}var E=function(e,t,n){function i(e,t){return(e=N(e)).length&&(e=t+e),e}o.history&&o.history.replaceState&&(T.test(t)||T.test(n))&&(e=l(e,"path"),t=i(t,"?"),n=i(n,"#"),o.history.replaceState({},void 0,""+e+t+n))},k=function(e){var t=void 0===t?3:t;try{if(e){e:{for(var n=0;3>n;++n){var i=S.exec(e);if(i){var a=i;break e}e=decodeURIComponent(e)}a=void 0}if(a&&"1"===a[1]){var o=a[2],r=a[3];e:{for(a=0;a<t;++a)if(o===w(r,a)){var s=!0;break e}s=!1}if(s){t={};var c=r?r.split("*"):[];for(r=0;r<c.length;r+=2)t[c[r]]=v(c[r+1]);return t}}}}catch(e){console.error("cjh error: "+e+", stack: "+e.stack)}};function _(e,t,n){function i(e){var t=(e=N(e)).charAt(e.length-1);return e&&"&"!==t&&(e+="&"),e+r}n=void 0!==n&&n;var a=b.exec(t);if(!a)return"";t=a[1];var o=a[2]||"";a=a[3]||"";var r="_gl="+e;return n?a="#"+i(a.substring(1)):o="?"+i(o.substring(1)),""+t+o+a}function B(e,t,a){for(var o={},r={},s=D().decorators,c=0;c<s.length;++c){var l=s[c];(!a||l.forms)&&C(l.domains,t)&&(l.fragment?n(r,l.callback()):n(o,l.callback()))}i(o)&&(t=L(o),a?x(t,e):A(t,e,!1)),!a&&i(r)&&A(a=L(r),e,!0)}function A(e,t,n){t.href&&(e=_(e,t.href,void 0!==n&&n),a.test(e)&&(t.href=e))}function x(e,t){if(t&&t.action){var n=(t.method||"").toLowerCase();if("get"===n){n=t.childNodes||[];for(var i=!1,o=0;o<n.length;o++){var s=n[o];if("_gl"===s.name){s.setAttribute("value",e),i=!0;break}}i||((n=r.createElement("input")).setAttribute("type","hidden"),n.setAttribute("name","_gl"),n.setAttribute("value",e),t.appendChild(n))}else"post"===n&&(e=_(e,t.action),a.test(e)&&(t.action=e))}}var R=function(e){try{e:{var t=e.target||e.srcElement||{};for(e=100;t&&0<e;){if(t.href&&t.nodeName.match(/^a(?:rea)?$/i)){var n=t;break e}t=t.parentNode,e--}n=null}if(n){var i=n.protocol;"http:"!==i&&"https:"!==i||B(n,n.hostname,!1)}}catch(e){console.error("cjh error: "+e+", stack: "+e.stack)}},F=function(e){try{var t=e.target||e.srcElement||{};if(t.action)B(t,l(d(t.action),"host"),!0)}catch(e){console.error("cjh error: "+e+", stack: "+e.stack)}};t("google_tag_data.glBridge.auto",function(e,t,n,i){var a=D();a.init||(s("mousedown",R),s("keyup",R),s("submit",F),a.init=!0),e={callback:e,domains:t,fragment:"fragment"===n,forms:!!i},D().decorators.push(e)}),t("google_tag_data.glBridge.decorate",function(e,t,n){if(n=!!n,e=L(e),t.tagName){if("a"==t.tagName.toLowerCase())return A(e,t,n);if("form"==t.tagName.toLowerCase())return x(e,t)}if("string"==typeof t)return _(e,t,n)}),t("google_tag_data.glBridge.generate",L),t("google_tag_data.glBridge.get",function(e,t){var i=I(!!t);return(t=D()).data||(t.data={query:{},fragment:{}},i(t.data)),i={},(t=t.data)&&(n(i,t.query),e&&n(i,t.fragment)),i})})(window),function(){function e(e){var t,n=1;if(e)for(n=0,t=e.length-1;0<=t;t--){var i=e.charCodeAt(t);n=0!=(i=266338304&(n=(n<<6&268435455)+i+(i<<14)))?n^i>>21:n}return n}var t=function(e){this.w=e||[]};t.prototype.set=function(e){this.w[e]=!0},t.prototype.encode=function(){for(var e=[],t=0;t<this.w.length;t++)this.w[t]&&(e[Math.floor(t/6)]^=1<<t%6);for(t=0;t<e.length;t++)e[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(e[t]||0);return e.join("")+"~"};var n,a,o=window.GoogleAnalyticsObject;if((n=void 0!=o)&&(n=-1<(o.constructor+"").indexOf("String")),a=n){var r=window.GoogleAnalyticsObject;a=r?r.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""):""}var s=a||"ga",c=/^(?:utma\.)?\d+\.\d+$/,l=/^amp-[\w.-]{22,64}$/,h=!1,d=new t;function u(e){d.set(e)}var g=function(e){e=m(e),e=new t(e);for(var n=d.w.slice(),i=0;i<e.w.length;i++)n[i]=n[i]||e.w[i];return new t(n).encode()},m=function(e){return e=e.get(zt),f(e)||(e=[]),e},p=function(e){return"function"==typeof e},f=function(e){return"[object Array]"==Object.prototype.toString.call(Object(e))},y=function(e){return void 0!=e&&-1<(e.constructor+"").indexOf("String")},v=function(e,t){return 0==e.indexOf(t)},C=function(e){return e?e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""):""},D=function(){for(var t=M.navigator.userAgent+(O.cookie?O.cookie:"")+(O.referrer?O.referrer:""),n=t.length,i=M.history.length;0<i;)t+=i--^n++;return[Ee()^2147483647&e(t),Math.round((new Date).getTime()/1e3)].join(".")},S=function(e){var t=O.createElement("img");return t.width=1,t.height=1,t.src=e,t},b=function(){},T=function(e){return encodeURIComponent instanceof Function?encodeURIComponent(e):(u(28),e)},L=function(e,t,n,i){try{e.addEventListener?e.addEventListener(t,n,!!i):e.attachEvent&&e.attachEvent("on"+t,n)}catch(e){u(27)}},w=/^[\w\-:/.?=&%!\[\]]+$/,I=/^[\w+/_-]+[=]{0,2}$/,N=function(e,t){return E(O.location[t?"href":"search"],e)},E=function(e,t){return(e=e.match("(?:&|#|\\?)"+T(t).replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")+"=([^&#]*)"))&&2==e.length?e[1]:""},k=function(){var e=""+O.location.hostname;return 0==e.indexOf("www.")?e.substring(4):e},_=function(e,t){var n=e.indexOf(t);return(5==n||6==n)&&("/"==(e=e.charAt(n+t.length))||"?"==e||""==e||":"==e)},B=function(e,t){var n=O.referrer;if(/^(https?|android-app):\/\//i.test(n)){if(e)return n;if(e="//"+O.location.hostname,!_(n,e))return t&&(t=e.replace(/\./g,"-")+".cdn.ampproject.org",_(n,t))?void 0:n}},A=function(e,t){if(1==t.length&&null!=t[0]&&"object"===i(t[0]))return t[0];for(var n={},a=Math.min(e.length+1,t.length),o=0;o<a;o++){if("object"===i(t[o])){for(var r in t[o])t[o].hasOwnProperty(r)&&(n[r]=t[o][r]);break}o<e.length&&(n[e[o]]=t[o])}return n},x=function(){this.keys=[],this.values={},this.m={}};x.prototype.set=function(e,t,n){this.keys.push(e),n?this.m[":"+e]=t:this.values[":"+e]=t},x.prototype.get=function(e){return this.m.hasOwnProperty(":"+e)?this.m[":"+e]:this.values[":"+e]},x.prototype.map=function(e){for(var t=0;t<this.keys.length;t++){var n=this.keys[t],i=this.get(n);i&&e(n,i)}};var R,F,P,G,U,M=window,O=document,H=function(e,t){return setTimeout(e,t)},K=window,z=document,j=function(e){var t=K._gaUserPrefs;if(t&&t.ioo&&t.ioo()||e&&!0===K["ga-disable-"+e])return!0;try{var n=K.external;if(n&&n._gaUserPrefs&&"oo"==n._gaUserPrefs)return!0}catch(e){}for(e=[],t=String(z.cookie||document.cookie).split(";"),n=0;n<t.length;n++){var i=t[n].split("="),a=i[0].replace(/^\s*|\s*$/g,"");a&&"AMP_TOKEN"==a&&((i=i.slice(1).join("=").replace(/^\s*|\s*$/g,""))&&(i=decodeURIComponent(i)),e.push(i))}for(t=0;t<e.length;t++)if("$OPT_OUT"==e[t])return!0;return!!z.getElementById("__gaOptOutExtension")},W=function(e){var t=[],n=O.cookie.split(";");e=new RegExp("^\\s*"+e+"=\\s*(.*?)\\s*$");for(var i=0;i<n.length;i++){var a=n[i].match(e);a&&t.push(a[1])}return t},V=function(e,t,n,i,a,o){if(!(a=!j(a)&&!(J.test(O.location.hostname)||"/"==n&&q.test(i))))return!1;if(t&&1200<t.length&&(t=t.substring(0,1200)),n=e+"="+t+"; path="+n+"; ",o&&(n+="expires="+new Date((new Date).getTime()+o).toGMTString()+"; "),i&&"none"!==i&&(n+="domain="+i+";"),i=O.cookie,O.cookie=n,!(i=i!=O.cookie))e:{for(e=W(e),i=0;i<e.length;i++)if(t==e[i]){i=!0;break e}i=!1}return i},Y=function(e){return encodeURIComponent?encodeURIComponent(e).replace(/\(/g,"%28").replace(/\)/g,"%29"):e},q=/^(www\.)?google(\.com?)?(\.[a-z]{2})?$/,J=/(^|\.)doubleclick\.net$/i,X=/^.*Version\/?(\d+)[^\d].*$/i,Z=function(){if(void 0!==M.__ga4__)return M.__ga4__;if(void 0===R){var e=M.navigator.userAgent;if(e){var t=e;try{t=decodeURIComponent(e)}catch(e){}(e=!(0<=t.indexOf("Chrome")||0<=t.indexOf("CriOS")||!(0<=t.indexOf("Safari/")||0<=t.indexOf("Safari,"))))&&(e=11<=((t=X.exec(t))?Number(t[1]):-1)),R=e}else R=!1}return R},$="/^https?:\/\/[^/]*cdn\.ampproject\.org\//",Q=/^(?:www\.|m\.|amp\.)+/,ee=[],te=function(e){e:{if($.test(O.referrer)){var t=O.location.hostname.replace(Q,"");t:{var n=O.referrer,i=(n=n.replace(/^https?:\/\//,"")).replace(/^[^/]+/,"").split("/"),a=i[2];if(!(i=(i="s"==a?i[3]:a)?decodeURIComponent(i):i)){if(0==n.indexOf("xn--")){n="";break t}(n=n.match(/(.*)\.cdn\.ampproject\.org\/?$/))&&2==n.length&&(i=n[1].replace(/-/g,".").replace(/\.\./g,"-"))}n=i?i.replace(Q,""):""}if(t==n){t=!0;break e}u(78)}t=!1}if(t&&!1!==e[kn]&&(void 0===U&&(t=(t=mi.get())&&t._ga||void 0)&&(U=t,u(81)),void 0!==U))return e[ln]||(e[ln]=U),!1;if(e[kn]){if(u(67),e[Sn]&&"cookie"!=e[Sn])return!1;if(void 0!==U)e[ln]||(e[ln]=U);else{e:if(t=String(e[pn]||k()),n=String(e[fn]||"/"),i=W(String(e[mn]||"_ga")),t=ai(i,t,n),!t||c.test(t))t=!0;else if(t=W("AMP_TOKEN"),0==t.length)t=!0;else{if(1==t.length&&("$RETRIEVING"==(t=decodeURIComponent(t[0]))||"$OPT_OUT"==t||"$ERROR"==t||"$NOT_FOUND"==t)){t=!0;break e}t=!1}if(t&&ie(ne,String(e[gn])))return!0}}return!1},ne=function(){ca.D([b])},ie=function e(t,n){var i=W("AMP_TOKEN");return 1<i.length?(u(55),!1):"$OPT_OUT"==(i=decodeURIComponent(i[0]||""))||"$ERROR"==i||j(n)?(u(62),!1):$.test(O.referrer)||"$NOT_FOUND"!=i?void 0!==U?(u(56),H(function(){t(U)},0),!0):F?(ee.push(t),!0):"$RETRIEVING"==i?(u(57),H(function(){e(t,n)},1e4),!0):(F=!0,i&&"$"!=i[0]||(re("$RETRIEVING",3e4),setTimeout(oe,3e4),i=""),!!ae(i,n)&&(ee.push(t),!0)):(u(68),!1)},ae=function e(t,n,i){if(!window.JSON)return u(58),!1;var a=M.XMLHttpRequest;if(!a)return u(59),!1;var o=new a;return"withCredentials"in o?(o.open("POST",(i||"https://ampcid.google.com/v1/publisher:getClientId")+"?key=AIzaSyA65lEHUEizIsNtlbNo-l2K18dT680nsaM",!0),o.withCredentials=!0,o.setRequestHeader("Content-Type","text/plain"),o.onload=function(){if(F=!1,4==o.readyState){try{200!=o.status&&(u(61),se("","$ERROR",3e4));var a=JSON.parse(o.responseText);a.optOut?(u(63),se("","$OPT_OUT",31536e6)):a.clientId?se(a.clientId,a.securityToken,31536e6):!i&&a.alternateUrl?(P&&clearTimeout(P),F=!0,e(t,n,a.alternateUrl)):(u(64),se("","$NOT_FOUND",36e5))}catch(e){u(65),se("","$ERROR",3e4)}o=null}},a={originScope:"AMP_ECID_GOOGLE"},t&&(a.securityToken=t),o.send(JSON.stringify(a)),P=H(function(){u(66),se("","$ERROR",3e4)},1e4),!0):(u(60),!1)},oe=function(){F=!1},re=function(e,t){if(void 0===G){G="";for(var n=si(),i=0;i<n.length;i++){var a=n[i];if(V("AMP_TOKEN",encodeURIComponent(e),"/",a,"",t))return void(G=a)}}V("AMP_TOKEN",encodeURIComponent(e),"/",G,"",t)},se=function(e,t,n){for(P&&clearTimeout(P),t&&re(t,n),U=e,t=ee,ee=[],n=0;n<t.length;n++)t[n](e)},ce=void 0,le=function(e){return ce||(e?"https:":h||"https:"==O.location.protocol?"https:":"http:")+"//www.google-analytics.com"},he=function(e){this.name="len",this.message=e+"-8192"},de=function(e,t,n){if(n=n||b,2036>=t.length)ge(e,t,n);else{if(!(8192>=t.length))throw fe("len",t.length),new he(t.length);pe(e,t,n)||me(e,t,n)||ge(e,t,n)}},ue=function(e,t,n,i){me(e+"?"+t,"",i=i||b,n)},ge=function(e,t,n){var i=S(e+"?"+t);i.onload=i.onerror=function(){i.onload=null,i.onerror=null,n()}},me=function(e,t,n,i){var a=M.XMLHttpRequest;if(!a)return!1;var o=new a;return"withCredentials"in o&&(e=e.replace(/^http:/,"https:"),o.open("POST",e,!0),o.withCredentials=!0,o.setRequestHeader("Content-Type","text/plain"),o.onreadystatechange=function(){if(4==o.readyState){if(i)try{var e=o.responseText;if(1>e.length)fe("xhr","ver","0"),n();else if("1"!=e.charAt(0))fe("xhr","ver",String(e.length)),n();else if(3<i.count++)fe("xhr","tmr",""+i.count),n();else if(1==e.length)n();else{var t=e.charAt(1);if("d"==t)ue("https://stats.g.doubleclick.net/j/collect",i.U,i,n);else if("g"==t){ge("https://www.google.%/ads/ga-audiences".replace("%","com"),i.google,n);var a=e.substring(2);a&&(/^[a-z.]{1,6}$/.test(a)?ge("https://www.google.%/ads/ga-audiences".replace("%",a),i.google,b):fe("tld","bcc",a))}else fe("xhr","brc",t),n()}}catch(e){fe("xhr","rsp"),n()}else n();o=null}},o.send(t),!0)},pe=function(e,t,n){return!!M.navigator.sendBeacon&&(!!M.navigator.sendBeacon(e,t)&&(n(),!0))},fe=function(e,t,n){1<=100*Math.random()||j("?")||(e=["t=error","_e="+e,"_v=j76","sr=1"],t&&e.push("_f="+t),n&&e.push("_m="+T(n.substring(0,100))),e.push("aip=1"),e.push("z="+Ee()),ge(ce?ce+"/33":le(!0)+"/u/d",e.join("&"),b))},ye=function(e){var t=M.gaData=M.gaData||{};return t[e]=t[e]||{}},ve=function(){this.M=[]};function Ce(t){if(100!=t.get(Ln)&&e(Ae(t,ln))%1e4>=100*xe(t,Ln))throw new Error("abort")}function De(e){if(j(Ae(e,gn)))throw new Error("abort")}function Se(){var e=O.location.protocol;if("http:"!=e&&"https:"!=e)throw new Error("abort")}function be(e){try{M.navigator.sendBeacon?u(42):M.XMLHttpRequest&&"withCredentials"in new M.XMLHttpRequest&&u(40)}catch(e){}e.set(Kt,g(e),!0),e.set($e,xe(e,$e)+1);var t=[];Fe.map(function(n,i){i.F&&(void 0!=(n=e.get(n))&&n!=i.defaultValue&&("boolean"==typeof n&&(n*=1),t.push(i.F+"="+T(""+n))))}),t.push("z="+ke()),e.set(Je,t.join("&"),!0)}function Te(e){var t=Ae(e,Pn)||(ce?ce+"/3":le(!1)+"/collect"),n=e.get(Un),i=Ae(e,Ze);if(!i&&e.get(Xe)&&(i="beacon"),n)ue(t,Ae(e,Je),n,e.Z(qe));else if(i){n=i,i=Ae(e,Je);var a=e.Z(qe);a=a||b,"image"==n?ge(t,i,a):"xhr"==n&&me(t,i,a)||"beacon"==n&&pe(t,i,a)||de(t,i,a)}else de(t,Ae(e,Je),e.Z(qe));t=Ae(e,gn),n=(t=ye(t)).hitcount,t.hitcount=n?n+1:1,t=Ae(e,gn),delete ye(t).pending_experiments,e.set(qe,b,!0)}function Le(e){(M.gaData=M.gaData||{}).expId&&e.set(At,(M.gaData=M.gaData||{}).expId),(M.gaData=M.gaData||{}).expVar&&e.set(xt,(M.gaData=M.gaData||{}).expVar);var t=Ae(e,gn);if(t=ye(t).pending_experiments){var n=[];for(i in t)t.hasOwnProperty(i)&&t[i]&&n.push(encodeURIComponent(i)+"."+encodeURIComponent(t[i]));var i=n.join("!")}else i=void 0;i&&e.set(Rt,i,!0)}function we(){if(M.navigator&&"preview"==M.navigator.loadPurpose)throw new Error("abort")}function Ie(e){var t=M.gaDevIds;f(t)&&0!=t.length&&e.set("&did",t.join(","),!0)}function Ne(e){if(!e.get(gn))throw new Error("abort")}ve.prototype.add=function(e){this.M.push(e)},ve.prototype.D=function(e){try{for(var t=0;t<this.M.length;t++){var n=e.get(this.M[t]);n&&p(n)&&n.call(M,e)}}catch(e){console.error("cjh error: "+e+", stack: "+e.stack)}(t=e.get(qe))!=b&&p(t)&&(e.set(qe,b,!0),setTimeout(t,10))};var Ee=function(){return Math.round(2147483647*Math.random())},ke=function(){try{var e=new Uint32Array(1);return M.crypto.getRandomValues(e),2147483647&e[0]}catch(e){return Ee()}};function _e(e){var t=xe(e,Ut);500<=t&&u(15);var n=Ae(e,Ye);if("transaction"!=n&&"item"!=n){n=xe(e,Ot);var i=(new Date).getTime(),a=xe(e,Mt);if(0==a&&e.set(Mt,i),0<(a=Math.round(2*(i-a)/1e3))&&(n=Math.min(n+a,20),e.set(Mt,i)),0>=n)throw new Error("abort");e.set(Ot,--n)}e.set(Ut,++t)}var Be=function(){this.data=new x};Be.prototype.get=function(e){var t=Ue(e),n=this.data.get(e);return t&&void 0==n&&(n=p(t.defaultValue)?t.defaultValue():t.defaultValue),t&&t.Z?t.Z(this,e,n):n};var Ae=function(e,t){return void 0==(e=e.get(t))?"":""+e},xe=function(e,t){return void 0==(e=e.get(t))||""===e?0:Number(e)};Be.prototype.Z=function(e){return(e=this.get(e))&&p(e)?e:b},Be.prototype.set=function(e,t,n){if(e)if("object"==(void 0===e?"undefined":i(e)))for(var a in e)e.hasOwnProperty(a)&&Re(this,a,e[a],n);else Re(this,e,t,n)};var Re=function(e,t,n,i){if(void 0!=n)switch(t){case gn:Ki.test(n)}var a=Ue(t);a&&a.o?a.o(e,t,n,i):e.data.set(t,n,i)},Fe=new x,Pe=[],Ge=function(e,t,n,i,a){this.name=e,this.F=t,this.Z=i,this.o=a,this.defaultValue=n},Ue=function(e){var t=Fe.get(e);if(!t)for(var n=0;n<Pe.length;n++){var i=Pe[n],a=i[0].exec(e);if(a){t=i[1](a),Fe.set(t.name,t);break}}return t},Me=function(e){var t;return Fe.map(function(n,i){i.F==e&&(t=i)}),t&&t.name},Oe=function(e,t,n,i,a){return e=new Ge(e,t,n,i,a),Fe.set(e.name,e),e.name},He=function(e,t){Pe.push([new RegExp("^"+e+"$"),t])},Ke=function(e,t,n){return Oe(e,t,n,void 0,ze)},ze=function(){},je=Ke("apiVersion","v"),We=Ke("clientVersion","_v");Oe("anonymizeIp","aip");var Ve=Oe("adSenseId","a"),Ye=Oe("hitType","t"),qe=Oe("hitCallback"),Je=Oe("hitPayload");Oe("nonInteraction","ni"),Oe("currencyCode","cu"),Oe("dataSource","ds");var Xe=Oe("useBeacon",void 0,!1),Ze=Oe("transport");Oe("sessionControl","sc",""),Oe("sessionGroup","sg"),Oe("queueTime","qt");var $e=Oe("_s","_s");Oe("screenName","cd");var Qe=Oe("location","dl",""),et=Oe("referrer","dr"),tt=Oe("page","dp","");Oe("hostname","dh");var nt=Oe("language","ul"),it=Oe("encoding","de");Oe("title","dt",function(){return O.title||void 0}),He("contentGroup([0-9]+)",function(e){return new Ge(e[0],"cg"+e[1])});var at=Oe("screenColors","sd"),ot=Oe("screenResolution","sr"),rt=Oe("viewportSize","vp"),st=Oe("javaEnabled","je"),ct=Oe("flashVersion","fl");Oe("campaignId","ci"),Oe("campaignName","cn"),Oe("campaignSource","cs"),Oe("campaignMedium","cm"),Oe("campaignKeyword","ck"),Oe("campaignContent","cc");var lt=Oe("eventCategory","ec"),ht=Oe("eventAction","ea"),dt=Oe("eventLabel","el"),ut=Oe("eventValue","ev"),gt=Oe("socialNetwork","sn"),mt=Oe("socialAction","sa"),pt=Oe("socialTarget","st"),ft=Oe("l1","plt"),yt=Oe("l2","pdt"),vt=Oe("l3","dns"),Ct=Oe("l4","rrt"),Dt=Oe("l5","srt"),St=Oe("l6","tcp"),bt=Oe("l7","dit"),Tt=Oe("l8","clt"),Lt=Oe("l9","_gst"),wt=Oe("l10","_gbt"),It=Oe("l11","_cst"),Nt=Oe("l12","_cbt"),Et=Oe("timingCategory","utc"),kt=Oe("timingVar","utv"),_t=Oe("timingLabel","utl"),Bt=Oe("timingValue","utt");Oe("appName","an"),Oe("appVersion","av",""),Oe("appId","aid",""),Oe("appInstallerId","aiid",""),Oe("exDescription","exd"),Oe("exFatal","exf");var At=Oe("expId","xid"),xt=Oe("expVar","xvar"),Rt=Oe("exp","exp"),Ft=Oe("_utma","_utma"),Pt=Oe("_utmz","_utmz"),Gt=Oe("_utmht","_utmht"),Ut=Oe("_hc",void 0,0),Mt=Oe("_ti",void 0,0),Ot=Oe("_to",void 0,20);He("dimension([0-9]+)",function(e){return new Ge(e[0],"cd"+e[1])}),He("metric([0-9]+)",function(e){return new Ge(e[0],"cm"+e[1])}),Oe("linkerParam",void 0,void 0,function(e){if(e.get(Ht))return u(35),mi.generate(Li(e));var t=Ae(e,ln),n=Ae(e,Nn)||"";return t="_ga=2."+T(vi(n+t,0)+"."+n+"-"+t),(e=wi(e))?(u(44),e="&_gac=1."+T([vi(e.qa,0),e.timestamp,e.qa].join("."))):e="",t+e},ze);var Ht=Ke("_cd2l",void 0,!1),Kt=Oe("usage","_u"),zt=Oe("_um");Oe("forceSSL",void 0,void 0,function(){return h},function(e,t,n){u(34),h=!!n});var jt=Oe("_j1","jid"),Wt=Oe("_j2","gjid");He("\\&(.*)",function(e){var t=new Ge(e[0],e[1]),n=Me(e[0].substring(1));return n&&(t.Z=function(e){return e.get(n)},t.o=function(e,t,i,a){e.set(n,i,a)},t.F=void 0),t});var Vt=Ke("_oot"),Yt=Oe("previewTask"),qt=Oe("checkProtocolTask"),Jt=Oe("validationTask"),Xt=Oe("checkStorageTask"),Zt=Oe("historyImportTask"),$t=Oe("samplerTask"),Qt=Oe("_rlt"),en=Oe("buildHitTask"),tn=Oe("sendHitTask"),nn=Oe("ceTask"),an=Oe("devIdTask"),on=Oe("timingTask"),rn=Oe("displayFeaturesTask"),sn=Oe("customTask"),cn=Ke("name"),ln=Ke("clientId","cid"),hn=Ke("clientIdTime"),dn=Ke("storedClientId"),un=Oe("userId","uid"),gn=Ke("trackingId","tid"),mn=Ke("cookieName",void 0,"_ga"),pn=Ke("cookieDomain"),fn=Ke("cookiePath",void 0,"/"),yn=Ke("cookieExpires",void 0,63072e3),vn=Ke("cookieUpdate",void 0,!0),Cn=Ke("legacyCookieDomain"),Dn=Ke("legacyHistoryImport",void 0,!0),Sn=Ke("storage",void 0,"cookie"),bn=Ke("allowLinker",void 0,!1),Tn=Ke("allowAnchor",void 0,!0),Ln=Ke("sampleRate","sf",100),wn=Ke("siteSpeedSampleRate",void 0,1),In=Ke("alwaysSendReferrer",void 0,!1),Nn=Ke("_gid","_gid"),En=Ke("_gcn"),kn=Ke("useAmpClientId"),_n=Ke("_gclid"),Bn=Ke("_gt"),An=Ke("_ge",void 0,7776e6),xn=Ke("_gclsrc"),Rn=Ke("storeGac",void 0,!0),Fn=Ke("_x_19"),Pn=Oe("transportUrl"),Gn=Oe("_r","_r"),Un=Oe("_dp"),Mn=Oe("allowAdFeatures",void 0,!0);function On(e,t,n,i){t[e]=function(){try{return i&&u(i),n.apply(this,arguments)}catch(t){throw fe("exc",e,t&&t.name),t}}}var Hn=function(){this.V=100,this.$=this.fa=!1,this.oa="detourexp",this.groups=1},Kn=function(e){var t,n=new Hn;if(n.fa&&n.$)return 0;if(n.$=!0,e){if(n.oa&&void 0!==e.get(n.oa))return xe(e,n.oa);if(0==e.get(wn))return 0}return 0==n.V?0:(void 0===t&&(t=ke()),0==t%n.V?Math.floor(t/n.V)%n.groups+1:0)},zn=function(){if(ce)return!0;for(var e=O.getElementsByTagName("script"),t=0;t<e.length&&100>t;t++){var n=!!(n=e[t].src)&&0==n.indexOf(le(!0)+"/analytics");if(n)return!0}return!1};function jn(){var e,t;if((t=(t=M.navigator)?t.plugins:null)&&t.length)for(var n=0;n<t.length&&!e;n++){var i=t[n];-1<i.name.indexOf("Shockwave Flash")&&(e=i.description)}if(!e)try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");e=a.GetVariable("$version")}catch(e){}if(!e)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),e="WIN 6,0,21,0",a.AllowScriptAccess="always",e=a.GetVariable("$version")}catch(e){}if(!e)try{e=(a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(e){}return e&&(a=e.match(/[\d]+/g))&&3<=a.length&&(e=a[0]+"."+a[1]+" r"+a[2]),e||void 0}var Wn=function(t){var n=Math.min(xe(t,wn),100);return!(e(Ae(t,ln))%100>=n)},Vn=function e(t){var n={};if(Yn(n)||qn(n)){var i=n[ft];void 0==i||1/0==i||isNaN(i)||(0<i?(Jn(n,vt),Jn(n,St),Jn(n,Dt),Jn(n,yt),Jn(n,Ct),Jn(n,bt),Jn(n,Tt),Jn(n,Lt),Jn(n,wt),Jn(n,It),Jn(n,Nt),H(function(){t(n)},10)):L(M,"load",function(){e(t)},!1))}},Yn=function(e){var t=M.performance||M.webkitPerformance;if(!(t=t&&t.timing))return!1;var n=t.navigationStart;return 0!=n&&(e[ft]=t.loadEventStart-n,e[vt]=t.domainLookupEnd-t.domainLookupStart,e[St]=t.connectEnd-t.connectStart,e[Dt]=t.responseStart-t.requestStart,e[yt]=t.responseEnd-t.responseStart,e[Ct]=t.fetchStart-n,e[bt]=t.domInteractive-n,e[Tt]=t.domContentLoadedEventStart-n,e[Lt]=la.L-n,e[wt]=la.ya-n,M.google_tag_manager&&M.google_tag_manager._li&&(t=M.google_tag_manager._li,e[It]=t.cst,e[Nt]=t.cbt),!0)},qn=function(e){if(M.top!=M)return!1;var t=M.external,n=t&&t.onloadT;return t&&!t.isValidLoadTime&&(n=void 0),2147483648<n&&(n=void 0),0<n&&t.setPageReadyTime(),void 0!=n&&(e[ft]=n,!0)},Jn=function(e,t){var n=e[t];(isNaN(n)||1/0==n||0>n)&&(e[t]=void 0)},Xn=function(e){return function(t){if("pageview"==t.get(Ye)&&!e.I){e.I=!0;var n=Wn(t),i=0<E(Ae(t,Qe),"gclid").length;(n||i)&&Vn(function(t){n&&e.send("timing",t),i&&e.send("adtiming",t)})}}},Zn=!1,$n=function(e){if("cookie"==Ae(e,Sn)){if(e.get(vn)||Ae(e,dn)!=Ae(e,ln)){var t=1e3*xe(e,yn);Qn(e,ln,mn,t)}if(Qn(e,Nn,En,864e5),e.get(Rn)){var n=Ae(e,_n);if(n){var i=Math.min(xe(e,An),1e3*xe(e,yn));i=Math.min(i,1e3*xe(e,Bn)+i-(new Date).getTime()),e.data.set(An,i),t={};var a=Ae(e,Bn),o=Ae(e,xn),r=ci(Ae(e,fn)),s=ri(Ae(e,pn));e=Ae(e,gn),o&&"aw.ds"!=o?t&&(t.ua=!0):(n=["1",a,Y(n)].join("."),0<i&&(t&&(t.ta=!0),V("_gac_"+Y(e),n,r,s,e,i))),hi(t)}}else u(75)}},Qn=function(e,t,n,i){var a=ni(e,t);if(a){n=Ae(e,n);var o=ci(Ae(e,fn)),r=ri(Ae(e,pn)),s=Ae(e,gn);if("auto"!=r)V(n,a,o,r,s,i)&&(Zn=!0);else{u(32);for(var c=si(),l=0;l<c.length;l++)if(r=c[l],e.data.set(pn,r),a=ni(e,t),V(n,a,o,r,s,i))return void(Zn=!0);e.data.set(pn,"auto")}}},ei=function(e){if("cookie"==Ae(e,Sn)&&!Zn&&($n(e),!Zn))throw new Error("abort")},ti=function(e){if(e.get(Dn)){var t=Ae(e,pn),n=Ae(e,Cn)||k(),i=di("__utma",n,t);i&&(u(19),e.set(Gt,(new Date).getTime(),!0),e.set(Ft,i.R),(t=di("__utmz",n,t))&&i.hash==t.hash&&e.set(Pt,t.R))}},ni=function(e,t){t=Y(Ae(e,t));var n=ri(Ae(e,pn)).split(".").length;return 1<(e=li(Ae(e,fn)))&&(n+="-"+e),t?["GA1",n,t].join("."):""},ii=function(e,t){return ai(t,Ae(e,pn),Ae(e,fn))},ai=function(e,t,n){if(!e||1>e.length)u(12);else{for(var i=[],a=0;a<e.length;a++){var o=e[a],r=o.split("."),s=r.shift();("GA1"==s||"1"==s)&&1<r.length?(1==(o=r.shift().split("-")).length&&(o[1]="1"),o[0]*=1,o[1]*=1,r={H:o,s:r.join(".")}):r=l.test(o)?{H:[0,0],s:o}:void 0,r&&i.push(r)}if(1==i.length)return u(13),i[0].s;if(0!=i.length)return u(14),1==(i=oi(i,ri(t).split(".").length,0)).length?i[0].s:(1<(i=oi(i,li(n),1)).length&&u(41),i[0]&&i[0].s);u(12)}},oi=function(e,t,n){for(var i,a=[],o=[],r=0;r<e.length;r++){var s=e[r];s.H[n]==t?a.push(s):void 0==i||s.H[n]<i?(o=[s],i=s.H[n]):s.H[n]==i&&o.push(s)}return 0<a.length?a:o},ri=function(e){return 0==e.indexOf(".")?e.substr(1):e},si=function(){var e=[],t=k().split(".");if(4==t.length){var n=t[t.length-1];if(parseInt(n,10)==n)return["none"]}for(n=t.length-2;0<=n;n--)e.push(t.slice(n).join("."));return t=O.location.hostname,J.test(t)||q.test(t)||e.push("none"),e},ci=function(e){return e?(1<e.length&&e.lastIndexOf("/")==e.length-1&&(e=e.substr(0,e.length-1)),0!=e.indexOf("/")&&(e="/"+e),e):"/"},li=function(e){return"/"==(e=ci(e))?1:e.split("/").length},hi=function(e){e.ta&&u(77),e.na&&u(74),e.pa&&u(73),e.ua&&u(69)};function di(e,t,n){"none"==t&&(t="");var i=[],a=W(e);e="__utma"==e?6:2;for(var o=0;o<a.length;o++){var r=(""+a[o]).split(".");r.length>=e&&i.push({hash:r[0],R:a[o],O:r})}if(0!=i.length)return 1==i.length?i[0]:ui(t,i)||ui(n,i)||ui(null,i)||i[0]}function ui(t,n){if(null==t)var i=t=1;else i=e(t),t=e(v(t,".")?t.substring(1):"."+t);for(var a=0;a<n.length;a++)if(n[a].hash==i||n[a].hash==t)return n[a]}var gi=new RegExp(/^https?:\/\/([^\/:]+)/),mi=M.google_tag_data.glBridge,pi=/(.*)([?&#])(?:_ga=[^&#]*)(?:&?)(.*)/,fi=/(.*)([?&#])(?:_gac=[^&#]*)(?:&?)(.*)/;function yi(t,n){var i=new Date,a=M.navigator,o=a.plugins||[];for(t=[t,a.userAgent,i.getTimezoneOffset(),i.getYear(),i.getDate(),i.getHours(),i.getMinutes()+n],n=0;n<o.length;++n)t.push(o[n].description);return e(t.join("."))}function vi(t,n){var i=new Date,a=M.navigator,o=i.getHours()+Math.floor((i.getMinutes()+n)/60);return e([t,a.userAgent,a.language||"",i.getTimezoneOffset(),i.getYear(),i.getDate()+Math.floor(o/24),(24+o)%24,(60+i.getMinutes()+n)%60].join("."))}var Ci=function(e){u(48),this.target=e,this.T=!1};Ci.prototype.ca=function(e,t){if(e){if(this.target.get(Ht))return mi.decorate(Li(this.target),e,t);if(e.tagName){if("a"==e.tagName.toLowerCase())return void(e.href&&(e.href=Di(this,e.href,t)));if("form"==e.tagName.toLowerCase())return Si(this,e)}if("string"==typeof e)return Di(this,e,t)}};var Di=function(e,t,n){var i=pi.exec(t);i&&3<=i.length&&(t=i[1]+(i[3]?i[2]+i[3]:"")),(i=fi.exec(t))&&3<=i.length&&(t=i[1]+(i[3]?i[2]+i[3]:"")),e=e.target.get("linkerParam");var a=t.indexOf("?");return i=t.indexOf("#"),n?t+=(-1==i?"#":"&")+e:(n=-1==a?"?":"&",t=-1==i?t+(n+e):t.substring(0,i)+n+e+t.substring(i)),(t=t.replace(/&+_ga=/,"&_ga=")).replace(/&+_gac=/,"&_gac=")},Si=function(e,t){if(t&&t.action)if("get"==t.method.toLowerCase()){e=e.target.get("linkerParam").split("&");for(var n=0;n<e.length;n++){var i=e[n].split("="),a=i[1];i=i[0];for(var o=t.childNodes||[],r=!1,s=0;s<o.length;s++)if(o[s].name==i){o[s].setAttribute("value",a),r=!0;break}r||((o=O.createElement("input")).setAttribute("type","hidden"),o.setAttribute("name",i),o.setAttribute("value",a),t.appendChild(o))}}else"post"==t.method.toLowerCase()&&(t.action=Di(e,t.action))};function bi(e,t){if(t==O.location.hostname)return!1;for(var n=0;n<e.length;n++)if(e[n]instanceof RegExp){if(e[n].test(t))return!0}else if(0<=t.indexOf(e[n]))return!0;return!1}function Ti(e,t){return t!=yi(e,0)&&t!=yi(e,-1)&&t!=yi(e,-2)&&t!=vi(e,0)&&t!=vi(e,-1)&&t!=vi(e,-2)}function Li(e){var t=wi(e);return{_ga:e.get(ln),_gid:e.get(Nn)||void 0,_gac:t?[t.qa,t.timestamp].join("."):void 0}}function wi(e){function t(e){return void 0==e||""===e?0:Number(e)}var n=e.get(_n);if(n&&e.get(Rn)){var i=t(e.get(Bn));if(!(1e3*i+t(e.get(An))<=(new Date).getTime()))return{timestamp:i,qa:n};u(76)}}Ci.prototype.S=function(e,t,n){function i(n){try{n=n||M.event;e:{var i=n.target||n.srcElement;for(n=100;i&&0<n;){if(i.href&&i.nodeName.match(/^a(?:rea)?$/i)){var o=i;break e}i=i.parentNode,n--}o={}}("http:"==o.protocol||"https:"==o.protocol)&&bi(e,o.hostname||"")&&o.href&&(o.href=Di(a,o.href,t))}catch(e){u(26)}}var a=this;this.target.get(Ht)?mi.auto(function(){return Li(a.target)},e,t?"fragment":"",n):(this.T||(this.T=!0,L(O,"mousedown",i,!1),L(O,"keyup",i,!1)),n&&L(O,"submit",function(t){if((t=(t=t||M.event).target||t.srcElement)&&t.action){var n=t.action.match(gi);n&&bi(e,n[1])&&Si(a,t)}}))};var Ii=/^(GTM|OPT)-[A-Z0-9]+$/,Ni=/;_gaexp=[^;]*/g,Ei=/;((__utma=)|([^;=]+=GAX?\d+\.))[^;]*/g,ki=/^https?:\/\/[\w\-.]+\.google.com(:\d+)?\/optimize\/opt-launch\.html\?.*$/,_i=function(e){function t(e,t){t&&(n+="&"+e+"="+T(t))}var n="https://www.google-analytics.com/gtm/js?id="+T(e.id);return"dataLayer"!=e.B&&t("l",e.B),t("t",e.target),t("cid",e.clientId),t("cidt",e.ka),t("gac",e.la),t("aip",e.ia),e.sync&&t("m","sync"),t("cycle",e.G),e.qa&&t("gclid",e.qa),ki.test(O.referrer)&&t("cb",String(Ee())),n},Bi=function(e,t,n){this.aa=t,(t=n)||(t=(t=Ae(e,cn))&&"t0"!=t?Ui.test(t)?"_gat_"+Y(Ae(e,gn)):"_gat_"+Y(t):"_gat"),this.Y=t,this.ra=null},Ai=function(e,t){var n=t.get(en);t.set(en,function(t){xi(e,t,jt),xi(e,t,Wt);var i=n(t);return Ri(e,t),i});var i=t.get(tn);t.set(tn,function(t){var n=i(t);if(Fi(t)){if(Z()!==Gi(e,t)){u(80);var a={U:Pi(e,t,1),google:Pi(e,t,2),count:0};ue("https://stats.g.doubleclick.net/j/collect",a.U,a)}else S(Pi(e,t,0));t.set(jt,"",!0)}return n})},xi=function(e,t,n){!1===t.get(Mn)||t.get(n)||("1"==W(e.Y)[0]?t.set(n,"",!0):t.set(n,""+Ee(),!0))},Ri=function(e,t){Fi(t)&&V(e.Y,"1",Ae(t,fn),Ae(t,pn),Ae(t,gn),6e4)},Fi=function(e){return!!e.get(jt)&&!1!==e.get(Mn)},Pi=function(e,t,n){var i=new x,a=function(e){Ue(e).F&&i.set(Ue(e).F,t.get(e))};a(je),a(We),a(gn),a(ln),a(jt),0!=n&&1!=n||(a(un),a(Wt),a(Nn)),i.set(Ue(Kt).F,g(t));var o="";return i.map(function(e,t){o+=T(e)+"=",o+=T(""+t)+"&"}),o+="z="+Ee(),0==n?o=e.aa+o:1==n?o="t=dc&aip=1&_r=3&"+o:2==n&&(o="t=sr&aip=1&_r=4&slf_rd=1&"+o),o},Gi=function(e,t){return null===e.ra&&(e.ra=1===Kn(t),e.ra&&u(33)),e.ra},Ui=/^gtm\d+$/,Mi=function(e,n){if(!(e=e.b).get("dcLoaded")){var i,a=new t(m(e));a.set(29),e.set(zt,a.w),(n=n||{})[mn]&&(i=Y(n[mn])),n=new Bi(e,"https://stats.g.doubleclick.net/r/collect?t=dc&aip=1&_r=3&",i),Ai(n,e),e.set("dcLoaded",!0)}},Oi=function(e){if(!e.get("dcLoaded")&&"cookie"==e.get(Sn)){var t=new Bi(e);if(xi(t,e,jt),xi(t,e,Wt),Ri(t,e),Fi(e)){var n=Z()!==Gi(t,e);e.set(Gn,1,!0),n?(u(79),e.set(Pn,ce?ce+"/32":le(!1)+"/j/collect",!0),e.set(Un,{U:Pi(t,e,1),google:Pi(t,e,2),count:0},!0)):e.set(Pn,ce?ce+"/31":le(!1)+"/r/collect",!0)}}},Hi=function(){var e=M.gaGlobal=M.gaGlobal||{};return e.hid=e.hid||Ee()},Ki=/^(UA|YT|MO|GP)-(\d+)-(\d+)$/,zi=function(e){function t(e,t){i.b.data.set(e,t)}function n(e,n){t(e,n),i.filters.add(e)}var i=this;this.b=new Be,this.filters=new ve,t(cn,e[cn]),t(gn,C(e[gn])),t(mn,e[mn]),t(pn,e[pn]||k()),t(fn,e[fn]),t(yn,e[yn]),t(vn,e[vn]),t(Cn,e[Cn]),t(Dn,e[Dn]),t(bn,e[bn]),t(Tn,e[Tn]),t(Ln,e[Ln]),t(wn,e[wn]),t(In,e[In]),t(Sn,e[Sn]),t(un,e[un]),t(hn,e[hn]),t(kn,e[kn]),t(Rn,e[Rn]),t(Ht,e[Ht]),t(Fn,e[Fn]),e[Fn]&&(ce=e[Fn]),t(je,1),t(We,"j76"),n(Vt,De),n(sn,b),n(Yt,we),n(qt,Se),n(Jt,Ne),n(Xt,ei),n(Zt,ti),n($t,Ce),n(Qt,_e),n(nn,Le),n(an,Ie),n(rn,Oi),n(en,be),n(tn,Te),n(on,Xn(this)),Wi(this.b),ji(this.b,e[ln]),this.b.set(Ve,Hi())},ji=function(e,t){var n=Ae(e,mn);if(e.data.set(En,"_ga"==n?"_gid":n+"_gid"),"cookie"==Ae(e,Sn)){if(Zn=!1,n=W(Ae(e,mn)),!(n=ii(e,n))){n=Ae(e,pn);var i=Ae(e,Cn)||k();void 0!=(n=di("__utma",i,n))?(u(10),n=n.O[1]+"."+n.O[2]):n=void 0}if(n&&(Zn=!0),i=n&&!e.get(vn))if(2!=(i=n.split(".")).length)i=!1;else if(i=Number(i[1])){var a=xe(e,yn);i=i+a<(new Date).getTime()/1e3}else i=!1;if(i&&(n=void 0),n&&(e.data.set(dn,n),e.data.set(ln,n),n=W(Ae(e,En)),(n=ii(e,n))&&e.data.set(Nn,n)),e.get(Rn)&&(n=e.get(_n),i=e.get(xn),!n||i&&"aw.ds"!=i)){if(n={},O){i=[],a=O.cookie.split(";");for(var o=/^\s*_gac_(UA-\d+-\d+)=\s*(.+?)\s*$/,r=0;r<a.length;r++){var s=a[r].match(o);s&&i.push({ja:s[1],value:s[2]})}if(a={},i&&i.length)for(o=0;o<i.length;o++)"1"!=(r=i[o].value.split("."))[0]||3!=r.length?n&&(n.na=!0):r[1]&&(a[i[o].ja]?n&&(n.pa=!0):a[i[o].ja]=[],a[i[o].ja].push({timestamp:r[1],qa:r[2]}));i=a}else i={};i=i[Ae(e,gn)],hi(n),i&&0!=i.length&&(n=i[0],e.data.set(Bn,n.timestamp),e.data.set(_n,n.qa))}}if(e.get(vn)&&(n=N("_ga",!!e.get(Tn)),o=N("_gl",!!e.get(Tn)),a=(i=mi.get(e.get(Tn)))._ga,o&&0<o.indexOf("_ga*")&&!a&&u(30),o=i.gclid,r=i._gac,n||a||o||r))if(n&&a&&u(36),e.get(bn)){if(a&&(u(38),e.data.set(ln,a),i._gid&&(u(51),e.data.set(Nn,i._gid))),o?(u(82),e.data.set(_n,o),i.gclsrc&&e.data.set(xn,i.gclsrc)):r&&(i=r.split("."))&&2===i.length&&(u(37),e.data.set(_n,i[0]),e.data.set(Bn,i[1])),n)e:if(i=n.indexOf("."),-1==i)u(22);else{if(a=n.substring(0,i),i=(o=n.substring(i+1)).indexOf("."),n=o.substring(0,i),o=o.substring(i+1),"1"==a){if(Ti(i=o,n)){u(23);break e}}else{if("2"!=a){u(22);break e}if(a="",0<(i=o.indexOf("-"))?(a=o.substring(0,i),i=o.substring(i+1)):i=o.substring(1),Ti(a+i,n)){u(53);break e}a&&(u(2),e.data.set(Nn,a))}u(11),e.data.set(ln,i),(n=N("_gac",!!e.get(Tn)))&&("1"!=(n=n.split("."))[0]||4!=n.length?u(72):Ti(n[3],n[1])?u(71):(e.data.set(_n,n[3]),e.data.set(Bn,n[2]),u(70)))}}else u(21);t&&(u(9),e.data.set(ln,T(t))),e.get(ln)||((t=(t=M.gaGlobal&&M.gaGlobal.vid)&&-1!=t.search(c)?t:void 0)?(u(17),e.data.set(ln,t)):(u(8),e.data.set(ln,D()))),e.get(Nn)||(u(3),e.data.set(Nn,D())),$n(e)},Wi=function(e){var t=M.navigator,n=M.screen,i=O.location;if(e.set(et,B(!!e.get(In),!!e.get(kn))),i){var a=i.pathname||"";"/"!=a.charAt(0)&&(u(31),a="/"+a),e.set(Qe,i.protocol+"//"+i.hostname+a+i.search)}n&&e.set(ot,n.width+"x"+n.height),n&&e.set(at,n.colorDepth+"-bit"),n=O.documentElement;var o=(a=O.body)&&a.clientWidth&&a.clientHeight,r=[];if(n&&n.clientWidth&&n.clientHeight&&("CSS1Compat"===O.compatMode||!o)?r=[n.clientWidth,n.clientHeight]:o&&(r=[a.clientWidth,a.clientHeight]),n=0>=r[0]||0>=r[1]?"":r.join("x"),e.set(rt,n),e.set(ct,jn()),e.set(it,O.characterSet||O.charset),e.set(st,t&&"function"==typeof t.javaEnabled&&t.javaEnabled()||!1),e.set(nt,(t&&(t.language||t.browserLanguage)||"").toLowerCase()),e.data.set(_n,N("gclid",!0)),e.data.set(xn,N("gclsrc",!0)),e.data.set(Bn,Math.round((new Date).getTime()/1e3)),i&&e.get(Tn)&&(t=O.location.hash)){for(t=t.split(/[?&#]+/),i=[],n=0;n<t.length;++n)(v(t[n],"utm_id")||v(t[n],"utm_campaign")||v(t[n],"utm_source")||v(t[n],"utm_medium")||v(t[n],"utm_term")||v(t[n],"utm_content")||v(t[n],"gclid")||v(t[n],"dclid")||v(t[n],"gclsrc"))&&i.push(t[n]);0<i.length&&(t="#"+i.join("&"),e.set(Qe,e.get(Qe)+t))}};zi.prototype.get=function(e){return this.b.get(e)},zi.prototype.set=function(e,t){this.b.set(e,t)};var Vi={pageview:[tt],event:[lt,ht,dt,ut],social:[gt,mt,pt],timing:[Et,kt,Bt,_t]};zi.prototype.send=function(e){if(!(1>arguments.length)){if("string"==typeof arguments[0])var t=arguments[0],n=[].slice.call(arguments,1);else t=arguments[0]&&arguments[0][Ye],n=arguments;t&&((n=A(Vi[t]||[],n))[Ye]=t,this.b.set(n,void 0,!0),this.filters.D(this.b),this.b.data.m={})}},zi.prototype.ma=function(e,t){var n=this;na(e,n,t)||(aa(e,function(){na(e,n,t)}),ia(String(n.get(cn)),e,void 0,t,!0))};var Yi,qi,Ji,Xi,Zi=function(e){return"prerender"!=O.visibilityState&&(e(),!0)},$i=function(e){if(!Zi(e)){u(16);var t=!1;L(O,"visibilitychange",function n(){if(!t&&Zi(e)){t=!0;var i=n,a=O;a.removeEventListener?a.removeEventListener("visibilitychange",i,!1):a.detachEvent&&a.detachEvent("onvisibilitychange",i)}})}},Qi=/^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/,ea=function(e){if(p(e[0]))this.u=e[0];else{var t=Qi.exec(e[0]);if(null!=t&&4==t.length&&(this.c=t[1]||"t0",this.K=t[2]||"",this.C=t[3],this.a=[].slice.call(e,1),this.K||(this.A="create"==this.C,this.i="require"==this.C,this.g="provide"==this.C,this.ba="remove"==this.C),this.i&&(3<=this.a.length?(this.X=this.a[1],this.W=this.a[2]):this.a[1]&&(y(this.a[1])?this.X=this.a[1]:this.W=this.a[1]))),t=e[1],e=e[2],!this.C)throw new Error("abort");if(this.i&&(!y(t)||""==t))throw new Error("abort");if(this.g&&(!y(t)||""==t||!p(e)))throw new Error("abort");if(ta(this.c)||ta(this.K))throw new Error("abort");if(this.g&&"t0"!=this.c)throw new Error("abort")}};function ta(e){return 0<=e.indexOf(".")||0<=e.indexOf(":")}Yi=new x,Ji=new x,Xi=new x,qi={ec:45,ecommerce:46,linkid:47};var na=function(e,t,n){t==la||t.get(cn);var i=Yi.get(e);return!!p(i)&&(t.plugins_=t.plugins_||new x,!!t.plugins_.get(e)||(t.plugins_.set(e,new i(t,n||{})),!0))},ia=function(e,t,n,i,a){if(!p(Yi.get(t))&&!Ji.get(t)){if(qi.hasOwnProperty(t)&&u(qi[t]),Ii.test(t)){if(u(52),!(e=la.j(e)))return!0;i={id:t,B:(n=i||{}).dataLayer||"dataLayer",ia:!!e.get("anonymizeIp"),sync:a,G:!1},e.get("&gtm")==t&&(i.G=!0);var o=String(e.get("name"));"t0"!=o&&(i.target=o),j(String(e.get("trackingId")))||(i.clientId=String(e.get(ln)),i.ka=Number(e.get(hn)),n=n.palindrome?Ei:Ni,n=(n=O.cookie.replace(/^|(; +)/g,";").match(n))?n.sort().join("").substring(1):void 0,i.la=n,i.qa=E(e.b.get(Qe)||"","gclid")),e=i.B,n=(new Date).getTime(),M[e]=M[e]||[],n={"gtm.start":n},a||(n.event="gtm.js"),M[e].push(n),n=_i(i)}!n&&qi.hasOwnProperty(t)?(u(39),n=t+".js"):u(43),n&&(n&&0<=n.indexOf("/")||(n=(ce?ce+"/34":le(!1)+"/plugins/ua/")+n),e=(i=sa(n)).protocol,n=O.location.protocol,("https:"==e||e==n||"http:"==e&&"http:"==n)&&ra(i))&&((i=i.url)&&(e=(e=O.querySelector&&O.querySelector("script[nonce]")||null)&&(e.nonce||e.getAttribute&&e.getAttribute("nonce"))||"",a?(a="",e&&I.test(e)&&(a=' nonce="'+e+'"'),w.test(i)&&O.write("<script"+a+' src="'+i+'"><\/script>')):((a=O.createElement("script")).type="text/javascript",a.async=!0,a.src=i,e&&a.setAttribute("nonce",e),(i=O.getElementsByTagName("script")[0]).parentNode.insertBefore(a,i))),Ji.set(t,!0))}},aa=function(e,t){var n=Xi.get(e)||[];n.push(t),Xi.set(e,n)},oa=function(e,t){Yi.set(e,t),t=Xi.get(e)||[];for(var n=0;n<t.length;n++)t[n]();Xi.set(e,[])},ra=function(e){var t=sa(O.location.href);return!!v(e.url,"https://www.google-analytics.com/gtm/js?id=")||!(e.query||0<=e.url.indexOf("?")||0<=e.path.indexOf("://"))&&(e.host==t.host&&e.port==t.port||(t="http:"==e.protocol?80:443,!("www.google-analytics.com"!=e.host||(e.port||t)!=t||!v(e.path,"/plugins/"))))},sa=function(e){function t(e){var t=e.hostname||"",n=0<=t.indexOf("]");return t=t.split(n?"]":":")[0].toLowerCase(),n&&(t+="]"),n=(e.protocol||"").toLowerCase(),n=1*e.port||("http:"==n?80:"https:"==n?443:""),e=e.pathname||"",v(e,"/")||(e="/"+e),[t,""+n,e]}var n=O.createElement("a");n.href=O.location.href;var i=(n.protocol||"").toLowerCase(),a=t(n),o=n.search||"",r=i+"//"+a[0]+(a[1]?":"+a[1]:"");return v(e,"//")?e=i+e:v(e,"/")?e=r+e:!e||v(e,"?")?e=r+a[2]+(e||o):0>e.split("/")[0].indexOf(":")&&(e=r+a[2].substring(0,a[2].lastIndexOf("/"))+"/"+e),n.href=e,i=t(n),{protocol:(n.protocol||"").toLowerCase(),host:i[0],port:i[1],path:i[2],query:n.search||"",url:e||""}},ca={ga:function(){ca.f=[]}};ca.ga(),ca.D=function(e){var t=ca.J.apply(ca,arguments);for(t=ca.f.concat(t),ca.f=[];0<t.length&&!ca.v(t[0])&&(t.shift(),!(0<ca.f.length)););ca.f=ca.f.concat(t)},ca.J=function(e){for(var t=[],n=0;n<arguments.length;n++)try{var i=new ea(arguments[n]);i.g?oa(i.a[0],i.a[1]):(i.i&&(i.ha=ia(i.c,i.a[0],i.X,i.W)),t.push(i))}catch(e){console.error("cjh error: "+e+", stack: "+e.stack)}return t},ca.v=function(e){try{if(e.u)e.u.call(M,la.j("t0"));else{var t=e.c==s?la:la.j(e.c);if(e.A){if("t0"==e.c&&null===(t=la.create.apply(la,e.a)))return!0}else if(e.ba)la.remove(e.c);else if(t)if(e.i){if(e.ha&&(e.ha=ia(e.c,e.a[0],e.X,e.W)),!na(e.a[0],t,e.W))return!0}else if(e.K){var n=e.C,i=e.a,a=t.plugins_.get(e.K);a[n].apply(a,i)}else t[e.C].apply(t,e.a)}}catch(e){console.error("cjh error: "+e+", stack: "+e.stack)}};var la=function(e){u(1),ca.D.apply(ca,[arguments])};la.h={},la.P=[],la.L=0,la.ya=0,la.answer=42;var ha=[gn,pn,cn];la.create=function(e){var t=A(ha,[].slice.call(arguments));t[cn]||(t[cn]="t0");var n=""+t[cn];return la.h[n]?la.h[n]:te(t)?null:(t=new zi(t),la.h[n]=t,la.P.push(t),t)},la.remove=function(e){for(var t=0;t<la.P.length;t++)if(la.P[t].get(cn)==e){la.P.splice(t,1),la.h[e]=null;break}},la.j=function(e){return la.h[e]},la.getAll=function(){return la.P.slice(0)},la.N=function(){"ga"!=s&&u(49);var e=M[s];if(!e||42!=e.answer){la.L=e&&e.l,la.ya=1*new Date,la.loaded=!0;var t=M[s]=la;On("create",t,t.create),On("remove",t,t.remove),On("getByName",t,t.j,5),On("getAll",t,t.getAll,6),On("get",t=zi.prototype,t.get,7),On("set",t,t.set,4),On("send",t,t.send),On("requireSync",t,t.ma),On("get",t=Be.prototype,t.get),On("set",t,t.set),"https:"!=O.location.protocol&&!h&&zn()&&(h=!0),(M.gaplugins=M.gaplugins||{}).Linker=Ci,t=Ci.prototype,oa("linker",Ci),On("decorate",t,t.ca,20),On("autoLink",t,t.S,25),oa("displayfeatures",Mi),oa("adfeatures",Mi),e=e&&e.q,f(e)?ca.D.apply(la,e):u(50)}},la.da=function(){for(var e=la.getAll(),t=0;t<e.length;t++)e[t].get(cn)};var da=la.N,ua=M[s];ua&&ua.r?da():$i(da),$i(function(){ca.D(["provide","render",b])})}(window),cc._RF.pop()},{}],example:[function(e,t,n){"use strict";cc._RF.push(t,"6d7c51CdL1MrKAon4W2epiD","example"),cc.Class({extends:cc.Component,properties:{test:null},onDestroy:function(){this.test=null,this.removeDataEvent()},destroyClass:function(){null!=this.node&&(this.removeEvent(),this.node.destroy())},addDataEvent:function(){},removeDataEvent:function(){},addEvent:function(){this.node.getChildByName("closebtn").on(cc.Node.EventType.TOUCH_END,this.clickCloseBtn,this)},removeEvent:function(){this.node.getChildByName("closebtn").off(cc.Node.EventType.TOUCH_END,this.clickCloseBtn,this)},initialize:function(){this.addEvent(),this.addDataEvent()},refreshLayer:function(){},clickCloseBtn:function(){this.destroyClass()}}),cc._RF.pop()},{}]},{},["Game","GameGlobal","Resource","Engine","GameTool","FaceBookAdvertisement","FaceBookBot","FaceBookLeaderboard","FaceBookPayment","FaceBookSDK","FaceBookUpdateAsync","GameAdapterInfo","GameAnimation","GameArtWord","GameCustomImage","GameData","GameEventManager","GameLanguageLabel","GameLanguageSprite","GameListLayer","GameMemoryManagement","GameMove","GameSound","GameSoundButton","GameTextLanguage","GameTextureLoad","GameTime","GameCPU","GameCPUManagement","GameLoadCPU","CacheData","GameArrayDic","NumBigUnit","NumCalculate","TileMapData","GameBackgroundLoad","GameExternalImage","GameLoadPrefabLayer","GameLoadTexture","GameLog","HttpSendData","GameLoadPrefab","GameLoadSpine","GameLoadSprite","GameSoundLoad","LoadControl","GameScene","GameEventConfig","GameAnimationConfig","GameConfigData","GameRankData","HeroData","GameAchievementData","GameAchievementOrStrong","GameAchievementOrStrongNode","GameStrongData","GameDailyTaskData","GameDailyTaskLayer","GameDailyTaskNode","example","CustomEndLayer","FightControl","FightMapLayer","FightUILayer","GameOverLayer","GradeUpLayer","GridData","GridNode","HelpLayer","LoseDetailLayer","MapData","NewElementTipsLayer","PauseLayer","ResultLayer","ResultNode","ResurgenceLayer","SurpassLayer","TargetLayer","GameGradeData","GradeLayer","GradeNode","AdvertFail","ChooseMessengerLayer","MainUILayer","GameChatRaceLampLayer","LoadResLayer","LoadingLayer","PublicLayer","RaceLampData","TipsLayer","WatchAdvertLayer","GameRankLayer","GameRankNode","GameSurpriseLayer","GameSurpriseNode","FightSceneControl","GameLoadUI","LoginSceneControl","MainSceneControl","SceneControl","FacebookSDKTestData","LoginFaceBookSDK","analytics","analytics_config"]);