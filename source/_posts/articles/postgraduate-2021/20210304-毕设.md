---
title: 本科毕业设计
date: 2021-03-04 09:12:47
updated: 2021-03-04 09:12:47
tags:
---

## 1. Core

### 1.1 PCA

无监督学习
降维
变异性
LDA 监督

### 1.2 SVM

### 1.3 Logistic

## x. 系统结构

### 系统角色

- 学生
- 教秘
- 管理员

## 2. Client

### 2.1 用户登录界面

初始化为学号+密码

初次登陆设置个人信息

申请使用个人信息，所以必须完善

### 2.2 用户主界面

1. 详情链接
2. 个人数据展示
   1. 是否符合课程的要求
   2. 面试结果
3. 转入、转出

### 2.3 转专业流程

学生填写申请
转出学院同意
转入学院同意1
学生参加考核
转入学院公布成绩

## 3. Server

### 3.1 Database

**Table**

```sql
-- 学院表
CREATE TABLE IF NOT EXISTS tb_college (
  id varchar(8) primary key,  -- 学院代码
  name varchar(20) not null   -- 学院名称
);

-- 专业表
CREATE TABLE IF NOT EXISTS tb_major (
  id varchar(8) not null,       -- 专业代码
  name varchar(20) not null,    -- 专业名称
  college varchar(8) not null,  -- 学院代码
  primary key (id, college),
  foreign key (college) references tb_college(id) -- 注释
);

-- 学生表
CREATE TABLE IF NOT EXISTS tb_student (
  username varchar(16) primary key, -- 学号
  password varchar(16) not null,    -- 密码
  name varchar(16) not null,        -- 姓名
  gender tinyint(1) null,           -- 性别
  phone varchar(16) null,           -- 电话
  grade year null,                  -- 年级
  major varchar(8) null,            -- 专业代码
  valid tinyint(1) not null default 0,  -- 账号状态
  foreign key (major) references tb_major(id) -- 注释
);

-- 教工表
CREATE TABLE IF NOT EXISTS tb_teacher (
  username varchar(16) primary key, -- 教工号
  password varchar(16) not null,    -- 密码
  name varchar(16) not null,        -- 姓名
  gender tinyint(1) not null,       -- 性别
  phone varchar(16) not null        -- 电话
);

-- 课程表
CREATE TABLE IF NOT EXISTS tb_course (
  id varchar(8) primary key,  -- 课程代码
  kcmc varchar(32) not null,  -- 课程名
  kcxz varchar(32) not null,
  kcpt varchar(32) not null,
  credits float not null,
);

-- 公告表
CREATE TABLE IF NOT EXISTS tb_notice (
  id int auto_increment primary key,  -- ID
  title varchar(20) not null,         -- 标题
  render varchar(1000) not null,      -- html文本
  content varchar(500) not null,      -- 内容
  update_time timestamp not null,     -- 更新时间
  publisher varchar(16) not null,     -- 教工号
  valid tinyint(1) not null,          -- 是否有效
  foreign key (publisher) references tb_teacher(id) -- 注释
);

-- 修读表
CREATE TABLE IF NOT EXISTS tb_exam (
  student_id varchar(16) not null,  -- 学号
  course_id varchar(8) not null,    -- 课程代码
  score int null,                   -- 成绩
  primary key (student_id, course_id),
  foreign key (student_id) references tb_student(id), -- 注释
  foreign key (course_id) references tb_course(id)    -- 注释
);

-- 专业课程联系
CREATE TABLE IF NOT EXISTS tb_major_course (
  major_id varchar(8) not null,  -- 专业代码
  course_id varchar(8) not null, -- 课程代码
  primary key (major_id, course_id)
);

-- 申请状态表
CREATE TABLE IF NOT EXISTS tb_application_state (
  id int primary key,       -- 状态ID
  info varchar(16) not null -- 状态信息
);

-- 申请表
CREATE TABLE IF NOT EXISTS tb_transfer_application (
  student_id varchar(16) primary key,   -- 学号
  in_major varchar(8) not null,         -- 转入专业ID
  out_major varchar(8) not null,        -- 转出专业ID
  in_grade year not null,               -- 转入年级
  out_grade year not null,              -- 转出年级
  reason varchar(300) not null,         -- 申请理由
  state int not null,                   -- 申请状态
  update_time timestamp not null,       -- 更新时间
  application_type tinyint(1) not null, -- 申请类别
  review_comment varchar(200) null,     -- 审核意见
  foreign key (state) references tb_application_state(id) -- 注释
);

-- 映射表
CREATE TABLE IF NOT EXISTS tb_kv (
  `k` varchar(64) primary key,  -- key
  `v` varchar(64) not null      -- value
);
```

**View**

```sql
-- 专业
CREATE view vi_major as
SELECT a.id as major_id, b.id as college_id, a.name as major, b.name as college from tb_major as a
LEFT JOIN tb_college as b on a.college=b.id;

-- 学生
CREATE VIEW vi_student as
SELECT username, a.name, gender, phone, grade, b.major_id, b.college_id, b.major, b.college, a.valid
FROM tb_student as a
LEFT JOIN vi_major as b on a.major=b.major_id;

-- 申请
CREATE VIEW vi_application AS
SELECT student_id, e.name as 'student_name', e.gender as 'student_gender',
e.phone as 'student_phone', in_major as in_major_id, out_major as out_major_id,
in_grade, out_grade, reason, a.state as 'state_id', b.info as 'state', update_time, application_type, review_comment,
c.college_id as 'in_college_id', c.major as 'in_major', c.college as 'in_college',
d.college_id as 'out_college_id', d.major as 'out_major', d.college as 'out_college'
FROM tb_transfer_application as a
LEFT JOIN tb_application_state as b on b.id=a.state
LEFT JOIN vi_major as c on c.major_id=a.in_major
LEFT JOIN vi_major as d on d.major_id=a.out_major
LEFT JOIN tb_student as e on e.username=a.student_id;

-- 公告
CREATE VIEW vi_notice AS SELECT a.id, a.title, a.render, a.content, a.update_time, a.publisher, a.valid, b.NAME
FROM tb_notice AS a
LEFT JOIN tb_teacher AS b ON a.publisher = b.username;

-- 成绩
CREATE view vi_exam as
SELECT b.id as course_id, a.student_id, b.kcmc, a.score, b.kcxz, b.kcpt, credits from tb_exam as a
LEFT JOIN tb_course as b on a.course_id=b.id;
```

**Trigger**

**Index**

### 3.2 SQL

```sql
-- 用户
insert into tb_student values
('001','123','测试学生1',0,'12345678900',2017,'080904',1),
('002','123','测试学生2',1,'98765432100',2018,'080901',1),
('003','123','测试学生3',0,'02587413695',2019,'080703',0);

insert into tb_teacher values
('001','123','测试教师1',0,'78536954120'),
('002','123','测试教师2',1,'36985234712');

insert into tb_college values
('0809','计算机科学与信息工程学院/软件学院'),
('0807','电子信息学院');

insert into tb_major values
('080901','计算机科学与技术','0809'),
('080902','软件工程','0809'),
('080904','信息安全','0809'),
('080701','电子信息工程','0807'),
('080703','通信工程','0807');

-- 顺序不能变，使审核通过时 state+2
insert into tb_application_state values
(1, '待审核'),
(2, '审核未通过'),
(3, '审核通过'),
(4, '考核未通过'),
(5, '考核通过');
```

### 3.2 Api

**学生端**

- 登录

**教秘端**

- 登录

**系统端**

- 修改申请

**学生端问题**

主界面（系统介绍，须知）

历史申请记录（表格）

填写申请
填表，上传材料（保存，提交）
等待审批进度
公告

申请成功，请提交相关材料
您有未结束的申请，不能重复提交
一旦提交，不能修改

## 4. 进度报告

### 4.1 进度

**进度报告**

- 完善开题报告，绘制系统的ER图和DFD。
- 查阅PCA、SVM资料，知道PCA用于提取特征量来展现数据的变异性，SVM主要用于数据分类；了解到PCA-Logistic模型可能比PCA-SVM模型效果更好；较小的数据集PCA做的分类正确率可能比原始数据低，之后深入研究算法也许可以做出优化。
- 搜索Python实现PCA-Logistic模型的代码，打算使用scikit-learn库进行数据训练和模拟测试。
- 之后继续学习pca相关模型，10月开始设计数据库字段和数据的交互逻辑，pca模型的初步实现。

**关于ER图和系统数据库的疑问**

- 转专业申请表，学生需要填写哪些数据，其他证明材料可否作为附件上传？
- 学生以往成绩，能从已有的数据（如教务系统）获取吗？
- 学生对本专业的认知和兴趣动机，通过非开放式的调查问卷填写（如“是否对本专业的培养计划有所了解【非常了解#基本了解#不了解】”）是否可行
- 3位教师对考核的评分是统计后由教务秘书录入还是老师们各自录入？
- 能否获取往年转专业学生的样本数据

### 4.2 待优化

转专业排名，评分
md5加密
学生申请界面刷新
没有权限、页面不存在、用户未登录