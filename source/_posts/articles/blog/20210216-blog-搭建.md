---
title: Hexo + GitHub Pages 搭建个人博客
date: 2021-02-16 16:04:00
updated: 2021-02-17 14:05:56
author: Forrest
tags:
categories: 博客
---

## 1. 搭建

Hexo + Volantis 主题 + Github Pages

### 1.1 资源 cdn 加速

对于本地的 css js images 等资源文件，引入时可以用 CDN 加速，例如托管于 GitHub 下的 `/css/font-awesome.min.css` 可替换成 `https://cdn.jsdelivr.net/gh/用户名/仓库名/css/font-awesome.min.css`

## 3. 插件

### 3.1 live2d

```bash
# 安装 live2d
npm install --save hexo-helper-live2d

# 下载对应的 model
npm install live2d-widget-model-tororo
```

**修改站点配置**

```yml
# Live2D
## https://github.com/EYHN/hexo-helper-live2d
## https://l2dwidget.js.org/docs/class/src/index.js~L2Dwidget.html#instance-method-init
live2d:
  enable: true
  scriptFrom: local # 默认
  pluginRootPath: live2dw/ # 插件在站点上的根目录(相对路径)
  pluginJsPath: lib/ # 脚本文件相对与插件根目录路径
  pluginModelPath: assets/ # 模型文件相对与插件根目录路径
  # scriptFrom: jsdelivr # jsdelivr CDN
  # scriptFrom: unpkg # unpkg CDN
  # scriptFrom: https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js # 你的自定义 url
  tagMode: false # 标签模式, 是否仅替换 live2d tag标签而非插入到所有页面中
  debug: false # 调试, 是否在控制台输出日志
  model:
    use: live2d-widget-model-tororo
    # use: live2d-widget-model-wanko # npm-module package name
    # use: wanko # 博客根目录/live2d_models/ 下的目录名
    # use: ./wives/wanko # 相对于博客根目录的路径
    # use: https://cdn.jsdelivr.net/npm/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json # 你的自定义 url
  display:
    position: left
    width: 120
    height: 250
  mobile:
    show: true
    scale: 0.5
  react:
    opacityDefault: 0.7
    opacityOnHover: 0.2
```

### 3.2 encrypt

```
npm install --save hexo-blog-encrypt
```

### 3.3 markdown-it


**添加 emoji 表情支持**

将 hexo 原本的 `marked` 渲染器换为 `markdown-it`

```
npm uninstall hexo-renderer-marked
npm install hexo-renderer-markdown-it --save
```

安装 `markdown-it-emoji` 扩展

```
npm install markdown-it-emoji --save
```

**添加复选框语法支持**

```
npm install markdown-it-checkbox --save
```

**修改站点配置**

```yml
# Markdown-it config
## Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki
markdown:
  render:
    html: true
    xhtmlOut: false
    breaks: false
    linkify: true
    typographer: true
    quotes: '“”‘’'
  plugins:
    - markdown-it-abbr
    - markdown-it-footnote
    - markdown-it-ins
    - markdown-it-sub
    - markdown-it-sup
    - markdown-it-emoji
    - markdown-it-checkbox
  anchors:
    level: 2
    collisionSuffix: ''
    permalink: false
    permalinkClass: header-anchor
    permalinkSymbol: ¶
```

## 4. 踩坑

**加载网络图片资源 403**

```
# 报错如下
Failed to load resource: the server responded with a status of 403 ()

# 在主题文件 head.ejs 中加入
<meta name="referrer" content="no-referrer" />
```

**source 文件夹下 CSS 与 Hexo-Tag-Aplayer 冲突**

放在 `source/css/` 的文件头部会自动导入 aplayer 导致格式错乱，将路径改到主题下的 `source/css/` 即可。

**source 文件夹下下划线开头的文件在生成时被忽略**

Hexo 默认会忽略某些文件和文件夹

- 隐藏
- 以下划线 `_` 开头
- 以点 `.` 开头

通过站点设置，可以将他们包括进来。Hexo 将处理 /source/game/data/beat-line 中所有双下划线开头的文件和文件夹。

```yml
include:
  game/data/beat-line/__**
```

## 5. 待记录问题

Valine 评论

leancloud

腾讯云

tidio https://www.tidio.com/

botui https://github.com/botui/botui

artitalk https://artitalk.js.org/

Eaplayer